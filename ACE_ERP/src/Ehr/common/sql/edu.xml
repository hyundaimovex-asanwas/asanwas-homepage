

<sqls>

<!-- 어학성적관리 -->
<!--
***********************************************************************
* @USECASE     : EDUB010
* @description : 어학성적 관리
***********************************************************************
* 2006/12/19      채갑병       최초작성
***********************************************************************
-->

    <!-- 어학성적 정보를 조회 한다. -->
    <sql name="EDUB010_SHR">
        <description>어학성적 조회</description>
        <query>
            <![CDATA[
             SELECT  A.ENO_NO, A.OCC_CD, A.INT_NAM, A.SBJ_CD, ASNHR.SF_GET_COMMname('01','M1',A.SBJ_CD) AS SBJ_NM, A.SBJ_LSN, A.SBJ_RED,
                     A.SBJ_SPC,A.SBJ_VOC,A.SBJ_IPT, A.SBJ_TOT,A.SBJ_ETC, A.TTL_AVR, A.GRADE, A.SBJ_AMT, A.REMARK,
                     TO_CHAR(TO_DATE(A.PRO_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')  AS PRO_YMD,
                     B.ENO_NM, B.CET_NO, B.DPT_NM, B.OCC_NM, B.JOB_NM, B.HIR_YMD, B.RET_YMD
             FROM    ASNHR.T_CM_EXAMINATION A,
                     ( SELECT ENO_NO, ENO_NM, CET_NO, DPT_CD, DPT_NM, OCC_NM, JOB_NM, JOB_CD,
                              TO_CHAR(HIR_YMD, 'YYYY-MM-DD')  AS HIR_YMD,
                              TO_CHAR(RET_YMD, 'YYYY-MM-DD')  AS RET_YMD
                       FROM   ASNHR.VI_T_CM_PERSON2
                      ) B
             WHERE   A.ENO_NO = B.ENO_NO
                 AND SBJ_CD LIKE '%'||?||'%'
                     [1]
             ORDER BY DPT_CD, JOB_CD
            ]]>
        </query>
    </sql>

    <!-- 어학성적 정보를 조회 한다.(인쇄용) -->
    <sql name="EDUB010_SHR_PRINT">
        <description>어학성적 조회</description>
        <query>
            <![CDATA[
             SELECT  DPT_NM
				   , JOB_NM
				   , ENO_NM
				   , CET_NO
				   , SBJ_CD
				   , ASNHR.SF_GET_COMMname('01','M1',SBJ_CD) SBJ_NM
				   , INT_NAM
				   , SBJ_LSN
				   , SBJ_RED
				   , SBJ_SPC
				   , SBJ_VOC
				   , SBJ_IPT
				   , SBJ_TOT
				   , SBJ_ETC
			       , TTL_AVR
				   , PRO_YMD
				   , REMARK
             FROM    ASNHR.T_CM_EXAMINATION A,
                     ( SELECT ENO_NO, ENO_NM, CET_NO, DPT_CD, DPT_NM, OCC_NM, JOB_NM, JOB_CD,
                              TO_CHAR(HIR_YMD, 'YYYY-MM-DD')  AS HIR_YMD,
                              TO_CHAR(RET_YMD, 'YYYY-MM-DD')  AS RET_YMD
                       FROM   ASNHR.VI_T_CM_PERSON2
                      ) B
             WHERE   A.ENO_NO = B.ENO_NO
                     [1]
            ]]>
        </query>
    </sql>

    <!-- 사원 정보를 조회 한다. -->
    <sql name="EDUB010_SHR_01">
        <description>사원 정보조회</description>
        <query>
            <![CDATA[
             SELECT CET_NO
                  , OCC_NM
                  , DPT_NM
                  , JOB_NM
                  , TO_CHAR(HIR_YMD, 'YYYY-MM-DD') AS HIR_YMD
                  , TO_CHAR(RET_YMD, 'YYYY-MM-DD') AS RET_YMD
                  , NVL((SELECT COUNT(*)
                           FROM ASNHR.T_CM_EXAMINATION
                          WHERE ENO_NO  = ?
                            AND PRO_YMD = ?
                            AND SBJ_CD  = ?), 0) AS CNT
               FROM ASNHR.VI_T_CM_PERSON2
              WHERE ENO_NO = ?
            ]]>
        </query>
    </sql>

    <!-- 어학성적 정보를 저장 한다. -->
    <sql name="EDUB010_INS">
        <description>어학성적 저장</description>
        <query>
            <![CDATA[
             INSERT  INTO ASNHR.T_CM_EXAMINATION
                     ( ENO_NO, PRO_YMD, OCC_CD, INT_NAM, SBJ_CD , SBJ_LSN, SBJ_RED,
                       SBJ_SPC,SBJ_VOC, SBJ_IPT,SBJ_TOT, SBJ_ETC, TTL_AVR,
                       GRADE , SBJ_AMT, REMARK, IPT_MAN, IPT_YMD, UPT_MAN, UPT_YMD
                      )
             VALUES  (      ?,       ?,
                           (SELECT OCC_CD FROM ASNHR.VI_T_CM_PERSON WHERE ENO_NO = ?),
                            ?,       ?,       ?,       ?,       ?,
                            ?,       ?,       ?,       ?,       ?,
                            ?,       ?,       ?,       ?, SYSDATE,       ?,  SYSDATE
                      )
            ]]>
        </query>
    </sql>

    <!-- 어학성적 정보를 수정 한다. -->
    <sql name="EDUB010_UPT">
        <description>어학성적 수정</description>
        <query>
            <![CDATA[
             UPDATE  ASNHR.T_CM_EXAMINATION
             SET     INT_NAM       = ?,        -- 시행처
                     SBJ_CD        = ?,        -- 시험코드
                     SBJ_LSN       = ?,        -- 과목1(청취)
                     SBJ_RED       = ?,        -- 과목2(필기)
                     SBJ_SPC       = ?,        -- 과목3(말하기)
                     SBJ_VOC       = ?,        -- 과목4(어휘)
                     SBJ_IPT       = ?,        -- 과목5(독해)
                     SBJ_TOT       = ?,        -- 과목6(종합)
                     SBJ_ETC       = ?,        -- 과목7(기타)
                     TTL_AVR       = ?,        -- 합계
                     GRADE         = ?,        -- 급수
                     SBJ_AMT       = ?,        -- 시험응시료
                     REMARK        = ?,        -- 비고
                     UPT_MAN       = ?,        -- 최종 수정자
                     UPT_YMD       = SYSDATE   -- 최종 수정일
             WHERE   ENO_NO        = ?         -- 사번
             AND     PRO_YMD       = ?         -- 응시일자
            ]]>
        </query>
    </sql>

    <!-- 어학성적 정보를 삭제 한다. -->
    <sql name="EDUB010_DEL">
        <description>어학성적 삭제</description>
        <query>
            <![CDATA[
             DELETE  ASNHR.T_CM_EXAMINATION
             WHERE   ENO_NO   = ?
             AND     PRO_YMD  = ?
            ]]>
        </query>
    </sql>


<!--
***********************************************************************
* @USECASE     : EDUC010
* @description : 과정참여현황
***********************************************************************
* 2007/03/08      박인이        최초작성.
***********************************************************************
-->

    <!-- 과정참여현황 데이터 조회 -->
    <sql name="EDUC010_SHR">
        <description>과정참여현황 조회</description>
        <query>
            <![CDATA[
            SELECT A.ENO_NO                                     AS ENO_NO
                 , ASNHR.SF_GET_ENOname('01', A.ENO_NO)               AS ENO_NM
                 , B.ENO_NO                                     AS PENO_NO
                 , ASNHR.SF_GET_ENOname('01', B.ENO_NO)               AS PENO_NM
                 , SUBSTR(A.ENT_STR_YMD, 1, 4)                       AS EDU_YY       -- 년도
                 , A.EDU_CD
                 , B.EDU_NM       -- 과정명
                 , A.SEQ_NO
                 , TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')
                    || ' ~ '
                    || TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')
                                                                AS EDU_TERM     -- 교육기간
                 , A.MNGER_CD
                 , ASNHR.SF_GET_COMMname('01', 'Q7', A.MNGER_CD)      AS MNGER_NM
                 , A.FIELD_CD
                 , ASNHR.SF_GET_COMMname('01', 'Q5', A.FIELD_CD)      AS FIELD_NM
                 , A.SHAPE_CD
                 , ASNHR.SF_GET_COMMname('01', 'Q8', A.SHAPE_CD)      AS SHAPE_NM     -- 교육형태
                 , A.DECISION_CD
                 , ASNHR.SF_GET_COMMname('01', 'Q4', A.DECISION_CD)   AS DECISION_NM  -- 수강상태

                 --평가가 완료된 건은 신청 취소가 되지 않게
                , DECODE(A.DECISION_CD,'A',(CASE
                                                 WHEN A.ENT_END_YMD >= TO_CHAR(SYSDATE, 'YYYYMMDD')
                                                 THEN '수강취소'
                                                 ELSE '-'
                                            END )
                                       ,'C',(CASE
                                                 WHEN A.ENT_END_YMD >= TO_CHAR(SYSDATE, 'YYYYMMDD')
                                                 THEN '수강취소'
                                                 ELSE '-'
                                             END )
                                       ,'-') AS CANC_YN      -- 신청취소
                 , CASE WHEN (SELECT COUNT(*) FROM ASNHR.T_ED_EDUREPORT WHERE EDU_CD=A.EDU_CD AND SEQ_NO=A.SEQ_NO AND ENO_NO=A.ENO_NO)>0
	                   THEN '완료'
	                   ELSE '결과보고'
	                   END 									AS EDU_RPT         -- 교육결과보고
                 , '교육이력'                                   AS FUNC         -- 교육이력
              FROM (SELECT E.EDU_CD
                         , E.SEQ_NO
                         , E.ENO_NO
                         , E.DPT_CD
                         , D.ENT_STR_YMD
                         , D.ENT_END_YMD
                         , D.EDU_STR_YMD
                         , D.EDU_END_YMD
                         , E.DECISION_CD
                         , D.MNGER_CD
                         , D.FIELD_CD
                         , D.SHAPE_CD
                      FROM ASNHR.T_ED_CHASULIST D
                         , ASNHR.T_CM_EDUCATION E
                     WHERE D.EDU_CD = E.EDU_CD
                       AND D.SEQ_NO = E.SEQ_NO
                    ) A
                 , ASNHR.T_ED_COURSELIST B
             WHERE  A.EDU_CD                 = B.EDU_CD
               AND NVL(A.ENO_NO,' ')                 LIKE '%'||?||'%'
               AND NVL(A.EDU_STR_YMD,' ')                 LIKE ?||'%'
          ORDER BY A.EDU_STR_YMD
            ]]>
        </query>
    </sql>

    <!-- 교육사항 데이터 삭제 - 처리 완료된 데이타는 수정 할 수 없음 -->
    <!-- 삭제버튼 없음 -->
    <sql name="EDUC010_DEL">
        <description>교육사항 삭제 - 처리 완료된 데이타는 수정 할 수 없음</description>
        <query>
            <![CDATA[
            DELETE
              FROM ASNHR.T_ED_OBJTLIST
             WHERE EDU_CD  = ?
               AND SEQ_NO  = ?
               AND ENO_NO  = ?
            ]]>
        </query>
    </sql>

<!-- 현재 미사용 메뉴(2008.07.17)  -->
<!--
***********************************************************************
* @USECASE     : EDUC011
* @description : 사외교육결과등록
***********************************************************************
* 2007/03/09      박인이        최초작성.
***********************************************************************
-->
    <!-- 사외교육결과등록 조회 -->
    <sql name="EDUC011_SHR">
        <description>사외교육결과등록 조회</description>
        <query>
            <![CDATA[
            SELECT D.ENO_NO,
                   SF_GET_ENOname('01', D.ENO_NO)                                 AS ENO_NM,
                   C.FIELD_CD,
                   C.SHAPE_CD,
                   C.EDU_CD,
                   C.SEQ_NO,
                   C.EDU_NM,
                   D.STR_YMD,
                   TO_CHAR(TO_DATE(C.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')    AS EDU_STR_YMD,
                   TO_CHAR(TO_DATE(C.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')    AS EDU_END_YMD,
                   C.TIME_NO,
                   C.INT_NAM,
                   C.CPT_PNT,
                   C.PLACE_TAG,
                   C.COST_AMT,
                   C.INS_YN,
                   C.RTN_AMT,
                   D.ABSTRACT_TXT,
                   D.IMPRESSION_TXT,
                   D.OPINION_TXT,
                   D.RE_TARGET_TAG,
                   C.SITE_TAG,
                   D.DEGREE_TAG,
                   D.FILE_name,
                   D.FILE_URL
            FROM ( SELECT A.EDU_CD,
            		      B.EDU_NM,
                          A.SEQ_NO,
                          B.ENO_NO,
                          A.FIELD_CD,
                          A.SHAPE_CD,
                          A.EDU_STR_YMD,
                          A.EDU_END_YMD,
                          A.TIME_NO,
                          A.INT_NAM,
                          A.CPT_PNT,
                          A.PLACE_TAG,
                          A.COST_AMT,
                          A.INS_YN,
                          A.SITE_TAG,
                          A.RTN_AMT
                   FROM   ASNHR.T_ED_CHASULIST A,
                          ASNHR.T_ED_COURSELIST B
                   WHERE  A.EDU_CD = ?
                   AND    A.SEQ_NO = ?
                   AND    A.EDU_CD = B.EDU_CD
                 ) C,
                   ASNHR.T_CM_EDUCATION D
            WHERE  D.ENO_NO  = ?
            AND    C.EDU_CD  = D.EDU_CD
            AND    C.SEQ_NO  = D.SEQ_NO
            ]]>
        </query>
    </sql>


    <!-- 사외교육결과등록 수정 -->
    <sql name="EDUC011_UPT">
        <description>사외교육결과등록 수정</description>
        <query>
            <![CDATA[
            UPDATE ASNHR.T_CM_EDUCATION
            SET    ABSTRACT_TXT  = ?,
                   IMPRESSION_TXT  = ?,
                   OPINION_TXT  = ?,
                   RE_TARGET_TAG = ?,
                 --  URL_TAG
                   DEGREE_TAG    = ?,
                   FILE_name     = ?,
                   FILE_URL      = ?,
                   UPT_MAN       = ?,
                   UPT_YMD       = SYSDATE
            WHERE  ENO_NO        = ?
            AND    EDU_CD        = ?
            AND    SEQ_NO        = ?
            ]]>
        </query>
    </sql>

    <!-- 사외교육결과등록 수정 -->
    <sql name="EDUC011_UPT_RPT">
        <description>교육결과보고 문서번호 수정</description>
        <query>
            <![CDATA[
            UPDATE ASNHR.T_CM_EDUCATION
            SET    RPT_REQ_NO  = ?,
                   UPT_MAN       = ?,
                   UPT_YMD       = SYSDATE
            WHERE  ENO_NO        = ?
            AND    EDU_CD        = ?
            AND    SEQ_NO        = ?
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUC020, EDUC021
* @description : 나의교육이력-년도별교육이력
***********************************************************************
* 2007/04/20      김학수        최초작성.
***********************************************************************
-->
    <!-- 로그인사번의 교육권한 조회 -->
    <sql name="EDUC020_SHR_00">
        <description>로그인사번의 교육권한 조회</description>
        <query>
            <![CDATA[
            SELECT EDU_AUTHO,    -- 교육권한
                   CET_NO        -- 주민번호
            FROM   ASNHR.T_CM_EMPLIST
            WHERE  GUBUN  = '01'
            AND    ENO_NO = ?
            ]]>
        </query>
    </sql>

    <!-- 교육점수현황 -->
    <sql name="EDUC020_SHR_01">
        <description>교육점수현황</description>
        <query>
            <![CDATA[
            SELECT ENO_NO
                 , EDU_YY
                 , JOB_POINT
                 , CASE
                   WHEN CPT_PNT_TOT >= JOB_POINT
                   THEN JOB_POINT
                   ELSE CPT_PNT_TOT
                    END AS APP_POINT
                 , CPT_PNT_TOT
                 , CPT_PNT_AA1
                 , CPT_PNT_AB1
                 , CPT_PNT_AA2
                 , CPT_PNT_AB2
                 , CPT_PNT_LCT
                 , CPT_PNT_EXP

              FROM (SELECT E.ENO_NO
                         , E.EDU_YY
                         , E.JOB_POINT   JOB_POINT                           -- 인정학점

                         , NVL(F.CPT_PNT_AA1, 0)
                           + NVL(F.CPT_PNT_AB1, 0)
                           + NVL(F.CPT_PNT_AA2, 0)
                           + NVL(F.CPT_PNT_AB2, 0)
                           + NVL(G.CPT_PNT,     0)
                           + NVL(H.CPT_PNT,     0) AS CPT_PNT_TOT   -- 학점합게

                         , NVL(F.CPT_PNT_AA1, 0) AS CPT_PNT_AA1     -- 사내필수
                         , NVL(F.CPT_PNT_AB1, 0) AS CPT_PNT_AB1     -- 사내선택
                         , NVL(F.CPT_PNT_AA2, 0) AS CPT_PNT_AA2     -- 사외필수
                         , NVL(F.CPT_PNT_AB2, 0) AS CPT_PNT_AB2     -- 사외선택
                         , NVL(G.CPT_PNT,     0) AS CPT_PNT_LCT     -- 사내강의
                     , NVL(H.CPT_PNT,     0) AS CPT_PNT_EXP     -- 예외
                      FROM (SELECT ENO_NO
                                 , ? AS EDU_YY
                                 , (SELECT NVL(MAX(JOB_POINT), 0)
                                      FROM ASNHR.T_ED_JOBPOINT
                                     WHERE JOB_CD = B.GBN2_TAG
                                    ) AS JOB_POINT
                              FROM ASNHR.T_CM_PERSON A
                                 , ASNHR.T_CM_COMMON B
                             WHERE ENO_NO   = ?
                               AND A.JOB_CD = B.COMM_CD
                               AND B.CD_GBN = 'A2'
                            ) E
                           -- 사내교육, 사외교육 점수 가져오기
                         , (SELECT ENO_NO
                                 , EDU_YY
                                 , NVL(SUM(CASE
                                           WHEN PLACE_CD = '1'
                                            AND EDU_GBN_CD = 'AA'
                                           THEN CPT_PNT*10
                                            END), 0) AS CPT_PNT_AA1
                                 , NVL(SUM(CASE
                                           WHEN PLACE_CD = '1'
                                            AND EDU_GBN_CD = 'AB'
                                           THEN CPT_PNT*10
                                            END), 0) AS CPT_PNT_AB1
                                 , NVL(SUM(CASE
                                           WHEN PLACE_CD = '2'
                                            AND EDU_GBN_CD = 'AA'
                                           THEN CPT_PNT*10
                                            END), 0) AS CPT_PNT_AA2
                                 , NVL(SUM(CASE
                                           WHEN PLACE_CD = '2'
                                            AND EDU_GBN_CD = 'AB'
                                           THEN CPT_PNT*10
                                            END), 0) AS CPT_PNT_AB2
                              FROM (SELECT A.ENO_NO
                                         , SUBSTR(A.STR_YMD, 1, 4) AS EDU_YY
                                         , A.CPT_PNT            -- 이수점수
                                         , A.PLACE_CD           -- '1' : 사내, '2' : 사외, '3' : 인터넷
                                         , A.EDU_GBN_CD         -- 'AA' : 필수, 'AB' : 선택
                                      FROM ASNHR.T_CM_EDUCATION A
                                     WHERE A.EDU_TAG = 'Y'      -- '수료'
                                    )
                          GROUP BY ENO_NO
                                 , EDU_YY
                            ) F
                           -- 사내강의 학점
                         , (SELECT C.ENO_NO
                                 , SUBSTR(A.EDU_STR_YMD, 1, 4) AS EDU_YY
                                 , SUM(NVL(B.CPT_PNT, 0)) AS CPT_PNT
                              FROM ASNHR.T_ED_CHASULIST A
                                 , ASNHR.T_ED_LCTRHIST B
                                 , ASNHR.T_CM_PERSON C
                             WHERE A.EDU_CD = B.EDU_CD
                               AND A.SEQ_NO = B.SEQ_NO
                               AND A.CET_NO = B.CET_NO
                               AND A.CET_NO = C.CET_NO
                          GROUP BY C.ENO_NO
                                 , SUBSTR(A.EDU_STR_YMD, 1, 4)
                             ) G
                           -- 예외학점
                         , (SELECT SUBSTR(STR_YMD,1,4) AS STR_YY, ENO_NO, CPT_PNT FROM ASNHR.T_ED_EXCEPTER) H
                     WHERE E.ENO_NO = F.ENO_NO(+)
                       AND E.EDU_YY = F.EDU_YY(+)
                       AND E.ENO_NO = G.ENO_NO(+)
                       AND E.EDU_YY = G.EDU_YY(+)
                       AND E.ENO_NO = H.ENO_NO(+)
                       AND E.EDU_YY = H.STR_YY(+)
                    )
            ]]>
        </query>
    </sql>

    <!-- 사내교육이력, 사외교육이력 -->
    <sql name="EDUC020_SHR_02">
        <description>사내교육이력, 사외교육이력</description>
        <query>
            <![CDATA[
            SELECT A.EDU_CD
                 , A.EDU_NM   --과정명
                 , A.SEQ_NO
                 , C.TIME_NO
                 , TO_CHAR(TO_DATE(A.STR_YMD), 'YYYY/MM/DD')
                     ||'~'
                     ||TO_CHAR(TO_DATE(A.END_YMD), 'YYYY/MM/DD') AS EDU_YMD  --교육일정
                 , C.SHAPE_CD
                 , ASNHR.SF_GET_COMMname('01', 'Q8', C.SHAPE_CD)       AS SHAPE_NM --형태
                 , A.EDU_TAG
                 , A.CPT_PNT*10 CPT_PNT
                 , A.INT_NAM
                 , A.PLACE_CD
                 , ASNHR.SF_GET_COMMname('01', 'Q9', A.PLACE_CD)       AS PLACE_NM
              FROM ASNHR.T_CM_EDUCATION A
                 , ASNHR.T_ED_COURSELIST B
                 , ASNHR.T_ED_CHASULIST C
            WHERE A.EDU_CD               = B.EDU_CD(+)
              AND A.EDU_CD               = C.EDU_CD(+)
              AND A.SEQ_NO               = C.SEQ_NO(+)
              AND A.ENO_NO               = ?
              AND SUBSTR(A.STR_YMD, 1, 4) = ?
              AND A.PLACE_CD             = ?
            --ORDER BY EDU_YMD
            ]]>
        </query>
    </sql>

    <!-- 사내강의 이력 -->
    <sql name="EDUC020_SHR_03">
        <description>사내강의 이력</description>
        <query>
            <![CDATA[
			SELECT A.LCT_TAG                                             --강의명
			     , A.LCT_TIME                                            --강의시간
			     , TO_CHAR(TO_DATE(C.EDU_STR_YMD), 'YYYY/MM-DD')
			         ||'~'
			         ||TO_CHAR(TO_DATE(C.EDU_END_YMD), 'YYYY/MM/DD') AS EDU_YMD  --강의일정
			     , A.EDU_CD
			     , B.EDU_NM   --과정명
			     , A.SEQ_NO                                                      --차수
			     , C.SHAPE_CD
                 , ASNHR.SF_GET_COMMname('01', 'Q8', C.SHAPE_CD)           AS SHAPE_NM --형태
			     , A.CPT_PNT*10 CPT_PNT                                                    --점수
			  FROM ASNHR.T_ED_LCTRHIST A
			     , ASNHR.T_ED_COURSELIST B
			     , ASNHR.T_ED_CHASULIST C
			 WHERE A.EDU_CD                  = B.EDU_CD
			   AND A.EDU_CD                  = C.EDU_CD
			   AND A.SEQ_NO                  = C.SEQ_NO
			   AND SUBSTR(C.EDU_STR_YMD, 1, 4)    = ?
			   AND A.CET_NO = (SELECT CET_NO
			                     FROM ASNHR.T_CM_PERSON
			                    WHERE ENO_NO = ?
			                   )
             ]]>
        </query>
    </sql>

    <!-- 예외자 이력 -->
    <sql name="EDUC020_SHR_05">
        <description>예외자 이력</description>
        <query>
            <![CDATA[
            SELECT A.EXC_CD
                 ,SF_GET_COMMname('01', 'QD', A.EXC_CD)||'    '||'(시작일:'||  TO_CHAR(TO_DATE( STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')
                 ||'~종료일:'||TO_CHAR(TO_DATE(END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')||')' AS EXC_NM  --예외구분
                 , A.CPT_PNT*10 CPT_PNT                                       --점수
              FROM ASNHR.T_ED_EXCEPTER A
             WHERE SUBSTR(A.STR_YMD,1,4) = ?
               AND A.ENO_NO = ?
            ]]>
        </query>
    </sql>


    <!-- 사원정보 -->
    <sql name="EDUC020_SHR_06">
        <description>사원정보</description>
        <query>
            <![CDATA[
           SELECT ENO_NM
                 ,ENO_NO
                 ,SF_GET_DPTname(GUBUN,  'A4', DPT_CD)   AS DPT_NM          -- 부서명
                 ,SF_GET_COMMname(GUBUN, 'A2', JOB_CD)   AS JOB_NM          -- 직위명
           FROM ASNHR.T_CM_PERSON
           WHERE ENO_NO = ?

            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUC030
* @description : 나의교육이력-년도별확정점수
***********************************************************************
* 2007/04/19      김학수        최초작성.
***********************************************************************
-->
    <!-- 로그인사번의 교육권한 조회 -->
    <sql name="EDUC020_SHR_00">
        <description>로그인사번의 교육권한 조회</description>
        <query>
            <![CDATA[
            SELECT EDU_AUTHO,    -- 교육권한
                   CET_NO        -- 주민번호
            FROM   ASNHR.T_CM_EMPLIST
            WHERE  GUBUN  = '01'
            AND    ENO_NO = ?
            ]]>
        </query>
    </sql>

    <!-- 년도별 확정점수 조회 -->
    <sql name="EDUC030_SHR">
        <description>년도별 확정점수 조회</description>
        <query>
            <![CDATA[
            SELECT ENO_NO
                 , EDU_YY
                 , JOB_POINT
                 , CASE
                   WHEN CPT_PNT_TOT >= JOB_POINT
                   THEN JOB_POINT
                   ELSE CPT_PNT_TOT
                    END AS APP_POINT
                 , CPT_PNT_TOT
                 , CPT_PNT_AA1 + CPT_PNT_AA2 AS CPT_PNT_AA
                 , CPT_PNT_AB1 + CPT_PNT_AB2 AS CPT_PNT_AB
                 , CPT_PNT_LCT
                 , CPT_PNT_EXP

              FROM (SELECT F.ENO_NO
                         , F.EDU_YY
                         , E.JOB_POINT                              -- 인정학점

                         , NVL(F.CPT_PNT_AA1, 0)
                           + NVL(F.CPT_PNT_AB1, 0)
                           + NVL(F.CPT_PNT_AA2, 0)
                           + NVL(F.CPT_PNT_AB2, 0)
                           + NVL(G.CPT_PNT,     0)
                           + NVL(H.CPT_PNT,     0) AS CPT_PNT_TOT   -- 학점합게

                         , NVL(F.CPT_PNT_AA1, 0) AS CPT_PNT_AA1     -- 사내필수
                         , NVL(F.CPT_PNT_AB1, 0) AS CPT_PNT_AB1     -- 사내선택
                         , NVL(F.CPT_PNT_AA2, 0) AS CPT_PNT_AA2     -- 사외필수
                         , NVL(F.CPT_PNT_AB2, 0) AS CPT_PNT_AB2     -- 사외선택
                         , NVL(G.CPT_PNT,     0) AS CPT_PNT_LCT     -- 사내강의
                         , NVL(H.CPT_PNT,     0) AS CPT_PNT_EXP     -- 예외
                      FROM (SELECT ENO_NO
                                 , (SELECT NVL(JOB_POINT, 0)
                                      FROM ASNHR.T_ED_JOBPOINT
                                     WHERE JOB_CD = B.GBN2_TAG
                                     AND PIS_YY = '2009'
                                    ) AS JOB_POINT
                              FROM ASNHR.T_CM_PERSON A
                                 , ASNHR.T_CM_COMMON B
                             WHERE A.JOB_CD = B.COMM_CD
                               AND B.CD_GBN = 'A2'
                            ) E
                           -- 사내교육, 사외교육 점수 가져오기
                         , (SELECT ENO_NO
                                 , EDU_YY
                                 , NVL(SUM(CASE
                                           WHEN PLACE_CD = '1'
                                            AND EDU_GBN_CD = 'AA'
                                           THEN CPT_PNT
                                            END), 0) AS CPT_PNT_AA1
                                 , NVL(SUM(CASE
                                           WHEN PLACE_CD = '1'
                                            AND EDU_GBN_CD = 'AB'
                                           THEN CPT_PNT
                                            END), 0) AS CPT_PNT_AB1
                                 , NVL(SUM(CASE
                                           WHEN PLACE_CD = '2'
                                            AND EDU_GBN_CD = 'AA'
                                           THEN CPT_PNT
                                            END), 0) AS CPT_PNT_AA2
                                 , NVL(SUM(CASE
                                           WHEN PLACE_CD = '2'
                                            AND EDU_GBN_CD = 'AB'
                                           THEN CPT_PNT
                                            END), 0) AS CPT_PNT_AB2
                              FROM (SELECT A.ENO_NO
                                         , SUBSTR(A.STR_YMD, 1, 4) AS EDU_YY
                                         , A.CPT_PNT            -- 이수점수
                                         , A.PLACE_CD           -- '1' : 사내, '2' : 사외, '3' : 인터넷
                                         , A.EDU_GBN_CD         -- 'AA' : 필수, 'AB' : 선택
                                      FROM ASNHR.T_CM_EDUCATION A
                                     WHERE A.EDU_TAG = 'Y'      -- '수료'
                                    )
                          GROUP BY ENO_NO
                                 , EDU_YY
                            ) F
                           -- 사내강의 학점
                         , (SELECT C.ENO_NO
                                 , SUBSTR(A.EDU_STR_YMD, 1, 4) AS EDU_YY
                                 , SUM(NVL(B.CPT_PNT, 0)) AS CPT_PNT
                              FROM ASNHR.T_ED_CHASULIST A
                                 , ASNHR.T_ED_LCTRHIST B
                                 , ASNHR.T_CM_PERSON C
                             WHERE A.EDU_CD = B.EDU_CD
                               AND A.SEQ_NO = B.SEQ_NO
                               AND A.CET_NO = B.CET_NO
                               AND A.CET_NO = C.CET_NO
                          GROUP BY C.ENO_NO
                                 , SUBSTR(A.EDU_STR_YMD, 1, 4)
                             ) G
                           -- 예외학점
                         , (SELECT SUBSTR(STR_YMD,1,4) AS STR_YY, ENO_NO, CPT_PNT FROM ASNHR.T_ED_EXCEPTER) H
                     WHERE F.ENO_NO = E.ENO_NO(+)
                       AND F.ENO_NO = G.ENO_NO(+)
                       AND F.EDU_YY = G.EDU_YY(+)
                       AND F.ENO_NO = H.ENO_NO(+)
                       AND F.EDU_YY = H.STR_YY(+)
                       AND F.ENO_NO = ?
                       [1]
                    )
          ORDER BY EDU_YY DESC
            ]]>
        </query>
    </sql>

    <!-- 개인별 연간 교육 현황 -->
    <sql name="EDUC040_SHR">
        <description>개인별 연간 교육 현황</description>
        <query>
            <![CDATA[
            SELECT
		      ENO_NO, EDU_CD, EDU_NM
		      , TO_CHAR(TO_DATE(STR_YMD,'YYYYMMDD'),'YYYY-MM-DD') STR_YMD
		      , TO_CHAR(TO_DATE(END_YMD,'YYYYMMDD'),'YYYY-MM-DD') END_YMD
		      , EDU_TAG
		      ,CASE WHEN '01' BETWEEN TO_CHAR(TO_DATE(STR_YMD,'YYYYMMDD'),'MM') AND TO_CHAR(TO_DATE(END_YMD,'YYYYMMDD'),'MM') THEN 'Y' ELSE 'N' END M1
		      ,CASE WHEN '02' BETWEEN TO_CHAR(TO_DATE(STR_YMD,'YYYYMMDD'),'MM') AND TO_CHAR(TO_DATE(END_YMD,'YYYYMMDD'),'MM') THEN 'Y' ELSE 'N' END M2
		      ,CASE WHEN '03' BETWEEN TO_CHAR(TO_DATE(STR_YMD,'YYYYMMDD'),'MM') AND TO_CHAR(TO_DATE(END_YMD,'YYYYMMDD'),'MM') THEN 'Y' ELSE 'N' END M3
		      ,CASE WHEN '04' BETWEEN TO_CHAR(TO_DATE(STR_YMD,'YYYYMMDD'),'MM') AND TO_CHAR(TO_DATE(END_YMD,'YYYYMMDD'),'MM') THEN 'Y' ELSE 'N' END M4
		      ,CASE WHEN '05' BETWEEN TO_CHAR(TO_DATE(STR_YMD,'YYYYMMDD'),'MM') AND TO_CHAR(TO_DATE(END_YMD,'YYYYMMDD'),'MM') THEN 'Y' ELSE 'N' END M5
		      ,CASE WHEN '06' BETWEEN TO_CHAR(TO_DATE(STR_YMD,'YYYYMMDD'),'MM') AND TO_CHAR(TO_DATE(END_YMD,'YYYYMMDD'),'MM') THEN 'Y' ELSE 'N' END M6
		      ,CASE WHEN '07' BETWEEN TO_CHAR(TO_DATE(STR_YMD,'YYYYMMDD'),'MM') AND TO_CHAR(TO_DATE(END_YMD,'YYYYMMDD'),'MM') THEN 'Y' ELSE 'N' END M7
		      ,CASE WHEN '08' BETWEEN TO_CHAR(TO_DATE(STR_YMD,'YYYYMMDD'),'MM') AND TO_CHAR(TO_DATE(END_YMD,'YYYYMMDD'),'MM') THEN 'Y' ELSE 'N' END M8
		      ,CASE WHEN '09' BETWEEN TO_CHAR(TO_DATE(STR_YMD,'YYYYMMDD'),'MM') AND TO_CHAR(TO_DATE(END_YMD,'YYYYMMDD'),'MM') THEN 'Y' ELSE 'N' END M9
		      ,CASE WHEN '10' BETWEEN TO_CHAR(TO_DATE(STR_YMD,'YYYYMMDD'),'MM') AND TO_CHAR(TO_DATE(END_YMD,'YYYYMMDD'),'MM') THEN 'Y' ELSE 'N' END M10
		      ,CASE WHEN '11' BETWEEN TO_CHAR(TO_DATE(STR_YMD,'YYYYMMDD'),'MM') AND TO_CHAR(TO_DATE(END_YMD,'YYYYMMDD'),'MM') THEN 'Y' ELSE 'N' END M11
		      ,CASE WHEN '12' BETWEEN TO_CHAR(TO_DATE(STR_YMD,'YYYYMMDD'),'MM') AND TO_CHAR(TO_DATE(END_YMD,'YYYYMMDD'),'MM') THEN 'Y' ELSE 'N' END M12
		  FROM ASNHR.T_CM_EDUCATION
		  WHERE ENO_NO = ?
		    AND STR_YMD LIKE ?||'%'
		  ORDER BY STR_YMD
            ]]>
        </query>
    </sql>

    <!-- 근태휴일날짜 조회 -->
    <sql name="EDUC050_SHR">
        <description>근태휴일날짜 조회</description>
        <query>
            <![CDATA[
            SELECT A.DD                                                         DAY_VAL   --ROWNUM        >> EDUC050_SHR
                  ,DECODE(B.HOL_GBN,0,'평일',1,'토요일',2,'휴일',3,'특별휴일')  HOL_GUB
                  ,B."REMARK"                                                   REMARK_VAL
                  ,B.REG_YMD                                                    REG_YMD
                  ,A.WK                                                         WK
                  ,C.CNT                                                        CNT
                  ,DECODE(B.HOL_GBN,0,'BLACK',1,'BLUE',2,'RED',3,'RED','BLACK') COLOR_VAL
             FROM (SELECT TO_CHAR(TO_DATE( ? ||TO_CHAR(ROWNUM),'YYYYMMDD'), 'D') WK
                         ,TO_CHAR(TO_DATE( ? ||TO_CHAR(ROWNUM),'YYYYMMDD'),'YYYYMMDD') DT
                         ,TO_NUMBER(TO_CHAR(ROWNUM,'00')) DD
                   FROM   DICT
                   WHERE  ROWNUM BETWEEN 1 AND TO_CHAR(LAST_DAY(TO_DATE( ?  ,'YYYYMM')),'DD')
                  ) A,
                   T_DI_HOLIDAY B ,
                  (SELECT COUNT(*) CNT
                   FROM  (SELECT SUM(DECODE(DAY,'1',ROWNUM)) SUN,
                                 SUM(DECODE(DAY,'2',ROWNUM)) MON,
                                 SUM(DECODE(DAY,'3',ROWNUM)) TUE,
                                 SUM(DECODE(DAY,'4',ROWNUM)) WEN,
                                 SUM(DECODE(DAY,'5',ROWNUM)) THR,
                                 SUM(DECODE(DAY,'6',ROWNUM)) FRI,
                                 SUM(DECODE(DAY,'7',ROWNUM)) SAT
                          FROM  (SELECT ROWNUM-TO_CHAR(TO_DATE(?||TO_CHAR(ROWNUM),'YYYYMMDD'),'D') WEEK,
                                        TO_CHAR(TO_DATE(?||TO_CHAR(ROWNUM),'YYYYMMDD'),'D') DAY,
                                       (TO_CHAR(ROWNUM,'00'))
                                 FROM   DICT
                                 WHERE  ROWNUM BETWEEN 1 AND TO_CHAR(LAST_DAY(TO_DATE(?||'02','YYYYMMDD')),'DD')
                                )
                                 GROUP BY WEEK
                         )
                  ) C
             WHERE  A.DT = B.REG_YMD(+)
            ]]>
        </query>
    </sql>

    <!-- 일괄처리된 년도 조회 -->
    <sql name="EDUC050_SHR_01">
        <description>일괄처리된 년도 조회</description>
        <query>
            <![CDATA[
            SELECT SUBSTR(REG_YMD,'1','4') REG_YMD
			  FROM T_DI_HOLIDAY
            GROUP BY SUBSTR(REG_YMD,'1','4')
			ORDER BY REG_YMD DESC
            ]]>
        </query>
    </sql>


    <!-- 월별근태내역  조회 -->
    <sql name="EDUC050_SHR_02">
        <description>월별근태내역</description>
        <query>
            <![CDATA[
			SELECT ENO_NO,	-- 사번
				   ENO_NM,  -- 성명
				   LV,      -- 날짜
				   COL_NEW  -- 과정명
			FROM (
			SELECT ENO_NO, ASNHR.SF_GET_ENOname('01',ENO_NO) ENO_NM, LV
				, CASE WHEN LV BETWEEN TO_CHAR(TO_DATE(STR_YMD,'YYYYMMDD'),'DD') AND TO_CHAR(TO_DATE(END_YMD,'YYYYMMDD'),'DD')
					THEN EDU_NM ELSE 'N'
				END COL_NEW
			FROM
				(SELECT ENO_NO, EDU_NM
				, CASE WHEN STR_YMD < TO_CHAR(TO_DATE(?||?||'01','YYYYMMDD'),'YYYYMMDD')
				THEN TO_CHAR(TO_DATE(?||?||'01','YYYYMMDD'),'YYYYMMDD')
				ELSE STR_YMD
				END STR_YMD
				, CASE WHEN END_YMD > TO_CHAR(LAST_DAY(TO_DATE(?||?,'YYYYMM')),'YYYYMMDD')
				THEN TO_CHAR(LAST_DAY(TO_DATE(?||?,'YYYYMM')),'YYYYMMDD')
				ELSE END_YMD
				END END_YMD
				FROM ASNHR.T_CM_EDUCATION
				WHERE STR_YMD LIKE ?||?||'%'
				  AND ENO_NO = ?
				)  , (SELECT LEVEL LV FROM DUAL CONNECT BY LEVEL <= 31)
			)
			WHERE COL_NEW != 'N'
		ORDER BY LV
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUD010
* @description : 학습제도가이드
***********************************************************************
* 2007/02/12      박인이        최초작성.
***********************************************************************
-->
    <!-- 로그인사번의 교육권한 조회 -->
    <sql name="EDUD010_SHR_00">
        <description>로그인사번의 교육권한 조회</description>
        <query>
            <![CDATA[
            SELECT EDU_AUTHO,    -- 교육권한
                   CET_NO        -- 주민번호
            FROM   ASNHR.T_CM_EMPLIST
            WHERE  GUBUN  = '01'
            AND    ENO_NO = ?
            ]]>
        </query>
    </sql>

    <!-- 학습제도가이드 데이터 총 갯수 -->
    <sql name="EDUD010_SHR_INFO">
        <description>로그인사번의 교육권한 조회</description>
        <query>
            <![CDATA[
              SELECT COUNT(*) AS TOTAL_CNT
              FROM   ASNHR.T_ED_BOARD
              WHERE  BBS_GBN = ?
              [1]                                                                      -- 검색조건
            ]]>
        </query>
    </sql>



    <!-- 학습제도가이드 데이터 조회 (EDUD020, EDUE010 공통으로 사용) -->
    <sql name="EDUD010_SHR">
        <description>학습제도가이드 조회</description>
        <query>
            <![CDATA[

            SELECT *
              FROM (SELECT A.ROWNM
                         , A.BBS_GBN
                         , A.SEQ_NO
                         , A.REF_NO
                         , A.STEP_NO
                         , A.DEPT_NO
                         , LPAD('RE:', 4*(A.DEPT_NO)) || A.SUBJECT_TAG      AS SUBJECT_TAG      -- 제목
                         , A.CONTENT_TXT
                         , A.FILE_YN
                         , TO_CHAR(A.UPT_YMD, 'YYYY/MM/DD')                 AS UPT_YMD
                         , B.ENO_NO
                         , B.ENO_NM
                         , B.DPT_CD
                         , B.DPT_NM
                         , B.JOB_CD
                         , B.JOB_NM
                      FROM (SELECT ROW_NUMBER() OVER(ORDER BY REF_NO DESC

                                                            , STEP_NO
                                                            , SEQ_NO
                                                     )     AS ROWNM                                 -- 순번
                                 , BBS_GBN                                                          -- 게시판구분
                                 , SEQ_NO                                                           -- 게시판순번
                                 , REF_NO                                                           -- 참조글번호
                                 , STEP_NO                                                          -- 단계
                                 , DEPT_NO                                                          -- 깊이
                                 , ENO_NO                                                           -- 등록자사번
                                 , SUBJECT_TAG                                                      -- 제목
                                 , CONTENT_TXT                                                      -- 내용
                                 , DECODE(SRCFILE1_NM, NULL, 0, 1)                                  -- 원본파일명1
                                    + DECODE(SRCFILE2_NM, NULL, 0, 1)                               -- 원본파일명2
                                    + DECODE(SRCFILE3_NM, NULL, 0, 1)                               -- 원본파일명3
                                    + DECODE(SRCFILE4_NM, NULL, 0, 1)                               -- 원본파일명4
                                    + DECODE(SRCFILE5_NM, NULL, 0, 1)       AS FILE_YN              -- 원본파일명5
                                 , UPT_YMD                                                          -- 등록일자
                              FROM ASNHR.T_ED_BOARD
                             WHERE BBS_GBN = ?
                               [1]                                                                  -- 검색조건
                            ) A
                         , ASNHR.VI_T_CM_PERSON2 B
                     WHERE A.ENO_NO = B.ENO_NO
                  ORDER BY A.ROWNM
                     )
             WHERE ROWNM >= ?                                                             -- 시작
               AND ROWNM <= ?                                                             -- 종료
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUD011
* @description : 학습제도가이드 등록/수정
***********************************************************************
* 2007/02/12      박인이        최초작성.
***********************************************************************
-->
    <!-- 학습제도가이드 데이터 조회 (EDUD021, EDUE011 공통으로 사용) -->
    <sql name="EDUD011_SHR">
        <description>학습제도가이드 조회</description>
        <query>
            <![CDATA[
            SELECT BBS_GBN,                                                                 -- 게시판구분
                   SEQ_NO,                                                                  -- 순번
                   REF_NO,                                                                  -- 참조글번호
                   STEP_NO,                                                                 -- 단계
                   DEPT_NO,                                                                 -- 깊이
                   ENO_NO,                                                                  -- 등록자사번
                   SF_GET_ENOname('01', ENO_NO)                         AS ENO_NM,          -- 등록자
                   SUBJECT_TAG,                                                             -- 제목
                   CONTENT_TXT,                                                             -- 내용
                   DECODE(SRCFILE1_NM, NULL, NULL, SRCFILE1_NM)         AS SRCFILE1_NM,     -- 원본파일명1
                   TGTFILE1_NM,                                                             -- 등록파일명1
                   DECODE(SRCFILE2_NM, NULL, NULL, SRCFILE2_NM)         AS SRCFILE2_NM,     -- 원본파일명2
                   TGTFILE2_NM,                                                             -- 등록파일명2
                   DECODE(SRCFILE3_NM, NULL, NULL, SRCFILE3_NM)         AS SRCFILE3_NM,     -- 원본파일명3
                   TGTFILE3_NM,                                                             -- 등록파일명3
                   DECODE(SRCFILE4_NM, NULL, NULL, SRCFILE4_NM)         AS SRCFILE4_NM,     -- 원본파일명4
                   TGTFILE4_NM,                                                             -- 등록파일명4
                   DECODE(SRCFILE5_NM, NULL, NULL, SRCFILE5_NM)         AS SRCFILE5_NM,     -- 원본파일명5
                   TGTFILE5_NM,                                                             -- 등록파일명5
                   TO_CHAR(UPT_YMD, 'YYYY-MM-DD HH24:MI:SS')            AS UPT_YMD,         -- 등록일시
                   ''  CHK,
                   NVL((SELECT COUNT(*)
                          FROM ASNHR.T_ED_BOARD
                         WHERE REF_NO = BOARD.REF_NO
                           AND BBS_GBN = BOARD.BBS_GBN
                           AND STEP_NO = BOARD.STEP_NO+1
                           AND DEPT_NO = BOARD.DEPT_NO+1), 0) AS IS_RE                      --참조글에 댓글이 달려있는지 여부 0 없음, 1 있음
            FROM   ASNHR.T_ED_BOARD BOARD
            WHERE  BBS_GBN = ?
            AND    SEQ_NO  = ?
            ]]>
        </query>
    </sql>

    <!-- 학습제도가이드 파일관련 데이터 조회 (EDUD021, EDUE011 공통으로 사용) -->
    <sql name="EDUD011_SHR_01">
        <description>학습제도가이드 파일관련 조회</description>
        <query>
            <![CDATA[
            SELECT SEQ,
                   FILE_name,
                   FILE_URL
            FROM ( SELECT 1                      AS  SEQ,
                          SRCFILE1_NM            AS  FILE_name,                     -- 원본파일명1
                          TGTFILE1_NM            AS  FILE_URL                       -- 등록파일명1
                   FROM   ASNHR.T_ED_BOARD
                   WHERE  BBS_GBN = ?
                   AND    SEQ_NO  = ?
                   UNION ALL
                   SELECT 2                      AS  SEQ,
                          SRCFILE2_NM            AS  FILE_name,                     -- 원본파일명2
                          TGTFILE2_NM            AS  FILE_URL                       -- 등록파일명2
                   FROM   ASNHR.T_ED_BOARD
                   WHERE  BBS_GBN = ?
                   AND    SEQ_NO  = ?
                   UNION ALL
                   SELECT 3                      AS  SEQ,
                          SRCFILE3_NM            AS  FILE_name,                     -- 원본파일명3
                          TGTFILE3_NM            AS  FILE_URL                       -- 등록파일명3
                   FROM   ASNHR.T_ED_BOARD
                   WHERE  BBS_GBN = ?
                   AND    SEQ_NO  = ?
                   UNION ALL
                   SELECT 4                      AS  SEQ,
                          SRCFILE4_NM            AS  FILE_name,                     -- 원본파일명4
                          TGTFILE4_NM            AS  FILE_URL                       -- 등록파일명4
                   FROM   ASNHR.T_ED_BOARD
                   WHERE  BBS_GBN = ?
                   AND    SEQ_NO  = ?
                   UNION ALL
                   SELECT 5                      AS  SEQ,
                          SRCFILE5_NM            AS  FILE_name,                     -- 원본파일명5
                          TGTFILE5_NM            AS  FILE_URL                       -- 등록파일명5
                   FROM   ASNHR.T_ED_BOARD
                   WHERE  BBS_GBN = ?
                   AND    SEQ_NO  = ?
                 )
            WHERE  FILE_name IS NOT NULL
            ]]>
        </query>
    </sql>

    <!-- 학습제도가이드 데이터 생성 (EDUD021, EDUE011 공통으로 사용) -->
    <sql name="EDUD011_INS">
        <description>학습제도가이드 생성</description>
        <query>
            <![CDATA[
            INSERT
              INTO ASNHR.T_ED_BOARD
                 ( BBS_GBN
                 , SEQ_NO
                 , REF_NO
                 , STEP_NO
                 , DEPT_NO
                 , ENO_NO
                 , SUBJECT_TAG
                 , CONTENT_TXT
                 , SRCFILE1_NM
                 , TGTFILE1_NM
                 , SRCFILE2_NM
                 , TGTFILE2_NM
                 , SRCFILE3_NM
                 , TGTFILE3_NM
                 , SRCFILE4_NM
                 , TGTFILE4_NM
                 , SRCFILE5_NM
                 , TGTFILE5_NM
                 , IPT_MAN
                 , IPT_YMD
                 , UPT_MAN
                 , UPT_YMD )
          VALUES ( ?
                 , NVL((SELECT MAX(SEQ_NO) + 1
                          FROM ASNHR.T_ED_BOARD
                         WHERE BBS_GBN = ?
                        ), 1)
                 , NVL((SELECT MAX(REF_NO) + 1
                          FROM ASNHR.T_ED_BOARD
                         WHERE BBS_GBN = ?
                        ), 1)
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , SYSDATE
                 , ?
                 , SYSDATE )
            ]]>
        </query>
    </sql>

    <!-- 학습제도가이드 데이터 수정 (EDUD021, EDUE011 공통으로 사용) -->
    <sql name="EDUD011_UPT">
        <description>학습제도가이드 수정</description>
        <query>
            <![CDATA[
            UPDATE ASNHR.T_ED_BOARD
            SET    REF_NO      = ?,
                   STEP_NO     = ?,
                   DEPT_NO     = ?,
                   ENO_NO      = ?,
                   SUBJECT_TAG = ?,
                   CONTENT_TXT = ?,
                   SRCFILE1_NM = ?,
                   TGTFILE1_NM = ?,
                   SRCFILE2_NM = ?,
                   TGTFILE2_NM = ?,
                   SRCFILE3_NM = ?,
                   TGTFILE3_NM = ?,
                   SRCFILE4_NM = ?,
                   TGTFILE4_NM = ?,
                   SRCFILE5_NM = ?,
                   TGTFILE5_NM = ?,
                   UPT_MAN     = ?,
                   UPT_YMD     = SYSDATE
            WHERE  BBS_GBN     = ?
            AND    SEQ_NO      = ?
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUD012
* @description : 학습제도가이드 내용
***********************************************************************
* 2007/02/12      박인이        최초작성.
***********************************************************************
-->

    <!-- 학습제도가이드 데이터 삭제 (EDUD022, EDUE012 공통으로 사용) -->
    <sql name="EDUD012_DEL">
        <description>학습제도가이드 삭제</description>
        <query>
            <![CDATA[
            DELETE FROM ASNHR.T_ED_BOARD
            WHERE  BBS_GBN     = ?
            AND    SEQ_NO      = ?
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUD020
* @description : 묻고답하기
***********************************************************************
* 2007/02/15      박인이        최초작성.
***********************************************************************
-->
    <!-- EDUD010의 내용과 동일하므로 EDUD010의 sql문을 그대로 사용한다. -->

<!--
***********************************************************************
* @USECASE     : EDUD021
* @description : 묻고답하기 등록/수정/답변
***********************************************************************
* 2007/02/15      박인이        최초작성.
***********************************************************************
-->
    <!-- EDUD011의 내용과 동일하므로 EDUD011의 sql문을 그대로 사용한다. -->

    <!-- 묻고답하기 답변 데이터 생성 -->
    <sql name="EDUD021_INS_01">
        <description>묻고답하기 답변 생성</description>
        <query>
            <![CDATA[
            INSERT
              INTO ASNHR.T_ED_BOARD
                 ( BBS_GBN
                 , SEQ_NO
                 , REF_NO
                 , STEP_NO
                 , DEPT_NO
                 , ENO_NO
                 , SUBJECT_TAG
                 , CONTENT_TXT
                 , SRCFILE1_NM
                 , TGTFILE1_NM
                 , SRCFILE2_NM
                 , TGTFILE2_NM
                 , SRCFILE3_NM
                 , TGTFILE3_NM
                 , SRCFILE4_NM
                 , TGTFILE4_NM
                 , SRCFILE5_NM
                 , TGTFILE5_NM
                 , IPT_MAN
                 , IPT_YMD
                 , UPT_MAN
                 , UPT_YMD )
          VALUES ( ?
                 , NVL((SELECT MAX(SEQ_NO) + 1
                          FROM ASNHR.T_ED_BOARD
                         WHERE BBS_GBN = ?
                        ), 1)
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , SYSDATE
                 , ?
                 , SYSDATE )
            ]]>
        </query>
    </sql>

    <!-- 학습제도가이드 데이터 답변에 관련된 참조글목록의 단계 값을 UPDATE -->
    <!-- 답변 자신의 STEP_NO는 참조글의 STEP_NO + 1를 한 값이고,
         답변 자신의 STEP_NO보다 큰 해당 참조글목록의 STEP_NO 에 대해 + 1를 더한다.
         참조 : 답변 자신의 STEP_NO에 대해 INSERT하기 전에 아래 내용을 먼저 UPDATE
     -->
    <sql name="EDUD021_UPT_01">
        <description>묻고답하기 답변외의 같은참조글목록의 단계 값 수정</description>
        <query>
            <![CDATA[
            UPDATE ASNHR.T_ED_BOARD
            SET    STEP_NO     = DECODE(STEP_NO, 0, 0, STEP_NO + 1)
            WHERE  BBS_GBN     = ?
            AND    REF_NO      = ?
            AND  ( STEP_NO     >= ?
            OR     STEP_NO     = 0 )
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUD022
* @description : 묻고답하기 내용
***********************************************************************
* 2007/02/15      박인이        최초작성.
***********************************************************************
-->
    <!-- EDUD012의 내용과 동일하므로 EDUD010의 sql문을 그대로 사용한다. -->

<!--
***********************************************************************
* @USECASE     : EDUE010
* @description : 공지사항
***********************************************************************
* 2007/02/15      박인이        최초작성.
***********************************************************************
-->
    <!-- EDUD010의 내용과 동일하므로 EDUD010의 sql문을 그대로 사용한다. -->

<!--
***********************************************************************
* @USECASE     : EDUE011
* @description : 공지사항 등록/수정
***********************************************************************
* 2007/02/15      박인이        최초작성.
***********************************************************************
-->
    <!-- EDUD011의 내용과 동일하므로 EDUD011의 sql문을 그대로 사용한다. -->

<!--
***********************************************************************
* @USECASE     : EDUE012
* @description : 공지사항 내용
***********************************************************************
* 2007/02/15      박인이        최초작성.
***********************************************************************
-->
    <!-- EDUD012의 내용과 동일하므로 EDUD010의 sql문을 그대로 사용한다. -->


<!--
***********************************************************************
* @USECASE     : EDUE020
* @description : 과정개설요청서
***********************************************************************
* 2007/02/27      박인이        최초작성.
***********************************************************************
-->
    <!-- 로그인사번의 교육권한 조회 -->
    <sql name="EDUE020_SHR_00">
        <description>로그인사번의 교육권한 조회</description>
        <query>
            <![CDATA[
            SELECT EDU_AUTHO,    -- 교육권한
                   CET_NO        -- 주민번호
            FROM   ASNHR.T_CM_EMPLIST
            WHERE  GUBUN  = '01'
            AND    ENO_NO = ?
            ]]>
        </query>
    </sql>

    <!-- 과정개설요청서 데이터 조회 -->
    <sql name="EDUE020_SHR_01">
        <description>과정개설요청서 데이터 조회</description>
        <query>
            <![CDATA[
            SELECT A.ORD_NO,
                   A.ENO_NO,                                                                       -- 사번
                   ASNHR.SF_GET_ENOname('01', A.ENO_NO)                                AS ENO_NM,        -- 성명
                   B.DPT_CD,
                   ASNHR.SF_GET_DPTname('01', 'A4', B.DPT_CD)                          AS DPT_NM,        -- 부서
                   B.JOB_CD,
                   ASNHR.SF_GET_COMMname('01', 'A2', B.JOB_CD)                         AS JOB_NM,        -- 직위
                   B.CET_NO,                                                                       -- 주민번호
                   TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')   AS EDU_STR_YMD,   -- 교육시작일
                   TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')   AS EDU_END_YMD,   -- 교육종료일
                   A.EDU_TXT,                                                                      -- 과정명
                   A.CHASU_TXT,                                                                    -- 차수명
                   A.EDU_GBN_CD,                                                                   -- 구분코드
                   ASNHR.SF_GET_COMMname('01', 'Q9', A.EDU_GBN_CD)                     AS EDU_GBN_NM,    -- 구분명
                   A.EDU_GBN_TXT,                                                                  -- 교육기관
                   A.PLACE_TXT,                                                                    -- 교육장소
                   A.FIX_NO,
                   A.GOAL_TXT,                                                                     -- 교육목적
                   A.CONTENT_TXT,                                                                  -- 교육내용
                   A.OBJ_TAG,                                                                      -- 교육대상
                   A.EFFECT_TAG,                                                                   -- 교육효과
                   A.CPT_TAG,                                                                      -- 수료기준
                   A.SITE_TAG,                                                                     -- 참고사이트
                   A.COST_AMT,                                                                     -- 소요비용
                   A.INS_YN,                                                                       -- 고용보험환급여부
                   ASNHR.SF_GET_COMMname('01', 'QA', A.INS_YN)                         AS INS_NM,        -- 고용보험환급여부
                   (A.COST_AMT - A.RTN_AMT) * A.FIX_NO                           AS SUM_AMT,       -- 총액
                   A.RTN_AMT,                                                                      -- 환급예상액
                   A.STS_GBN                                                                      -- 처리상황
            FROM   ASNHR.T_ED_OPENRQST A,
                   ASNHR.T_CM_EMPLIST B
            WHERE  A.ENO_NO      = B.ENO_NO
            [1]
            ORDER BY ORD_NO DESC
            ]]>
        </query>
    </sql>

    <!-- 과정개설요청서 데이터 생성 -->
    <sql name="EDUE020_INS">
        <description>과정개설요청서 생성</description>
        <query>
            <![CDATA[
            INSERT INTO ASNHR.T_ED_OPENRQST
                  (ORD_NO,
                   ENO_NO,      EDU_TXT,     EDU_GBN_CD,  EDU_STR_YMD, EDU_END_YMD, GOAL_TXT,
                   EDU_GBN_TXT, PLACE_TXT,   CONTENT_TXT, COST_AMT,    FIX_NO,      INS_YN,
                   RTN_AMT,     STS_GBN,     IPT_MAN,     IPT_YMD,     UPT_MAN,     UPT_YMD,
                   OBJ_TAG,		SITE_TAG,	 EFFECT_TAG,  CPT_TAG
                  )
            VALUES
                  ((SELECT TO_CHAR(SYSDATE,'YYYY')||LPAD(NVL(SUBSTR(MAX(ORD_NO),5,3),0) + 1, 3, '0') FROM ASNHR.T_ED_OPENRQST WHERE ORD_NO LIKE TO_CHAR(SYSDATE,'YYYY')||'%'),
                   ?,           ?,           ?,           ?,           ?,           ?,
                   ?,           ?,           ?,           ?,           ?,           ?,
                   ?,           ?,           ?,           SYSDATE,     ?,           SYSDATE,
                   ?, 			?,			 ?,			  ?
                  )
            ]]>
        </query>
    </sql>

    <!-- 개설 요청중인 과정에 요청자 입력 -->
    <sql name="EDUE020_INS_OBJT">
        <description>개설 요청중인 과정에 요청자 입력</description>
        <query>
            <![CDATA[
            INSERT INTO ASNHR.T_ED_RQSTOBJTLIST (
			   ORD_NO, ENO_NO, DPT_CD,
			   JOB_CD, IPT_MAN, IPT_YMD, UPT_MAN, UPT_YMD)
			VALUES ( (SELECT MAX(ORD_NO) FROM ASNHR.T_ED_OPENRQST WHERE ENO_NO=?), ?, ?,
			    ?, ?, SYSDATE, ?, SYSDATE)
            ]]>
        </query>
    </sql>

    <!-- 과정개설요청서 데이터 수정 -->
    <sql name="EDUE020_UPT">
        <description>과정개설요청서 수정</description>
        <query>
            <![CDATA[
            UPDATE ASNHR.T_ED_OPENRQST
            SET    EDU_TXT     = ?,
                   CHASU_TXT   = ?,
                   EDU_GBN_CD  = ?,
                   EDU_STR_YMD = ?,
                   EDU_END_YMD = ?,
                   GOAL_TXT    = ?,
                   EDU_GBN_TXT = ?,
                   PLACE_TXT   = ?,
                   CONTENT_TXT = ?,
                   COST_AMT    = ?,
                   FIX_NO      = ?,
                   INS_YN      = ?,
                   RTN_AMT     = ?,
                   UPT_MAN     = ?,
                   UPT_YMD     = SYSDATE,
                   OBJ_TAG     = ?,
                   SITE_TAG	   = ?,
                   EFFECT_TAG  = ?,
                   CPT_TAG	   = ?
            WHERE  ORD_NO = ?
            AND    ENO_NO = ?
            ]]>
        </query>
    </sql>
    <!-- 과정개설요청서 상태 수정 -->
    <sql name="EDUE020_UPT_00">
        <description>과정개설요청서 수정</description>
        <query>
            <![CDATA[
            UPDATE ASNHR.T_ED_OPENRQST
            SET    STS_GBN     = ?,
                   UPT_MAN     = ?,
                   UPT_YMD     = SYSDATE
            WHERE  ORD_NO = ?
            ]]>
        </query>
    </sql>

    <!-- 과정개설요청서 데이터 삭제 -->
    <sql name="EDUE020_DEL">
        <description>과정개설요청서 삭제</description>
        <query>
            <![CDATA[
            DELETE FROM ASNHR.T_ED_OPENRQST
            WHERE  ORD_NO = ?
            AND    ENO_NO = ?
            ]]>
        </query>
    </sql>

    <!-- 결재지정 정보를 저장 한다. -->
    <sql name="EDUE021_APP_TEMP_INS">
        <description>대기자 임시 결재선 정보 저장</description>
        <query>
            <![CDATA[
             INSERT  INTO ASNHR.T_ED_APPROVAL_TEMP
                    (GUN_YMD, GUN_GBN, GUN_DPT, SEQ_NO, ENO_NO, JOB_CD, PENO_NO, IPT_MAN, IPT_YMD, UPT_MAN, UPT_YMD, REQ_NO)
             VALUES (      ?,       ?,       ?,      ?,      ?,      ?,       ?,       ?, SYSDATE,       ?, SYSDATE, ?)
            ]]>
        </query>
    </sql>

    <sql name="EDUE021_APP_TEMP_SHR">
        <description>대기자 결재선 정보 조회</description>
        <query>
            <![CDATA[

       SELECT GUN_YMD, GUN_GBN, GUN_DPT AS DPT_CD, SEQ_NO, ENO_NO, JOB_CD, APP_TIME, PENO_NO
             ,APP_YN
             ,DECODE(APP_YN,NULL,'미결','Y','승인','N','부결') AS APP_YN_NM
             ,ASNHR.SF_GET_ENOname('01', ENO_NO) AS ENO_NM
             ,ASNHR.SF_GET_COMMname('01', 'A2', JOB_CD) AS JOB_NM
			 ,ASNHR.SF_GET_DPTname('01', 'A4', GUN_DPT) AS DPT_NM
			 ,REQ_NO
       FROM   ASNHR.T_ED_APPROVAL_TEMP
       WHERE  REQ_NO = ?
         AND PENO_NO = ?
       AND    GUN_GBN = 'M'
            ]]>
        </query>
    </sql>

    <!-- 개설요청된 과정 정보 -->
    <sql name="EDUE021_SHR_00">
        <description>과정개설요청중인 과정 상세정보</description>
        <query>
            <![CDATA[
            SELECT A.ORD_NO,
                   A.ENO_NO,                                                                       -- 사번
                   ASNHR.SF_GET_ENOname('01', A.ENO_NO)                                AS ENO_NM,        -- 성명
                   ASNHR.SF_GET_DPTname('01', 'A4', B.DPT_CD)                          AS DPT_NM,        -- 부서
                   ASNHR.SF_GET_COMMname('01', 'A2', B.JOB_CD)                         AS JOB_NM,        -- 직위
                   B.CET_NO,                                                                       -- 주민번호
                   TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')   AS EDU_STR_YMD,   -- 교육시작일
                   TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')   AS EDU_END_YMD,   -- 교육종료일
                   A.EDU_TXT,                                                                      -- 과정명
                   A.CHASU_TXT,                                                                    -- 차수명
                   A.EDU_GBN_CD,                                                                   -- 구분코드
                   ASNHR.SF_GET_COMMname('01', 'Q9', A.EDU_GBN_CD)                     AS EDU_GBN_NM,    -- 구분명
                   A.EDU_GBN_TXT,                                                                  -- 교육기관
                   A.PLACE_TXT,                                                                    -- 교육장소
                   A.FIX_NO,
                   A.GOAL_TXT,                                                                     -- 교육목적
                   A.CONTENT_TXT,                                                                  -- 교육내용
                   A.COST_AMT,                                                                     -- 소요비용
                   A.INS_YN,                                                                       -- 고용보험환급여부
                   ASNHR.SF_GET_COMMname('01', 'QA', A.INS_YN)                         AS INS_NM,        -- 고용보험환급여부
                   (A.COST_AMT - A.RTN_AMT) * A.FIX_NO                           AS SUM_AMT,       -- 총액
                   A.RTN_AMT,                                                                      -- 환급예상액
                   A.STS_GBN                                                                      -- 처리상황
                   , DECODE( (SELECT COUNT(*)
                              FROM ASNHR.T_ED_RQSTOBJTLIST
                             WHERE ORD_NO = A.ORD_NO
                               AND ENO_NO = ?
                            ), 0, 'N', 'Y'
                           ) AS CHK_YN
                   ,(SELECT COUNT(*) FROM ASNHR.T_ED_RQSTOBJTLIST WHERE ORD_NO=A.ORD_NO) AS REQ_CNT
            FROM   ASNHR.T_ED_OPENRQST A,
                   ASNHR.T_CM_EMPLIST B
            WHERE  A.ENO_NO      = B.ENO_NO
              AND A.ORD_NO = ?
            ]]>
        </query>
    </sql>

    <!-- 개설 요청중인 과정에 신청한 사람 목록 -->
    <sql name="EDUE021_SHR_01">
        <description>개설 요청중인 과정에 신청한 사람 목록</description>
        <query>
            <![CDATA[
            SELECT
			    A.ORD_NO
			    , A.EDU_TXT
			    , TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')   AS EDU_STR_YMD   -- 교육시작일
                , TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')   AS EDU_END_YMD   -- 교육종료일
			    , B.ENO_NO
			    , ASNHR.SF_GET_ENOname('01', B.ENO_NO)                                AS ENO_NM        -- 성명
			    , B.DPT_CD
                , ASNHR.SF_GET_DPTname('01', 'A4', B.DPT_CD)                          AS DPT_NM        -- 부서
			    , B.JOB_CD
                , ASNHR.SF_GET_COMMname('01', 'A2', B.JOB_CD)                         AS JOB_NM        -- 직위
			FROM ASNHR.T_ED_OPENRQST A, ASNHR.T_ED_RQSTOBJTLIST B
			WHERE A.ORD_NO = B.ORD_NO
			  AND A.ORD_NO = ?
            ]]>
        </query>
    </sql>

    <!-- 개설 요청중인 과정에 신청한 사람 입력 -->
    <sql name="EDUE021_INS">
        <description>개설 요청중인 과정에 신청한 사람 입력</description>
        <query>
            <![CDATA[
            INSERT INTO ASNHR.T_ED_RQSTOBJTLIST (
			   ORD_NO, ENO_NO, DPT_CD,
			   JOB_CD, IPT_MAN, IPT_YMD, UPT_MAN, UPT_YMD)
			VALUES ( ?, ?, ?,
			    ?, ?, SYSDATE, ?, SYSDATE)
            ]]>
        </query>
    </sql>

    <!-- 개설 요청중인 과정에 신청한 사람 삭제 -->
    <sql name="EDUE021_DEL">
        <description>개설 요청중인 과정에 신청한 사람 삭제</description>
        <query>
            <![CDATA[
            DELETE FROM ASNHR.T_ED_RQSTOBJTLIST
			WHERE ORD_NO = ?
			  AND ENO_NO = ?
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUE030
* @description : 현재모집과정
***********************************************************************
* 2007/02/21      박인이        최초작성.
***********************************************************************
-->
    <!-- 현재모집과정 데이터 조회 -->
    <sql name="EDUE030_SHR">
        <description>운영과정 조회</description>
        <query>
            <![CDATA[
            SELECT
                EDU_CD
                , EDU_NM
                , CONTENT_TXT   --교육내용
                , EFFECT_TAG        --기대효과
                , OBJ_TAG       --교육대상
                , CPT_TAG       --수료기준
                , INS_YN        --고용보험여부
                , ASNHR.SF_GET_COMMname('01', 'QA', INS_YN) AS INS_NM        -- 고용보험환급여부
                , EDU_GBN_CD 	--교육구분
                , ASNHR.SF_GET_COMMname('01', 'Q6', EDU_GBN_CD) AS EDU_GBN_NM    -- 구분명
                , MNGER_CD      --교육주관
                , FIELD_CD      --교육분야
                , SHAPE_CD      --교육형태
                , GOAL_TAG      --교육목표
                , ASNHR.SF_GET_COMMname('01', 'Q5', FIELD_CD) AS FIELD_NM
                , ASNHR.SF_GET_COMMname('01', 'Q8', SHAPE_CD) AS SHAPE_NM
				, ASNHR.SF_GET_COMMname('01', 'Q7', MNGER_CD) AS MNGER_NM
            FROM ASNHR.T_ED_COURSELIST
            WHERE USE_YN='Y'
              AND NVL(EDU_CD,' ') LIKE '%'||?||'%'
              AND NVL(FIELD_CD,' ') LIKE '%'||?||'%'
              AND NVL(SHAPE_CD,' ') LIKE '%'||?||'%'
            ORDER BY EDU_NM
            ]]>
        </query>
    </sql>



<!--
***********************************************************************
* @USECASE     : EDUE031
* @description : 사내강좌신청서
***********************************************************************
* 2007/02/23      박인이        최초작성.
***********************************************************************
-->
    <!-- 사원 개인이 신청한 해당 교육과정에 대한 사내강좌신청서 데이터 조회 -->
    <sql name="EDUE031_SHR">
        <description>(개인) 사내강좌신청서 조회</description>
        <query>
            <![CDATA[
            SELECT C.ENO_NO
                 , C.name                                                       AS ENO_NM
                 , A.COMM_NO
                 , C.DPT_CD
                 , ASNHR.SF_GET_DPTname('01','A4',C.DPT_CD) AS DPT_NM
                 , C.JOB_CD
                 , ASNHR.SF_GET_COMMname('01','A2',C.JOB_CD) AS JOB_NM
                 , C.CET_NO
                 , A.EDU_CD                                                                         -- 과정코드
                 , B.EDU_NM           -- 과정명
                 , A.SEQ_NO                                                                         -- SEQ번호
                 , TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')  AS EDU_STR_YMD      -- 학습시작일자
                 , TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')  AS EDU_END_YMD      -- 학습종료일자
                 , TO_CHAR(TO_DATE(B.STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')      AS STR_YMD          -- 등록일자
                 , TO_CHAR(TO_DATE(B.END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')      AS END_YMD          -- 폐기일자
                 , ASNHR.SF_GET_ENOname('01', B.ENO_NO) AS MAN_ENO_NM
                 , A.EDU_GBN_CD                                                                     -- 교육구분
                 , A.MNGER_CD                                                                       -- 교육주관
                 , A.FIELD_CD                                                                       -- 교육분야
                 , A.SHAPE_CD                                                                       -- 교육형태
                 , A.COST_CD                                                                        -- 비용부담
                 , A.PLACE_CD                                                                       -- 교육장소
                 , ASNHR.SF_GET_COMMname('01', 'Q6', A.EDU_GBN_CD ) AS EDU_GBN_NM
                 , ASNHR.SF_GET_COMMname('01', 'Q7', A.MNGER_CD   ) AS MNGER_NM
                 , ASNHR.SF_GET_COMMname('01', 'Q5', A.FIELD_CD   ) AS FIELD_NM
                 , ASNHR.SF_GET_COMMname('01', 'Q8', A.SHAPE_CD   ) AS SHAPE_NM
                 , ASNHR.SF_GET_COMMname('01', 'QB', A.COST_CD    ) AS COST_NM
                 , ASNHR.SF_GET_COMMname('01', 'Q9', A.PLACE_CD   ) AS PLACE_NM
                 , A.GOAL_TAG                                                                       -- 교육목표
                 , B.CONTENT_TXT                                                                    -- 교육내용
                 , B.EFFECT_TAG                                                                     -- 기대효과
                 , B.OBJ_TAG                                                                        -- 교육대상
                 , B.CPT_TAG                                                                        -- 수료기준
                 , A.INT_NAM                                                                        -- 교육기관
                 , A.FIX_NO                                                                         -- 교육정원
                 , A.DAY_NO                                                                         -- 교육일수
                 , A.TIME_NO                                                                        -- 교육시간
                 , A.COST_AMT                                                                       -- 교육비용
                 , A.RTN_AMT                                                                        -- 환급금액
                 , A.CPT_PNT                                                                        -- 이수점수
                 , A.SITE_TAG                                                                       -- 참고사이트
                 , DECODE( (SELECT COUNT(*)
                              FROM ASNHR.T_ED_OBJTLIST
                             WHERE ENO_NO = C.ENO_NO
                               AND EDU_CD = A.EDU_CD
                               AND SEQ_NO = A.SEQ_NO
                            ), 0, 'N', 'Y'
                           ) AS CHK_YN
                 , DECODE( (SELECT COUNT(*)
                              FROM ASNHR.T_ED_EXCEPTER
                             WHERE ENO_NO = C.ENO_NO
                               AND (TO_CHAR(SYSDATE, 'YYYYMMDD') BETWEEN STR_YMD AND END_YMD)
                            ), 0, 'N', 'Y'
                           ) AS IS_EXP                                                              -- 신청하려는 사번이 예외자인지 여부 검증
                 , (SELECT COUNT(*)
                      FROM ASNHR.T_ED_OBJTLIST
                     WHERE EDU_CD = A.EDU_CD
                       AND SEQ_NO = A.SEQ_NO
                    )   AS REQ_CNT                                                                  -- 신청인원
              FROM ASNHR.T_ED_CHASULIST A
                 , ASNHR.T_ED_COURSELIST B
                 , ASNHR.T_CM_EMPLIST C
             WHERE A.EDU_CD = ?
               AND A.SEQ_NO = ?
               AND A.EDU_CD = B.EDU_CD
               AND C.ENO_NO = ?

            ]]>
        </query>
    </sql>

    <!-- 사내강좌신청서 데이터 생성 -->
    <sql name="EDUE031_INS">
        <description>사내강좌신청서 생성</description>
        <query>
            <![CDATA[
            INSERT
              INTO ASNHR.T_ED_OBJTLIST
                 ( EDU_CD
                 , SEQ_NO
                 , REQ_GBN
                 , ENO_NO
                 , OCC_CD
                 , DPT_CD
                 , JOB_CD
                 , IPT_MAN
                 , IPT_YMD
                 , UPT_MAN
                 , UPT_YMD )
            SELECT ?
                 , ?
                 , 'P'
                 , ENO_NO
                 , OCC_CD
                 , DPT_CD
                 , JOB_CD
                 , ?
                 , SYSDATE
                 , ?
                 , SYSDATE
              FROM ASNHR.T_CM_EMPLIST
             WHERE ENO_NO = ?
            ]]>
        </query>
    </sql>

    <!-- 사내강좌신청서 데이터 삭제 -->
    <sql name="EDUE031_DEL">
        <description>사내강좌신청서 삭제</description>
        <query>
            <![CDATA[
            DELETE
              FROM ASNHR.T_CM_EDUCATION
             WHERE EDU_CD   = ?
               AND SEQ_NO   = ?
               AND ENO_NO   = ?
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : APPROVAL_REGNO_MAX
* @description : 사외교육신청서
***********************************************************************
* 2007/02/26      박인이        최초작성.
***********************************************************************
-->
	<sql name="APPROVAL_REGNO_MAX">
        <description>결재등록번호 최대값 조회</description>
        <query>
            <![CDATA[
			SELECT  TO_CHAR(SYSDATE,'YYYYMMDD')|| TRIM(TO_CHAR( DECODE( MAX(SUBSTR(REQ_NO, 9, 3)), NULL, '001', MAX(SUBSTR(REQ_NO, 9,3))+1 ), '000')) REQ_NO
			FROM    ASNHR.T_DI_APPROVAL
			WHERE   SUBSTR(REQ_NO,0,8) = TO_CHAR(SYSDATE,'YYYYMMDD')
			AND     SUBSTR(REQ_NO, 9, 1) NOT IN ('H','R','Z')
            ]]>
        </query>
    </sql>

    <!-- 결재지정 정보를 저장 한다. -->
    <sql name="APPROVAL_INS">
        <description>결재선 정보 저장</description>
        <query>
            <![CDATA[
             INSERT  INTO ASNHR.T_DI_APPROVAL
                    (GUN_YMD, GUN_GBN, GUN_DPT, SEQ_NO, ENO_NO, JOB_CD, PENO_NO, IPT_MAN, IPT_YMD, UPT_MAN, UPT_YMD, REQ_NO)
             VALUES (      ?,       ?,       ?,      ?,      ?,      ?,       ?,       ?, SYSDATE,       ?, SYSDATE, ?)
            ]]>
        </query>
    </sql>

    <sql name="APPROVAL_SHR">
        <description>수강신청 결재선 정보 조회</description>
        <query>
            <![CDATA[

       SELECT GUN_YMD, GUN_GBN, GUN_DPT AS DPT_CD, SEQ_NO, ENO_NO, JOB_CD, APP_TIME, PENO_NO
             ,APP_YN
             ,DECODE(APP_YN,NULL,'미결','Y','승인','N','부결') AS APP_YN_NM
             ,ASNHR.SF_GET_ENOname('01', ENO_NO) AS ENO_NM
             ,ASNHR.SF_GET_COMMname('01', 'A2', JOB_CD) AS JOB_NM
			 ,ASNHR.SF_GET_DPTname('01', 'A4', GUN_DPT) AS DPT_NM
			 ,REQ_NO
       FROM   ASNHR.T_DI_APPROVAL
       WHERE  REQ_NO = ?
       AND    GUN_GBN = 'M'
            ]]>
        </query>
    </sql>

    <sql name="RPT_APPROVAL_SHR">
        <description>교육결과보고 결재선 정보 조회</description>
        <query>
            <![CDATA[

       SELECT GUN_YMD, GUN_GBN, GUN_DPT AS DPT_CD, SEQ_NO, ENO_NO, JOB_CD, APP_TIME, PENO_NO
             ,APP_YN
             ,DECODE(APP_YN,NULL,'미결','Y','승인','N','부결') AS APP_YN_NM
             ,ASNHR.SF_GET_ENOname('01', ENO_NO) AS ENO_NM
             ,ASNHR.SF_GET_COMMname('01', 'A2', JOB_CD) AS JOB_NM
			 ,ASNHR.SF_GET_DPTname('01', 'A4', GUN_DPT) AS DPT_NM
			 ,REQ_NO
       FROM   ASNHR.T_DI_APPROVAL
       WHERE  REQ_NO = (SELECT RPT_REQ_NO FROM ASNHR.T_CM_EDUCATION WHERE ENO_NO = ? AND EDU_CD = ? AND SEQ_NO = ?)
       AND    GUN_GBN = 'N'
            ]]>
        </query>
    </sql>


    <!-- 사원 개인이 신청한 해당 교육과정에 대한 사외교육신청서 데이터 조회 -->
    <sql name="EDUE032_SHR_00">
        <description>(개인) 사외교육신청서 조회</description>
        <query>
            <![CDATA[
            SELECT A.EDU_CD                                                                         -- 과정코드
                 , B.EDU_NM           -- 과정명
                 , A.SEQ_NO                                                                         -- SEQ번호
                 , TO_CHAR(TO_DATE(A.ENT_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')  AS ENT_STR_YMD      -- 신청시작일자
                 , TO_CHAR(TO_DATE(A.ENT_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')  AS ENT_END_YMD      -- 신청종료일자
                 , TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')  AS EDU_STR_YMD      -- 학습시작일자
                 , TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')  AS EDU_END_YMD      -- 학습종료일자
                 , TO_CHAR(TO_DATE(B.STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')      AS STR_YMD          -- 등록일자
                 , TO_CHAR(TO_DATE(B.END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')      AS END_YMD          -- 폐기일자
                 , ASNHR.SF_GET_ENOname('01', B.ENO_NO) AS MAN_ENO_NM
                 , A.EDU_GBN_CD                                                                     -- 교육구분
                 , A.MNGER_CD                                                                       -- 교육주관
                 , A.FIELD_CD                                                                       -- 교육분야
                 , A.SHAPE_CD                                                                       -- 교육형태
                 , A.COST_CD                                                                        -- 비용부담
                 , A.PLACE_CD                                                                       -- 교육장소
                 , A.PLACE_TAG                                                                       -- 교육장소
                 , ASNHR.SF_GET_COMMname('01', 'Q6', A.EDU_GBN_CD ) AS EDU_GBN_NM
                 , ASNHR.SF_GET_COMMname('01', 'Q7', A.MNGER_CD   ) AS MNGER_NM
                 , ASNHR.SF_GET_COMMname('01', 'Q5', A.FIELD_CD   ) AS FIELD_NM
                 , ASNHR.SF_GET_COMMname('01', 'Q8', A.SHAPE_CD   ) AS SHAPE_NM
                 , ASNHR.SF_GET_COMMname('01', 'QB', A.COST_CD    ) AS COST_NM
                 , ASNHR.SF_GET_COMMname('01', 'Q9', A.PLACE_CD   ) AS PLACE_NM
                 , A.GOAL_TAG                                                                       -- 교육목표
                 , B.CONTENT_TXT                                                                    -- 교육내용
                 , B.EFFECT_TAG                                                                     -- 기대효과
                 , B.OBJ_TAG                                                                        -- 교육대상
                 , B.CPT_TAG                                                                        -- 수료기준
                 , A.INT_NAM                                                                        -- 교육기관
                 , A.FIX_NO                                                                         -- 교육정원
                 , A.DAY_NO                                                                         -- 교육일수
                 , A.TIME_NO                                                                        -- 교육시간
                 , A.COST_AMT                                                                       -- 교육비용
                 , A.RTN_AMT                                                                        -- 환급금액
                 , A.CPT_PNT                                                                        -- 이수점수
                 , A.SITE_TAG                                                                       -- 참고사이트
                 , DECODE( (SELECT COUNT(*)
                              FROM ASNHR.T_CM_EDUCATION
                             WHERE EDU_CD = A.EDU_CD
                               AND SEQ_NO = A.SEQ_NO
                               AND ENO_NO = ?
                            ), 0, 'N', 'Y'
                           ) AS CHK_YN
                 , (SELECT COUNT(*)
                      FROM ASNHR.T_CM_EDUCATION
                     WHERE EDU_CD = A.EDU_CD
                       AND SEQ_NO = A.SEQ_NO
                    )   AS REQ_CNT                                                                  -- 신청인원
                 ,ASNHR.SF_GET_COMMname('01', 'QA', B.INS_YN)                               AS INS_NM      -- 고용보험
                 ,DECODE( (SELECT COUNT(*) FROM ASNHR.T_ED_YEARPLAN WHERE PIS_YY=TO_CHAR(SYSDATE,'YYYY')
                    AND TO_CHAR(SYSDATE,'YYYYMMDD') BETWEEN REG_STR_YMD AND REG_END_YMD)
                    , 0, 'N', 'Y'
                           ) AS YEARPLAN_YN					--연간계획신청기간 내 여부
              FROM ASNHR.T_ED_CHASULIST A
                 , ASNHR.T_ED_COURSELIST B
             WHERE A.EDU_CD = B.EDU_CD
               AND A.EDU_CD = ?
             ORDER BY SEQ_NO DESC
            ]]>
        </query>
    </sql>

    <!-- 해당 교육과정을 신청한 사원들의 사외교육신청서 데이터 조회 -->
    <sql name="EDUE032_SHR_01">
        <description>(목록) 사외교육신청서 조회</description>
        <query>
            <![CDATA[
            SELECT TO_CHAR(TO_DATE(B.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')         AS EDU_STR_YMD, -- 학습시작일자
                   TO_CHAR(TO_DATE(B.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')         AS EDU_END_YMD, -- 학습종료일자
                   A.ENO_NO,                                                                           -- 사번
                   ASNHR.SF_GET_ENOname('01', A.ENO_NO)                                      AS ENO_NM,      -- 성명
                   ASNHR.SF_GET_DPTname('01', 'A4', C.DPT_CD)                                AS DPT_NM,      -- 부서
                   ASNHR.SF_GET_COMMname('01', 'A2', C.JOB_CD)                               AS JOB_NM,      -- 직위
                   (SELECT CET_NO FROM ASNHR.T_CM_PERSON WHERE GUBUN = '01' AND ENO_NO = A.ENO_NO)  AS CET_NO,      -- 주민등록번호
                   B.EDU_CD,                                                                           -- 과정코드
                   B.EDU_NM,      -- 과정
                   B.SEQ_NO,   -- 차수
                   TO_CHAR(A.IPT_YMD, 'YYYY-MM-DD')                                    AS IPT_YMD      -- 학습종료일자
            FROM   ASNHR.T_CM_EDUCATION A,
                   		ASNHR.T_ED_CHASULIST B,
                   		ASNHR.T_CM_PERSON C
            WHERE  A.EDU_CD    = B.EDU_CD
            AND    A.SEQ_NO    = B.SEQ_NO
            AND    A.ENO_NO = C.ENO_NO            
            AND    B.EDU_CD = ?
            AND    B.SEQ_NO = ?
            ]]>
        </query>
    </sql>

    <sql name="EDUE032_SHR_02">
        <description>과정정보 조회</description>
        <query>
            <![CDATA[
            SELECT
                EDU_CD
                , EDU_NM
                , CONTENT_TXT   --교육내용
                , EFFECT_TAG        --기대효과
                , OBJ_TAG       --교육대상
                , CPT_TAG       --수료기준
                , INS_YN        --고용보험여부
                , ASNHR.SF_GET_COMMname('01', 'QA', INS_YN)          AS INS_NM        -- 고용보험환급여부
                , EDU_GBN_CD 	--교육구분
                , ASNHR.SF_GET_COMMname('01', 'Q6', EDU_GBN_CD)      AS EDU_GBN_NM    -- 구분명
                , MNGER_CD      --교육주관
                , FIELD_CD      --교육분야
                , SHAPE_CD      --교육형태
                , GOAL_TAG      --교육목표
                , ASNHR.SF_GET_COMMname('01', 'Q7', MNGER_CD   ) AS MNGER_NM
                , ASNHR.SF_GET_COMMname('01', 'Q5', FIELD_CD)        AS FIELD_NM
                , ASNHR.SF_GET_COMMname('01', 'Q8', SHAPE_CD)        AS SHAPE_NM
            FROM ASNHR.T_ED_COURSELIST
            WHERE EDU_CD = ?
            ]]>
        </query>
    </sql>

    <sql name="EDUE032_SHR_03">
        <description>결재선 정보 조회</description>
        <query>
            <![CDATA[

       SELECT GUN_YMD, GUN_GBN, GUN_DPT AS DPT_CD, SEQ_NO, ENO_NO, JOB_CD, APP_TIME, PENO_NO
             ,APP_YN
             ,DECODE(APP_YN,NULL,'미결','Y','승인','N','부결') AS APP_YN_NM
             ,ASNHR.SF_GET_ENOname('01', ENO_NO) AS ENO_NM
             ,ASNHR.SF_GET_COMMname('01', 'A2', JOB_CD) AS JOB_NM
			 ,ASNHR.SF_GET_DPTname('01', 'A4', GUN_DPT) AS DPT_NM
			 ,REQ_NO
       FROM   ASNHR.T_DI_APPROVAL
       WHERE  REQ_NO = (SELECT REQ_NO FROM ASNHR.T_CM_EDUCATION WHERE ENO_NO = ? AND EDU_CD = ? AND SEQ_NO = ?)
       AND    GUN_GBN = 'M'
       ORDER BY SEQ_NO DESC
            ]]>
        </query>
    </sql>

    <!-- 사외교육신청서 데이터 생성 -->
    <sql name="EDUE032_INS">
        <description>사외교육신청서 생성</description>
        <query>
            <![CDATA[
            INSERT INTO ASNHR.T_CM_EDUCATION (
			   ENO_NO, STR_YMD, OCC_CD,
			   END_YMD, EDU_CD, SEQ_NO,
			   EDU_GBN_CD, PLACE_CD, CPT_PNT,
			   EDU_NM, INT_NAM, DPT_CD,
			   JOB_CD, EDU_TAG, EDU_AMT, REQ_NO, DECISION_CD,
			   IPT_MAN, IPT_YMD, UPT_MAN, UPT_YMD)
			VALUES ( ?, ?, (SELECT OCC_CD FROM ASNHR.T_CM_PERSON WHERE GUBUN = '01' AND ENO_NO = ?),
			    ?, ?, ?,
			    ?, ?, ?,
			    ?, ?, ?,
			    ?, 'N', ?, ?, 'A',
			    ?, SYSDATE, ?, SYSDATE )
            ]]>
        </query>
    </sql>

    <!-- 사외교육신청서 데이터 삭제 -->
    <sql name="EDUE032_DEL">
        <description>사외교육신청서 삭제</description>
        <query>
            <![CDATA[
            DELETE FROM ASNHR.T_CM_EDUCATION
            WHERE  ENO_NO = ?
            AND    SBJ_CD = ?
            AND    SEQ_NO = ?
            ]]>
        </query>
    </sql>
    <!-- 사원정보조회  -->
    <sql name="EDUE032_APP">
        <description>사원정보조회</description>
        <query>
            <![CDATA[
SELECT DISTINCT *
FROM
	(
        SELECT ENO_NO                                                   -- 사번
               , ENO_NM                                                   -- 성명
               , TO_CHAR(NVL(HIRG_YMD, HIR_YMD), 'YYYY-MM-DD')       AS HIRG_YMD       -- 입사일
               , TO_CHAR(HIR_YMD  , 'YYYY-MM-DD')       AS HIR_YMD
               , TO_CHAR(RET_YMD  , 'YYYY-MM-DD')       AS RET_YMD
               , TO_CHAR(RAM_YMD  , 'YYYY-MM-DD')       AS RAM_YMD
               , TO_CHAR(RAM_YMD2 , 'YYYY-MM-DD')       AS RAM_YMD2
               , TO_CHAR(RAM_YMD3 , 'YYYY-MM-DD')       AS RAM_YMD3
               , TO_CHAR(NVL(RETP_YMD,RET_YMD) , 'YYYY-MM-DD')       AS RETP_YMD
               , TO_CHAR(MID_YMD1 , 'YYYY-MM-DD')       AS MID_YMD1
               , TO_CHAR(MID_YMD2 , 'YYYY-MM-DD')       AS MID_YMD2
               , TO_CHAR(MID_YMD3 , 'YYYY-MM-DD')       AS MID_YMD3
               , TO_CHAR( NVL(HIRR_YMD, HIR_YMD) , 'YYYY-MM-DD')       AS HIRR_YMD
               , TO_CHAR(DPA_YMD, 'YYYY-MM-DD')         AS DPA_YMD         -- 소속발령일
               , A.OCC_CD                                                    -- 직종코드
               , ASNHR.SF_GET_COMMname(A.GUBUN, 'A1', A.OCC_CD)   AS OCC_NM          -- 직종명
               , A.HEAD_CD                                                   -- 본부코드
               , ASNHR.SF_GET_DPTname(A.GUBUN,  'B2', A.HEAD_CD)  AS HEAD_NM         -- 본부명
               , A.DPT_CD                                                    -- 부서코드
               , ASNHR.SF_GET_DPTname(A.GUBUN,  'A4', A.DPT_CD)   AS DPT_NM          -- 부서명
               , JOB_CD                                                    -- 직위코드
               , ASNHR.SF_GET_COMMname(A.GUBUN, 'A2', JOB_CD)   AS JOB_NM          -- 직위명
               , HOB_CD                                                    -- 호봉코드
               , ASNHR.SF_GET_COMMname(A.GUBUN, 'A3', HOB_CD)   AS HOB_NM          -- 호봉명
                   , CET_NO
               , MF_TAG
                   , ASNHR.SF_GET_DPTSEQ( '01', 'A4', A.DPT_CD) DPT_SEQ
               , ASNHR.SF_GET_COMMSEQ('01', 'A2', JOB_CD) JOB_SEQ
               , ASNHR.SF_GET_COMMSEQ('01', 'A3', HOB_CD) HOB_SEQ
               , DUTY_CD
               , ASNHR.SF_GET_COMMname(A.GUBUN, 'A7', DUTY_CD)   AS DUTY_NM          -- 직책명
			   , B.HEAD_TAG
        FROM ASNHR.T_CM_PERSON A, ASNHR.T_CM_DEPT B
        WHERE DUTY_CD  <= 'B5'
		AND   A.DPT_CD = B.DPT_CD
        AND   DUTY_CD LIKE 'B%'
	[1]
	AND   A.HEAD_CD IN (SELECT UPDPT_CD
					FROM ASNHR.T_CM_DEPT
					WHERE DPT_CD = NVL(?, DPT_CD))
	UNION ALL
SELECT DISTINCT *
FROM
        (
        SELECT ENO_NO                                                   -- 사번
               , ENO_NM                                                   -- 성명
               , TO_CHAR(NVL(HIRG_YMD, HIR_YMD), 'YYYY-MM-DD')       AS HIRG_YMD       -- 입사일
               , TO_CHAR(HIR_YMD  , 'YYYY-MM-DD')       AS HIR_YMD
               , TO_CHAR(RET_YMD  , 'YYYY-MM-DD')       AS RET_YMD
               , TO_CHAR(RAM_YMD  , 'YYYY-MM-DD')       AS RAM_YMD
               , TO_CHAR(RAM_YMD2 , 'YYYY-MM-DD')       AS RAM_YMD2
               , TO_CHAR(RAM_YMD3 , 'YYYY-MM-DD')       AS RAM_YMD3
               , TO_CHAR(NVL(RETP_YMD,RET_YMD) , 'YYYY-MM-DD')       AS RETP_YMD
               , TO_CHAR(MID_YMD1 , 'YYYY-MM-DD')       AS MID_YMD1
               , TO_CHAR(MID_YMD2 , 'YYYY-MM-DD')       AS MID_YMD2
               , TO_CHAR(MID_YMD3 , 'YYYY-MM-DD')       AS MID_YMD3
               , TO_CHAR( NVL(HIRR_YMD, HIR_YMD) , 'YYYY-MM-DD')       AS HIRR_YMD
               , TO_CHAR(DPA_YMD, 'YYYY-MM-DD')         AS DPA_YMD         -- 소속발령일
               , A.OCC_CD                                                    -- 직종코드
               , ASNHR.SF_GET_COMMname(A.GUBUN, 'A1', A.OCC_CD)   AS OCC_NM          -- 직종명
               , A.HEAD_CD                                                   -- 본부코드
               , ASNHR.SF_GET_DPTname(A.GUBUN,  'B2', A.HEAD_CD)  AS HEAD_NM         -- 본부명
               , A.DPT_CD                                                    -- 부서코드
               , ASNHR.SF_GET_DPTname(A.GUBUN,  'A4', A.DPT_CD)   AS DPT_NM          -- 부서명
               , JOB_CD                                                    -- 직위코드
               , ASNHR.SF_GET_COMMname(A.GUBUN, 'A2', JOB_CD)   AS JOB_NM          -- 직위명
               , HOB_CD                                                    -- 호봉코드
               , ASNHR.SF_GET_COMMname(A.GUBUN, 'A3', HOB_CD)   AS HOB_NM          -- 호봉명
                   , CET_NO
               , MF_TAG
                   , ASNHR.SF_GET_DPTSEQ( '01', 'A4', A.DPT_CD) DPT_SEQ
               , ASNHR.SF_GET_COMMSEQ('01', 'A2', JOB_CD) JOB_SEQ
               , ASNHR.SF_GET_COMMSEQ('01', 'A3', HOB_CD) HOB_SEQ
               , DUTY_CD
               , ASNHR.SF_GET_COMMname(A.GUBUN, 'A7', DUTY_CD)   AS DUTY_NM          -- 직책명
                           , B.HEAD_TAG
        FROM ASNHR.T_CM_PERSON A, ASNHR.T_CM_DEPT B
        WHERE DUTY_CD  = 'B6'
                AND   A.DPT_CD = B.DPT_CD
        AND   DUTY_CD LIKE 'B%'
        [2]
        AND   A.HEAD_CD IN (SELECT UPDPT_CD
                                        FROM ASNHR.T_CM_DEPT
                                        WHERE DPT_CD = NVL(?, DPT_CD))
                AND   ?  IN ('Q3','Q4','Q5','Q7','C11','O2','Q6')  )
	UNION ALL
        SELECT ENO_NO                                                   -- 사번
               , ENO_NM                                                 -- 성명
               , TO_CHAR(NVL(HIRG_YMD, HIR_YMD), 'YYYY-MM-DD')       AS HIRG_YMD       -- 입사일
               , TO_CHAR(HIR_YMD  , 'YYYY-MM-DD')       AS HIR_YMD
               , TO_CHAR(RET_YMD  , 'YYYY-MM-DD')       AS RET_YMD
               , TO_CHAR(RAM_YMD  , 'YYYY-MM-DD')       AS RAM_YMD
               , TO_CHAR(RAM_YMD2 , 'YYYY-MM-DD')       AS RAM_YMD2
               , TO_CHAR(RAM_YMD3 , 'YYYY-MM-DD')       AS RAM_YMD3
               , TO_CHAR(NVL(RETP_YMD,RET_YMD) , 'YYYY-MM-DD')       AS RETP_YMD
               , TO_CHAR(MID_YMD1 , 'YYYY-MM-DD')       AS MID_YMD1
               , TO_CHAR(MID_YMD2 , 'YYYY-MM-DD')       AS MID_YMD2
               , TO_CHAR(MID_YMD3 , 'YYYY-MM-DD')       AS MID_YMD3
               , TO_CHAR( NVL(HIRR_YMD, HIR_YMD) , 'YYYY-MM-DD')       AS HIRR_YMD
               , TO_CHAR(DPA_YMD, 'YYYY-MM-DD')         AS DPA_YMD         -- 소속발령일
               , A.OCC_CD                                                    -- 직종코드
               , ASNHR.SF_GET_COMMname(A.GUBUN, 'A1', A.OCC_CD)   AS OCC_NM          -- 직종명
               , A.HEAD_CD                                                   -- 본부코드
               , ASNHR.SF_GET_DPTname(A.GUBUN,  'B2', A.HEAD_CD)  AS HEAD_NM         -- 본부명
               , A.DPT_CD                                                    -- 부서코드
               , ASNHR.SF_GET_DPTname(A.GUBUN,  'A4', A.DPT_CD)   AS DPT_NM          -- 부서명
               , JOB_CD                                                    -- 직위코드
               , ASNHR.SF_GET_COMMname(A.GUBUN, 'A2', JOB_CD)   AS JOB_NM          -- 직위명
               , HOB_CD                                                    -- 호봉코드
               , ASNHR.SF_GET_COMMname(A.GUBUN, 'A3', HOB_CD)   AS HOB_NM          -- 호봉명
               , CET_NO
               , MF_TAG
                   , ASNHR.SF_GET_DPTSEQ( '01', 'A4', A.DPT_CD) DPT_SEQ
               , ASNHR.SF_GET_COMMSEQ('01', 'A2', JOB_CD) JOB_SEQ
               , ASNHR.SF_GET_COMMSEQ('01', 'A3', HOB_CD) HOB_SEQ
               , DUTY_CD
               , ASNHR.SF_GET_COMMname(A.GUBUN, 'A7', DUTY_CD)   AS DUTY_NM          -- 직책명
			   , B.HEAD_TAG
        FROM ASNHR.T_CM_PERSON A, ASNHR.T_CM_DEPT B
        WHERE A.DPT_CD = NVL(?, A.DPT_CD)
		AND   A.DPT_CD = B.DPT_CD
		AND DUTY_CD  = 'B9'
	[3]
)
ORDER BY JOB_SEQ, DPT_SEQ, HOB_SEQ DESC, ENO_NO

            ]]>
        </query>
    </sql>

    <!-- 교육차수관리 데이터 조회 -->
    <sql name="EDUE033_SHR">
        <description>교육차수관리 조회</description>
        <query>
            <![CDATA[
            SELECT * FROM (
	            SELECT A.EDU_CD                                                                     -- 과정코드
	                 , ASNHR.SF_GET_COURSEname(A.EDU_CD)									AS EDU_NM       -- 과정명
	                 , A.SEQ_NO                                                                     -- SEQ번호
	                 , A.INS_YN                                                                     -- 고용보험
	                 , ASNHR.SF_GET_COMMname('01', 'QA', A.INS_YN)                        AS INS_NM       -- 고용보험
	                 , A.PLACE_TAG                                                                  -- 교육장소
	                 --, TO_CHAR(TO_DATE(A.ENT_STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')    AS ENT_STR_YMD  -- 신청시작일자
	                 --, TO_CHAR(TO_DATE(A.ENT_END_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')    AS ENT_END_YMD  -- 신청종료일자
	                 --, TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')    AS EDU_STR_YMD  -- 학습시작일자
	                 --, TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')    AS EDU_END_YMD  -- 학습종료일자
	                 , ''    AS ENT_STR_YMD  -- 신청시작일자
	                 , ''    AS ENT_END_YMD  -- 신청종료일자
	                 , ''    AS EDU_STR_YMD  -- 학습시작일자
	                 , ''    AS EDU_END_YMD  -- 학습종료일자
	                 , A.CET_NO                                                                     -- 강사사번
	                 , (SELECT ENO_NM
	                      FROM ASNHR.T_ED_LCTRLIST
	                     WHERE CET_NO = A.CET_NO
	                    )                                                           AS SPK_ENO_NM   -- 강사명
	                 , (SELECT COUNT(*)
	                      FROM ASNHR.T_ED_OBJTLIST
	                     WHERE EDU_CD = A.EDU_CD
	                       AND SEQ_NO = A.SEQ_NO
	                       AND COMM_NO = A.COMM_NO
	                    )   AS OBJ_CNT
	                 , (SELECT COUNT(*)
	                      FROM ASNHR.T_CM_EDUCATION
	                     WHERE EDU_CD = A.EDU_CD
	                       AND SEQ_NO = A.SEQ_NO
	                       AND COMM_NO = A.COMM_NO
	                    )   AS EDU_CNT
	                 , A.EDU_GBN_CD                                                               -- 교육구분
	                 , A.MNGER_CD                                                                 -- 교육주관
	                 , A.FIELD_CD                                                                 -- 교육분야
	                 , A.SHAPE_CD                                                                 -- 교육형태
	                 , A.GOAL_TAG                                                                 -- 교육목표
	                 , A.CONTENT_TXT                                                              -- 교육내용
	                 , A.EFFECT_TAG                                                               -- 기대효과
	                 , A.OBJ_TAG                                                                  -- 교육대상
	                 , A.CPT_TAG                                                                  -- 수료기준
	                 , A.INT_NAM                                                                  -- 교육기관
	                 , A.FIX_NO                                                                   -- 교육정원
	                 , A.DAY_NO                                                                   -- 교육일수
	                 , A.TIME_NO                                                                  -- 교육시간
	                 , A.COST_AMT                                                                 -- 교육비용
	                 , A.COST_CD                                                                  -- 비용부담
	                 , A.RTN_AMT                                                                  -- 환급금액
	                 , A.PLACE_CD                                                                 -- 교육장소
	                 , A.CPT_PNT                                                                  -- 이수점수
	                 , A.SITE_TAG                                                                 -- 참고사이트
	              FROM ASNHR.T_ED_CHASULIST A
	              WHERE A.EDU_CD             = ?
	          ORDER BY A.SEQ_NO DESC
	      	  )
		    WHERE ROWNUM=1
            ]]>
        </query>
    </sql>
    <!-- 마스터 데이터 가져오기 -->
    <sql name="EDUE033_SHR_NEW">
        <description>해당교육 기본정보 가져오기</description>
        <query>
            <![CDATA[
             SELECT EDU_CD
             	  , EDU_NM
                  , EDU_GBN_CD
                  , MNGER_CD
                  , FIELD_CD
                  , SHAPE_CD
                  , GOAL_TAG
                  , CONTENT_TXT
                  , EFFECT_TAG
                  , OBJ_TAG
                  , CPT_TAG
                  , COMM_NO
            FROM ASNHR.T_ED_COURSELIST
            WHERE EDU_CD = ?
            ]]>
        </query>
    </sql>
    <!-- 교육차수관리 데이터 생성 -->
    <sql name="EDUE033_INS">
        <description>교육차수관리 생성</description>
        <query>
            <![CDATA[
            INSERT
              INTO ASNHR.T_ED_CHASULIST
                 ( EDU_CD
                 , SEQ_NO
                 , EDU_NM
                 , CET_NO
                 , INS_YN
                 , PLACE_TAG
                 , ENT_STR_YMD
                 , ENT_END_YMD
                 , EDU_STR_YMD
                 , EDU_END_YMD
                 , EDU_OPT_CD

                 , EDU_GBN_CD
                 , MNGER_CD
                 , FIELD_CD
                 , SHAPE_CD
                 , GOAL_TAG

                 , CONTENT_TXT
                 , EFFECT_TAG
                 , OBJ_TAG
                 , CPT_TAG

                 , INT_NAM
                 , FIX_NO
                 , DAY_NO
                 , TIME_NO
                 , COST_AMT
                 , COST_CD
                 , RTN_AMT
                 , PLACE_CD
                 , CPT_PNT
                 , SITE_TAG

                 , IPT_MAN
                 , IPT_YMD
                 , UPT_MAN
                 , UPT_YMD )
          VALUES ( ?
                 , (SELECT NVL(MAX(TO_NUMBER(SEQ_NO)),0)+1
					 FROM ASNHR.T_ED_CHASULIST
					 WHERE EDU_CD = ? )
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , '0'

                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?

                 , ?
                 , SYSDATE
                 , ?
                 , SYSDATE )
            ]]>
        </query>
    </sql>

    <!-- 교육신청 결재처리 조회 -->
    <sql name="EDUE040_SHR">
        <description>교육신청 결재처리 조회</description>
        <query>
            <![CDATA[
                        SELECT  A.GUN_YMD -- 근태일
                               ,A.GUN_DPT -- 근태부서
                               ,ASNHR.SF_GET_DPTname('01','A4',A.GUN_DPT)    AS DPT_NM -- 근태부서
                               ,A.PENO_NO -- 상신자
                               ,ASNHR.SF_GET_ENOname('01',A.PENO_NO)   AS PENO_NM
                               ,A.ENO_NO -- 결재자
                               ,ASNHR.SF_GET_ENOname('01',A.ENO_NO)   AS ENO_NM
                               ,A.GUN_GBN  -- 결재구분
                               ,'교육신청' GUN_GBN_NM -- 결재구분명
                               ,DECODE(A.APP_YN, NULL, 'A', A.APP_YN) AS APP_YN
                               ,DECODE(A.APP_YN,'Y','승인','N','부결','미결') APP_YN_NM -- 결재여부
                               ,A.APP_TIME
                               ,A.REQ_NO    -- 결재품의문서번호
                               ,A.SEQ_NO  -- 결재선
                               ,A.REMARK
                               ,ASNHR.SF_GET_COMMname('01','A2',B.JOB_CD) AS PJOB_NM
                               ,TO_CHAR(A.IPT_YMD,'YYYY-MM-DD HH24:MI') ORD_DATE-- 상신일
                               ,ASNHR.SF_GET_ENOname('01', A.ENO_NO) AS APP_ENO_NM-- 현결재완료자
                               ,ASNHR.SF_GET_COMMname('01', 'A2', A.JOB_CD) AS APP_JOB_NM-- 현결재완료자직위
                               ,DECODE(A.APP_YN, NULL, '', TO_CHAR(A.UPT_YMD,'YYYY-MM-DD HH24:MI')) APP_DATE -- 결재일시간
                               ,A.REMARK AS APP_CMT-- 결재의견
                               ,DECODE(A.APP_YN,'Y','승인','N','부결','미결') AS APP_STATUS-- 결재상태
                               ,TO_CHAR(TO_DATE(T.STR_YMD,'YYYYMMDD'),'YYYY/MM/DD') ||'~'||TO_CHAR(TO_DATE(T.END_YMD,'YYYYMMDD'),'YYYY/MM/DD') AS EDU_YMD
                               ,T.EDU_NM
                        FROM ASNHR.T_CM_EDUCATION T, ASNHR.T_DI_APPROVAL A, ASNHR.T_CM_PERSON B
			WHERE T.REQ_NO = A.REQ_NO AND T.ENO_NO = B.ENO_NO
			AND   A.GUN_GBN  ='M'
			AND   (A.ENO_NO  LIKE  ?||'%'  OR A.PENO_NO LIKE  ?||'%' ) -- 결재자사번,상신자사번
			AND NOT EXISTS (SELECT 'X' FROM ASNHR.T_ED_YEARPLAN WHERE TO_CHAR(SYSDATE,'YYYYMMDD') BETWEEN APP_STR_YMD AND APP_END_YMD)	--연간교육계획결재와 분리
			[1]
			 ORDER BY ORD_DATE DESC, A.REQ_NO, A.SEQ_NO DESC
            ]]>
        </query>
    </sql>

    <!-- 교육신청 결재처리 조회 -->
    <sql name="EDUE041_SHR">
        <description>교육신청 결재처리 조회</description>
        <query>
            <![CDATA[
		    	SELECT A.ENO_NO                                                                          AS EDU_ENO_NO      -- 담당자사번
		                  ,ASNHR.SF_GET_ENOname('01', A.ENO_NO)                                                AS EDU_ENO_NM          -- 담당자
		                  ,A.EDU_CD                                                                                         -- 과정코드
		                  ,A.EDU_NM          -- 과정명
		                  ,B.EDU_GBN_CD                                                                                     -- 교육구분
		                  ,B.MNGER_CD                                                                                       -- 교육주관
		                  ,B.FIELD_CD                                                                                       -- 교육분야
		                  ,B.SHAPE_CD                                                                                       -- 교육형태
		                  ,ASNHR.SF_GET_COMMname('01', 'Q6', B.EDU_GBN_CD)                                     AS EDU_GBN_NM      -- 교육구분
		                  ,ASNHR.SF_GET_COMMname('01', 'Q7', B.MNGER_CD)                                       AS MNGER_NM        -- 교육주관
		                  ,ASNHR.SF_GET_COMMname('01', 'Q5', B.FIELD_CD)                                       AS FIELD_NM        -- 교육분야
		                  ,ASNHR.SF_GET_COMMname('01', 'Q8', B.SHAPE_CD)                                       AS SHAPE_NM        -- 교육형태
		                  ,B.GOAL_TAG                                                                                       -- 교육목표
		                  ,A.CONTENT_TXT                                                                                    -- 교육내용
		                  ,A.EFFECT_TAG                                                                                     -- 기대효과
		                  ,A.OBJ_TAG                                                                                        -- 교육대상
		                  ,A.CPT_TAG                                                                                        -- 수료기준
		                  ,B.INT_NAM                                                                                        -- 교육기관
		                  ,B.FIX_NO                                                                                         -- 교육정원
		                  ,B.DAY_NO                                                                                         -- 교육일수
		                  ,B.TIME_NO                                                                                        -- 교육시간
		                  ,B.COST_AMT                                                                                       -- 교육비용
		                  ,B.COST_CD                                                                                        -- 비용부담
		                  ,ASNHR.SF_GET_COMMname('01', 'QB', B.COST_CD)                                        AS COST_NM         -- 비용부담
		                  ,B.INS_YN                                                                                         -- 고용보험
		                  ,ASNHR.SF_GET_COMMname('01', 'QA', B.INS_YN)                                         AS INS_NM          -- 고용보험
		                  ,B.RTN_AMT                                                                                        -- 환급금액
		                  ,B.PLACE_CD                                                                                       -- 교육장소
		                  ,ASNHR.SF_GET_COMMname('01', 'Q9', B.PLACE_CD)                                       AS PLACE_NM        -- 교육장소
		                  ,B.CPT_PNT                                                                                        -- 이수점수
		                  ,NVL(B.SITE_TAG, '등록 안됨')                                                  AS SITE_TAG        -- 참고사이트
		                  ,TO_CHAR(TO_DATE(B.ENT_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')||' ~ '||TO_CHAR(TO_DATE(B.ENT_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS ENT_TERM
		                  ,TO_CHAR(TO_DATE(C.STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')||' ~ '||TO_CHAR(TO_DATE(C.END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS EDU_TERM
		                  , C.ENO_NO  AS ENO_NO                                                                             -- 학습자사번
                          ,ASNHR.SF_GET_ENOname('01', C.ENO_NO)                                                AS ENO_NM          -- 학습자
                          ,D.DPT_CD																	AS ENO_DPT_CD
                          ,ASNHR.SF_GET_DPTname('01', 'A4', D.DPT_CD)                                     AS ENO_DPT_NM      -- 학습자부서
                          ,D.JOB_CD																	AS ENO_JOB_CD
                          ,ASNHR.SF_GET_COMMname('01', 'A2', D.JOB_CD)                                       AS ENO_JOB_NM        -- 학습자직위
                          ,C.REQ_NO
		              FROM ASNHR.T_ED_COURSELIST A, ASNHR.T_ED_CHASULIST B, ASNHR.T_CM_EDUCATION C, ASNHR.T_CM_PERSON D
		              WHERE A.EDU_CD = B.EDU_CD AND C.ENO_NO = D.ENO_NO
		                AND B.EDU_CD = C.EDU_CD AND B.SEQ_NO = C.SEQ_NO
		                AND C.REQ_NO = ?
            ]]>
        </query>
    </sql>

    <sql name="EDUE041_APPROVAL_SHR">
        <description>교육신청 결재선 정보 조회</description>
        <query>
            <![CDATA[

       SELECT GUN_YMD, GUN_GBN, GUN_DPT AS DPT_CD, SEQ_NO, ENO_NO, JOB_CD, APP_TIME, PENO_NO
             ,APP_YN
             ,DECODE(APP_YN,NULL,'미결','Y','승인','N','부결') AS APP_YN_NM
             ,ASNHR.SF_GET_ENOname('01', ENO_NO) AS ENO_NM
             ,ASNHR.SF_GET_COMMname('01', 'A2', JOB_CD) AS JOB_NM
			 ,ASNHR.SF_GET_DPTname('01', 'A4', GUN_DPT) AS DPT_NM
			 ,REQ_NO
			 ,DECODE(APP_YN,NULL,'',TO_CHAR(UPT_YMD,'YYYY/MM/DD HH24:MI:SS')) APP_YMD
             ,REMARK
             ,NVL2(REMARK,'Click','') AS REMARK1
       FROM   ASNHR.T_DI_APPROVAL
       WHERE  REQ_NO = ?
       AND    GUN_GBN = 'M'
   		ORDER BY SEQ_NO DESC       
            ]]>
        </query>
    </sql>



    <!-- 결재처리 -->
    <sql name="EDUE041_UPT">
        <description>결재정보 수정</description>
        <query>
            <![CDATA[
            UPDATE ASNHR.T_DI_APPROVAL
            SET    APP_YN = ?,
                   APP_TIME = TO_CHAR(SYSDATE,'HH24:MI'),
                   REMARK   = ?,
                   UPT_MAN = ?,
                   UPT_YMD = SYSDATE
            WHERE  1=1
            AND    SEQ_NO  = ?
            AND    REQ_NO  = ?
            AND    GUN_GBN = ?
            ]]>
        </query>
    </sql>


    <!-- 결재한개수 세기 -->
    <sql name="EDUE041_CNT">
        <description>결재정보개수세기</description>
        <query>
            <![CDATA[
               SELECT TOTAL,APP,REJ,BAN,
              CASE
                 WHEN REJ > 0 THEN 'E'
                 WHEN BAN > 0 THEN 'B'
                 WHEN APP = TOTAL THEN 'C'
                 ELSE '-'
            END APP_YN
            FROM
                (SELECT COUNT(*) APP
	                FROM ASNHR.T_DI_APPROVAL
	                WHERE  REQ_NO  = ?
	                AND    GUN_GBN = ?
	                AND APP_YN = 'Y') Y,
	            (SELECT COUNT(*) REJ
	                FROM ASNHR.T_DI_APPROVAL
	                WHERE  REQ_NO  = ?
	                AND    GUN_GBN = ?
	                AND APP_YN = 'N') N,
	            (SELECT COUNT(*) BAN
	                FROM ASNHR.T_DI_APPROVAL
	                WHERE  REQ_NO  = ?
	                AND    GUN_GBN = ?
	                AND APP_YN = 'E') B,
                (SELECT COUNT(*) CNT
	                FROM ASNHR.T_DI_APPROVAL
	                WHERE  REQ_NO  = ?
	                AND    GUN_GBN = ?
	                AND APP_YN IS NOT NULL) I,
                (SELECT COUNT(*) TOTAL
	                FROM ASNHR.T_DI_APPROVAL
	                WHERE  REQ_NO  = ?
	                AND    GUN_GBN = ?) T
            ]]>
        </query>
    </sql>

    <!-- 일일 근태정보 수정 한다. -->
    <sql name="EDUE041_UPT_01">
        <description>결재상태 정보 수정</description>
        <query>
            <![CDATA[
             UPDATE  ASNHR.T_CM_EDUCATION
             SET     DECISION_CD = ?,
                     UPT_MAN = ?,
                     UPT_YMD = SYSDATE
             WHERE   REQ_NO  = ?
            ]]>
        </query>
    </sql>

    <!-- 일일 근태정보 수정 한다. -->
    <sql name="EDUE041_UPT_02">
        <description>결재상태 정보 수정</description>
        <query>
            <![CDATA[
             UPDATE  ASNHR.T_DI_DILIGENCE
             SET     [1]
                     UPT_MAN = ?,
                     UPT_YMD = SYSDATE
             WHERE PIS_YY  = ?
             AND PIS_MM  = ?
             AND ENO_NO  = ?
            ]]>
        </query>
    </sql>



    <!-- 교육신청 결재처리 조회 -->
    <sql name="EDUE041_PRT">
        <description>교육신청 결재처리 조회</description>
        <query>
            <![CDATA[
		    	SELECT A.ENO_NO                                                                          AS EDU_ENO_NO      -- 담당자사번
		                  ,ASNHR.SF_GET_ENOname('01', A.ENO_NO)                                                AS EDU_ENO_NM          -- 담당자
		                  ,A.EDU_CD                                                                                         -- 과정코드
		                  ,A.EDU_NM          -- 과정명
		                  ,B.EDU_GBN_CD                                                                                     -- 교육구분
		                  ,B.MNGER_CD                                                                                       -- 교육주관
		                  ,B.FIELD_CD                                                                                       -- 교육분야
		                  ,B.SHAPE_CD                                                                                       -- 교육형태
		                  ,ASNHR.SF_GET_COMMname('01', 'Q6', B.EDU_GBN_CD)                                     AS EDU_GBN_NM      -- 교육구분
		                  ,ASNHR.SF_GET_COMMname('01', 'Q7', B.MNGER_CD)                                       AS MNGER_NM        -- 교육주관
		                  ,ASNHR.SF_GET_COMMname('01', 'Q5', B.FIELD_CD)                                       AS FIELD_NM        -- 교육분야
		                  ,ASNHR.SF_GET_COMMname('01', 'Q8', B.SHAPE_CD)                                       AS SHAPE_NM        -- 교육형태
		                  ,B.GOAL_TAG                                                                                       -- 교육목표
		                  ,A.CONTENT_TXT                                                                                    -- 교육내용
		                  ,A.EFFECT_TAG                                                                                     -- 기대효과
		                  ,A.OBJ_TAG                                                                                        -- 교육대상
		                  ,A.CPT_TAG                                                                                        -- 수료기준
		                  ,B.INT_NAM                                                                                        -- 교육기관
		                  ,B.FIX_NO||'명'   FIX_NO                                                                       -- 교육정원
		                  ,B.DAY_NO||'일'   DAY_NO                                                                -- 교육일수
		                  ,B.TIME_NO||'시간'   TIME_NO                                                               -- 교육시간
		                  ,B.COST_AMT||'원'   COST_AMT                                                             -- 교육비용
		                  ,B.COST_CD                                                                                        -- 비용부담
		                  ,ASNHR.SF_GET_COMMname('01', 'QB', B.COST_CD)                                        AS COST_NM         -- 비용부담
		                  ,A.INS_YN                                                                                         -- 고용보험
		                  ,ASNHR.SF_GET_COMMname('01', 'QA', A.INS_YN)                                         AS INS_NM          -- 고용보험
		                  ,B.RTN_AMT||'원'   RTN_AMT                                                                                     -- 환급금액
		                  ,B.PLACE_CD                                                                                       -- 교육장소
		                  ,ASNHR.SF_GET_COMMname('01', 'Q9', B.PLACE_CD)                                       AS PLACE_NM        -- 교육장소
		                  ,B.CPT_PNT                                                                                        -- 이수점수
		                  ,NVL(B.SITE_TAG, '등록 안됨')                                                  AS SITE_TAG        -- 참고사이트
		                  ,TO_CHAR(TO_DATE(B.ENT_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')||' ~ '||TO_CHAR(TO_DATE(B.ENT_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS ENT_TERM
		                  ,TO_CHAR(TO_DATE(B.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')||' ~ '||TO_CHAR(TO_DATE(B.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS EDU_TERM
		                  , C.ENO_NO  AS ENO_NO                                                                             -- 학습자사번
                          ,ASNHR.SF_GET_ENOname('01', C.ENO_NO)                                                AS ENO_NM          -- 학습자
                          ,D.DPT_CD																	AS ENO_DPT_CD
                          ,ASNHR.SF_GET_DPTname('01', 'A4', D.DPT_CD)                                     AS ENO_DPT_NM      -- 학습자부서
                          ,D.JOB_CD																	AS ENO_JOB_CD
                          ,ASNHR.SF_GET_COMMname('01', 'A2', D.JOB_CD)                                       AS ENO_JOB_NM        -- 학습자직위
                          ,C.REQ_NO
		              FROM ASNHR.T_ED_COURSELIST A, ASNHR.T_ED_CHASULIST B, ASNHR.T_CM_EDUCATION C, ASNHR.T_CM_PERSON D
		              WHERE A.EDU_CD = B.EDU_CD AND C.ENO_NO = D.ENO_NO
		                AND B.EDU_CD = C.EDU_CD AND B.SEQ_NO = C.SEQ_NO
		                AND C.REQ_NO = ?
            ]]>
        </query>
    </sql>

    <sql name="EDUE041_APPROVAL_PRT">
        <description>교육신청 결재선 정보 조회</description>
        <query>
            <![CDATA[
		       SELECT
		              ASNHR.SF_GET_ENOname('01', ENO_NO) AS ENO_NM
		             ,ASNHR.SF_GET_COMMname('01', 'A2', JOB_CD) AS JOB_NM
					 ,ASNHR.SF_GET_DPTname('01', 'A4', GUN_DPT) AS DPT_NM
					 ,DECODE(APP_YN,NULL,'미결','Y','승인','N','부결') AS APP_YN_NM
					 ,DECODE(APP_YN,NULL,'',TO_CHAR(UPT_YMD,'YYYY/MM/DD HH24:MI:SS')) AS  APP_YN_STATUS
		       FROM   ASNHR.T_DI_APPROVAL
		       WHERE  REQ_NO = ?
		       AND    GUN_GBN = 'M'
            ]]>
        </query>
    </sql>



    <!-- 도서구입신청 데이터 조회 -->
    <sql name="EDUE041_SHR_PRINT">
        <description>도서구입신청 조회</description>
        <query>
            <![CDATA[
           SELECT 
		              ASNHR.SF_GET_ENOname('01', ENO_NO) AS ENO_NM
		             ,ASNHR.SF_GET_COMMname('01', 'A2', JOB_CD) AS JOB_NM
					 ,ASNHR.SF_GET_DPTname('01', 'A4', GUN_DPT) AS DPT_NM
					 ,DECODE(APP_YN,NULL,'미결  ','Y','승인  ','N','부결  ')  || DECODE(APP_YN,NULL,'','R','','A','',TO_CHAR(UPT_YMD,'YYYY/MM/DD HH24:MI:SS  ')) AS APP_STATUS
		       FROM   ASNHR.T_DI_APPROVAL
		       WHERE  REQ_NO = ?
		        AND    GUN_GBN = 'M'
		        AND  SEQ_NO <'90'
            ORDER BY SEQ_NO DESC
            ]]>
        </query>
    </sql>


    <!-- 도서구입신청 데이터 조회 -->
    <sql name="EDUE041_SHR_PRINT2">
        <description>도서구입신청 조회</description>
        <query>
            <![CDATA[
           SELECT 
		              ASNHR.SF_GET_ENOname('01', ENO_NO) AS ENO_NM
		             ,ASNHR.SF_GET_COMMname('01', 'A2', JOB_CD) AS JOB_NM
					 ,ASNHR.SF_GET_DPTname('01', 'A4', GUN_DPT) AS DPT_NM
					 ,DECODE(APP_YN,NULL,'미결  ','Y','승인  ','N','부결  ')  || DECODE(APP_YN,NULL,'','R','','A','',TO_CHAR(UPT_YMD,'YYYY/MM/DD HH24:MI:SS  ')) AS APP_STATUS
		       FROM   ASNHR.T_DI_APPROVAL
		       WHERE  REQ_NO = ?
		        AND    GUN_GBN = 'M'
		        AND  SEQ_NO > '90'		        
            ORDER BY JOB_CD
            ]]>
        </query>
    </sql>





    <!-- 교육신청 결재처리 조회 -->
    <sql name="EDUE060_SHR">
        <description>교육결과보고 결재처리 조회</description>
        <query>
            <![CDATA[
			SELECT  A.GUN_YMD -- 근태일
			       ,A.GUN_DPT -- 근태부서
				   ,ASNHR.SF_GET_DPTname('01','A4',A.GUN_DPT)    AS DPT_NM -- 근태부서
				   ,A.PENO_NO -- 상신자
				   ,ASNHR.SF_GET_ENOname('01',A.PENO_NO)   AS PENO_NM
				   ,A.ENO_NO -- 결재자
				   ,ASNHR.SF_GET_ENOname('01',A.ENO_NO)   AS ENO_NM
				   ,A.GUN_GBN  -- 결재구분
				   ,'교육신청' GUN_GBN_NM -- 결재구분명
				   ,DECODE(A.APP_YN, NULL, 'A', A.APP_YN) AS APP_YN
				   ,DECODE(A.APP_YN,'Y','승인','N','부결','미결') APP_YN_NM -- 결재여부
				   ,A.APP_TIME
				   ,A.REQ_NO	-- 결재품의문서번호
				   ,A.SEQ_NO  -- 결재선
				   ,NVL(B.GUN_DPT, B.DPT_CD) AS DPT_CD
				   ,A.REMARK
				   , ASNHR.SF_GET_COMMname('01','A2',(SELECT JOB_CD FROM ASNHR.T_CM_PERSON WHERE ENO_NO=A.PENO_NO)) AS PJOB_NM
                   , TO_CHAR(A.IPT_YMD,'YYYY-MM-DD HH24:MI') ORD_DATE-- 상신일
                   , ASNHR.SF_GET_ENOname('01', A.ENO_NO) AS APP_ENO_NM-- 현결재완료자
   				   , ASNHR.SF_GET_COMMname('01', 'A2', B.JOB_CD) AS APP_JOB_NM-- 현결재완료자직위
                   , DECODE(A.APP_YN, NULL, '', TO_CHAR(A.UPT_YMD,'YYYY-MM-DD HH24:MI')) APP_DATE -- 결재일시간
                   , A.REMARK AS APP_CMT-- 결재의견
                   , DECODE(A.APP_YN,'Y','승인','N','부결','미결') AS APP_STATUS-- 결재상태
                   ,TO_CHAR(TO_DATE(T.STR_YMD,'YYYYMMDD'),'YYYY/MM/DD') ||'~'||TO_CHAR(TO_DATE(T.END_YMD,'YYYYMMDD'),'YYYY/MM/DD') AS EDU_YMD
                   ,T.EDU_NM
			FROM ASNHR.T_CM_EDUCATION T, ASNHR.T_DI_APPROVAL A, ASNHR.VI_T_CM_PERSON B
			WHERE T.RPT_REQ_NO = A.REQ_NO
			  AND A.ENO_NO = B.ENO_NO
			AND   A.GUN_GBN  ='N'
			AND   (A.ENO_NO  LIKE  ?||'%'  OR A.PENO_NO LIKE  ?||'%' ) -- 결재자사번,상신자사번
			[1]
			 ORDER BY A.IPT_YMD DESC, A.REQ_NO, A.SEQ_NO
            ]]>
        </query>
    </sql>

    <!-- 교육신청 결재처리 조회 -->
    <sql name="EDUE061_SHR">
        <description>교육결과보고 정보 조회</description>
        <query>
            <![CDATA[
		    	SELECT D.ENO_NO										AS EDU_ENO_NO,
                   SF_GET_ENOname('01', D.ENO_NO)                                 AS EDU_ENO_NM,
                   C.FIELD_CD,
                   C.SHAPE_CD,
                   SF_GET_COMMname('01', 'Q5', C.FIELD_CD)    AS FIELD_NM,         -- 분야
                   SF_GET_COMMname('01', 'Q8', C.SHAPE_CD)    AS SHAPE_NM,         -- 형태
                   C.EDU_CD,
                   C.SEQ_NO,
                   C.EDU_NM,
                   D.STR_YMD,
                   TO_CHAR(TO_DATE(C.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')    AS EDU_STR_YMD,
                   TO_CHAR(TO_DATE(C.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')    AS EDU_END_YMD,
                   C.TIME_NO,
                   C.INT_NAM,
                   C.CPT_PNT,
                   C.PLACE_TAG,
                   C.COST_AMT,
                   C.INS_YN,
                   SF_GET_COMMname('01', 'QA', C.INS_YN)       AS INS_NM,          -- 고용보험
                   C.RTN_AMT,
                   D.ABSTRACT_TXT,
                   D.IMPRESSION_TXT,
                   D.OPINION_TXT,
                   D.RE_TARGET_TAG,
                   C.SITE_TAG,
                   DECODE(D.DEGREE_TAG,'1','상','2','중','3','하','-') AS DEGREE_TAG,
                   D.FILE_name,
                   D.FILE_URL
		                  , D.ENO_NO  AS ENO_NO                                                                             -- 학습자사번
                          ,SF_GET_ENOname('01', D.ENO_NO)                                                AS ENO_NM          -- 학습자
                          ,D.DPT_CD																	AS ENO_DPT_CD
                          ,SF_GET_DPTname('01', 'A4', D.DPT_CD)                                     AS ENO_DPT_NM      -- 학습자부서
                          ,D.JOB_CD																	AS ENO_JOB_CD
                          ,SF_GET_COMMname('01', 'A2', D.JOB_CD)                                       AS ENO_JOB_NM        -- 학습자직위
                          ,D.REQ_NO
            FROM ( SELECT A.EDU_CD,
            		      B.EDU_NM,
                          A.SEQ_NO,
                          B.ENO_NO,
                          A.FIELD_CD,
                          A.SHAPE_CD,
                          A.EDU_STR_YMD,
                          A.EDU_END_YMD,
                          A.TIME_NO,
                          A.INT_NAM,
                          A.CPT_PNT,
                          A.PLACE_TAG,
                          A.COST_AMT,
                          A.INS_YN,
                          A.SITE_TAG,
                          A.RTN_AMT
                   FROM   ASNHR.T_ED_CHASULIST A,
                          ASNHR.T_ED_COURSELIST B
                   WHERE  A.EDU_CD = B.EDU_CD
                 ) C,
                   ASNHR.T_CM_EDUCATION D
            WHERE  C.EDU_CD  = D.EDU_CD
            AND    C.SEQ_NO  = D.SEQ_NO
		    AND D.RPT_REQ_NO = ?
            ]]>
        </query>
    </sql>
    <sql name="EDUE061_APPROVAL_SHR">
        <description>교육결과보고 결재선 정보 조회</description>
        <query>
            <![CDATA[

       SELECT GUN_YMD, GUN_GBN, GUN_DPT AS DPT_CD, SEQ_NO, ENO_NO, JOB_CD, APP_TIME, PENO_NO
             ,APP_YN
             ,DECODE(APP_YN,NULL,'미결','Y','승인','N','부결') AS APP_YN_NM
             ,SF_GET_ENOname('01', ENO_NO) AS ENO_NM
             ,SF_GET_COMMname('01', 'A2', JOB_CD) AS JOB_NM
			 ,SF_GET_DPTname('01', 'A4', GUN_DPT) AS DPT_NM
			 ,REQ_NO
			 , DECODE(APP_YN,NULL,'',TO_CHAR(UPT_YMD,'YYYY/MM/DD HH24:MI:SS')) APP_YMD
             ,REMARK
             ,NVL2(REMARK,'Click','') AS REMARK1
       FROM   T_DI_APPROVAL
       WHERE  REQ_NO = ?
       AND    GUN_GBN = 'N'
            ]]>
        </query>
    </sql>
    <!-- 결재처리 -->
    <sql name="EDUE061_UPT">
        <description>결재정보 수정</description>
        <query>
            <![CDATA[
            UPDATE T_DI_APPROVAL
            SET    APP_YN = ?,
                   APP_TIME = TO_CHAR(SYSDATE,'HH24:MI'),
                   REMARK   = ?,
                   UPT_MAN = ?,
                   UPT_YMD = SYSDATE
            WHERE  1=1
            AND    SEQ_NO  = ?
            AND    REQ_NO  = ?
            AND    GUN_GBN = ?
            ]]>
        </query>
    </sql>
    <!-- 결재한개수 세기 -->
    <sql name="EDUE061_CNT">
        <description>결재정보개수세기</description>
        <query>
            <![CDATA[
			SELECT DECODE(T.TOTAL,0,'-',DECODE(CNT/TOTAL, 1, DECODE(Y.APP/T.TOTAL,1,'Y','N'),'-')) APP_YN FROM
                (SELECT COUNT(*) APP
	                FROM T_DI_APPROVAL
	                WHERE  REQ_NO  = ?
	                AND    GUN_GBN = ?
	                AND APP_YN = 'Y') Y,
                (SELECT COUNT(*) CNT
	                FROM T_DI_APPROVAL
	                WHERE  REQ_NO  = ?
	                AND    GUN_GBN = ?
	                AND APP_YN IS NOT NULL) I,
                (SELECT COUNT(*) TOTAL
	                FROM T_DI_APPROVAL
	                WHERE  REQ_NO  = ?
	                AND    GUN_GBN = ?) T
            ]]>
        </query>
    </sql>
    <!-- 결재상태 정보 수정 한다. -->
    <sql name="EDUE061_UPT_01">
        <description>결재상태 정보 수정</description>
        <query>
            <![CDATA[

	                 MERGE
             INTO ASNHR.T_CM_EDUCATION A
            USING (SELECT A.ENO_NO
                        , A.OCC_CD
                        , A.DPT_CD
                        , A.JOB_CD
                        , B.EDU_CD
                        , B.SEQ_NO
                        , B.PLACE_CD
                        , B.EDU_GBN_CD
                        , B.INT_NAM
                        , B.EDU_STR_YMD
                        , B.EDU_END_YMD
                        , B.COST_AMT
		                , DECODE(?, 'Y', B.CPT_PNT, 'N', 0) AS CPT_PNT
                        , ?                             AS EDU_TAG
                        , DECODE(?, 'Y', 'D', 'N', 'G') AS DECISION_CD
                        , ''                            AS COMM_NO
                        , ?                             AS SAV_MAN
                        , ?                             AS REASON_TAG
                     FROM ASNHR.VI_T_CM_PERSON A
                        , ASNHR.T_ED_CHASULIST B
               INNER JOIN ASNHR.T_ED_COURSELIST C
                       ON B.EDU_CD    = C.EDU_CD
                    WHERE A.ENO_NO    = ?
                      AND B.EDU_CD    = ?
                      AND B.SEQ_NO    = ?
                   ) B
               ON (A.ENO_NO     = B.ENO_NO
              AND  A.EDU_CD     = B.EDU_CD
              AND  A.SEQ_NO     = B.SEQ_NO)
             WHEN MATCHED THEN
           UPDATE
              SET PLACE_CD      = B.PLACE_CD
                , EDU_GBN_CD    = B.EDU_GBN_CD
                , INT_NAM       = B.INT_NAM
                , STR_YMD       = B.EDU_STR_YMD
                , END_YMD       = B.EDU_END_YMD
                , EDU_AMT       = B.COST_AMT
                , CPT_PNT       = B.CPT_PNT
                , EDU_TAG       = B.EDU_TAG
                , DECISION_CD   = B.DECISION_CD
                , REASON_TAG    = B.REASON_TAG
                , UPT_MAN       = B.SAV_MAN
                , UPT_YMD       = SYSDATE
             WHEN NOT MATCHED THEN
           INSERT
                ( ENO_NO
                , OCC_CD
                , DPT_CD
                , JOB_CD
                , EDU_CD          -- 과정코드 EDU_CD
                , SEQ_NO          -- 순번
                , PLACE_CD        -- 교육장소    '1' : 사내, '2' : 사외, '3' : 인터넷
                , EDU_GBN_CD      -- 교육구분    'AA' : 필수, 'AB' : 선택
                , INT_NAM         -- 교육기관
                , STR_YMD         -- 교육시작일자
                , END_YMD         -- 교육종료일자
                , EDU_AMT         -- 교육비용 COST_AMT
                , CPT_PNT         -- 이수점수 CPT_PNT
                , EDU_TAG
                , DECISION_CD
                , REASON_TAG
                , IPT_MAN
                , IPT_YMD
                , UPT_MAN
                , UPT_YMD)
         VALUES ( B.ENO_NO
                , B.OCC_CD
                , B.DPT_CD
                , B.JOB_CD
                , B.EDU_CD
                , B.SEQ_NO
                , B.PLACE_CD
                , B.EDU_GBN_CD
                , B.INT_NAM
                , B.EDU_STR_YMD
                , B.EDU_END_YMD
                , B.COST_AMT
                , B.CPT_PNT
                , B.EDU_TAG
                , B.DECISION_CD
                , B.REASON_TAG
                , B.SAV_MAN
                , SYSDATE
                , B.SAV_MAN
                , SYSDATE )


            ]]>
        </query>
    </sql>
    <!-- 결재상태 정보 수정 한다. -->
    <sql name="EDUE061_UPT_02">
        <description>결재상태 정보 수정</description>
        <query>
            <![CDATA[
             UPDATE  ASNHR.T_CM_EDUCATION
             SET     CPT_PNT = 0,
                     UPT_MAN = ?,
                     UPT_YMD = SYSDATE
             WHERE   RPT_REQ_NO  = ?
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUE050
* @description : 운영과정안내
***********************************************************************
* 2007/02/21      박인이        최초작성.
***********************************************************************
-->
    <!-- 운영과정안내 데이터 조회 -->
    <sql name="EDUE050_SHR">
        <description>운영과정안내 조회</description>
        <query>
            <![CDATA[
            SELECT EDU_CD,                                                       -- 과정코드
                   SEQ_NO,                                                       -- 교육차수
                   EDU_NM,                                                       -- 과정명
                   TIME_NO,                                                      -- 시간
                   FIELD_CD,                                                     -- 분야
                   SHAPE_CD,                                                     -- 형태
                   PLACE_CD,                                                     -- 장소
                   SF_GET_COMMname('01', 'Q5', FIELD_CD)    AS FIELD_NM,         -- 분야
                   SF_GET_COMMname('01', 'Q8', SHAPE_CD)    AS SHAPE_NM,         -- 형태
                   SF_GET_COMMname('01', 'Q9', PLACE_CD)    AS PLACE_NM,         -- 장소
                   ENT_TERM,
                   EDU_TERM,
                   COMM_NO
            FROM ( SELECT A.EDU_CD,
                          A.SEQ_NO,
                          A.ENT_STR_YMD||' ~ '||A.ENT_END_YMD       AS ENT_TERM,
                          A.EDU_STR_YMD||' ~ '||A.EDU_END_YMD       AS EDU_TERM,
                          B.EDU_NM,
                          A.TIME_NO,
                          A.FIELD_CD,
                          A.SHAPE_CD,
                          A.PLACE_CD,
                          A.COMM_NO
                   FROM ( SELECT EDU_CD,
                                 SEQ_NO,
                                 COMM_NO,
                                 TO_CHAR(TO_DATE(ENT_STR_YMD, 'YYYY-MM-DD'), 'YY-MM-DD')         AS ENT_STR_YMD,
                                 TO_CHAR(TO_DATE(ENT_END_YMD, 'YYYY-MM-DD'), 'YY-MM-DD')         AS ENT_END_YMD,
                                 TO_CHAR(TO_DATE(EDU_STR_YMD, 'YYYY-MM-DD'), 'YY-MM-DD')         AS EDU_STR_YMD,
                                 TO_CHAR(TO_DATE(EDU_END_YMD, 'YYYY-MM-DD'), 'YY-MM-DD')         AS EDU_END_YMD,
                                 MNGER_CD,
                                 FIELD_CD,
                                 SHAPE_CD,
                                 TIME_NO,
                                 PLACE_CD
                          FROM   ASNHR.T_ED_CHASULIST
                          WHERE  NVL(EDU_CD,' ')      LIKE '%'||?||'%'
                          AND    ENT_STR_YMD <= TO_CHAR(SYSDATE, 'YYYYMMDD')
                          AND    EDU_END_YMD >= TO_CHAR(SYSDATE, 'YYYYMMDD')
                        ) A,
                          ASNHR.T_ED_COURSELIST B
                   WHERE  A.EDU_CD   = B.EDU_CD
                   AND    NVL(A.MNGER_CD,' ') LIKE '%'||?||'%'
                   AND    NVL(A.FIELD_CD,' ') LIKE '%'||?||'%'
                   AND    NVL(A.SHAPE_CD,' ') LIKE '%'||?||'%'
                 )
               ORDER BY COMM_NO, EDU_CD, SEQ_NO
            ]]>
        </query>
    </sql>


<!-- 현재 미사용 메뉴(2008.07.17)  -->
<!--
***********************************************************************
* @USECASE     : EDUE051
* @description : 과정정보
***********************************************************************
* 2007/02/21      박인이        최초작성.
***********************************************************************
-->
    <!-- 과정정보 데이터 조회 -->
    <sql name="EDUE051_SHR">
        <description>과정정보 조회</description>
        <query>
            <![CDATA[
            SELECT A.ENO_NO                                                                                         -- 담당자사번
                  ,ASNHR.SF_GET_ENOname('01', A.ENO_NO)                                                AS ENO_NM          -- 담당자
                  ,A.EDU_CD                                                                                         -- 과정코드
                  ,A.EDU_NM          -- 과정명
                  ,B.EDU_GBN_CD                                                                                     -- 교육구분
                  ,B.MNGER_CD                                                                                       -- 교육주관
                  ,B.FIELD_CD                                                                                       -- 교육분야
                  ,B.SHAPE_CD                                                                                       -- 교육형태
                  ,ASNHR.SF_GET_COMMname('01', 'Q6', B.EDU_GBN_CD)                                     AS EDU_GBN_NM      -- 교육구분
                  ,ASNHR.SF_GET_COMMname('01', 'Q7', B.MNGER_CD)                                       AS MNGER_NM        -- 교육주관
                  ,ASNHR.SF_GET_COMMname('01', 'Q5', B.FIELD_CD)                                       AS FIELD_NM        -- 교육분야
                  ,ASNHR.SF_GET_COMMname('01', 'Q8', B.SHAPE_CD)                                       AS SHAPE_NM        -- 교육형태
                  ,B.GOAL_TAG                                                                                       -- 교육목표
                  ,A.CONTENT_TXT                                                                                    -- 교육내용
                  ,A.EFFECT_TAG                                                                                     -- 기대효과
                  ,A.OBJ_TAG                                                                                        -- 교육대상
                  ,A.CPT_TAG                                                                                        -- 수료기준
                  ,B.INT_NAM                                                                                        -- 교육기관
                  ,B.FIX_NO                                                                                         -- 교육정원
                  ,B.DAY_NO                                                                                         -- 교육일수
                  ,B.TIME_NO                                                                                        -- 교육시간
                  ,B.COST_AMT                                                                                       -- 교육비용
                  ,B.COST_CD                                                                                        -- 비용부담
                  ,ASNHR.SF_GET_COMMname('01', 'QB', B.COST_CD)                                        AS COST_NM         -- 비용부담
                  ,A.INS_YN                                                                                         -- 고용보험
                  ,ASNHR.SF_GET_COMMname('01', 'QA', A.INS_YN)                                         AS INS_NM          -- 고용보험
                  ,B.RTN_AMT                                                                                        -- 환급금액
                  ,B.PLACE_CD                                                                                       -- 교육장소
                  ,ASNHR.SF_GET_COMMname('01', 'Q9', B.PLACE_CD)                                       AS PLACE_NM        -- 교육장소
                  ,B.CPT_PNT                                                                                        -- 이수점수
                  ,NVL(B.SITE_TAG, '등록 안됨')                                                  AS SITE_TAG        -- 참고사이트
                  ,TO_CHAR(TO_DATE(B.ENT_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')||' ~ '||TO_CHAR(TO_DATE(B.ENT_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS ENT_TERM
                  ,TO_CHAR(TO_DATE(B.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')||' ~ '||TO_CHAR(TO_DATE(B.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS EDU_TERM
              FROM ASNHR.T_ED_COURSELIST A
        INNER JOIN ASNHR.T_ED_CHASULIST B
                ON A.EDU_CD = B.EDU_CD
               AND B.SEQ_NO = ?
             WHERE A.EDU_CD = ?
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUG010
* @description : 팀원학습지원
***********************************************************************
* 2007/03/10      박인이        최초작성.
***********************************************************************
-->
    <!-- 로그인사번이 부서장인지 체크 -->
    <sql name="EDUG010_SHR_00">
        <description>로그인사번이 부서장인지 체크</description>
        <query>
            <![CDATA[
            SELECT COUNT(*) AS CHK
            FROM   ASNHR.T_CM_PERSON
            WHERE  GUBUN   = '01'
            AND    ENO_NO  = ?
            AND    DUTY_CD LIKE 'B%'
            ]]>
        </query>
    </sql>

    <!-- 팀원학습지원 데이터 조회 -->
    <sql name="EDUG010_SHR_01">
        <description>팀원학습지원 조회</description>
        <query>
            <![CDATA[
            SELECT B.ENO_NO
                 , B.ENO_NM
                 , B.DPT_CD
                 , B.DPT_NM
                 , B.JOB_CD
                 , B.JOB_NM
                 , A.EDU_YY1
                 , A.EDU_YY2
                 , A.EDU_YY3
                 , A.EDU_YY4
                 , A.EDU_YY5
                 , A.JOB_POINT
                 , A.EXP_PNT
                 , A.CPT_PNT1
                 , A.CPT_PNT2
                 , A.CPT_PNT3
                 , A.CPT_PNT4
                 , A.CPT_PNT5
                 , A.APP_POINT1
                 , A.APP_POINT2
                 , A.APP_POINT3
                 , A.APP_POINT4
                 , A.APP_POINT5
                 , '학습현황'       AS FUNC -- 기능(DUMMY)
              FROM (SELECT ENO_NO
                         , MAX(DECODE(NUM, 1, EDU_YY))      AS EDU_YY1
                         , MAX(DECODE(NUM, 2, EDU_YY))      AS EDU_YY2
                         , MAX(DECODE(NUM, 3, EDU_YY))      AS EDU_YY3
                         , MAX(DECODE(NUM, 4, EDU_YY))      AS EDU_YY4
                         , MAX(DECODE(NUM, 5, EDU_YY))      AS EDU_YY5

                         , MAX(DECODE(NUM, 1, JOB_POINT))   AS JOB_POINT
                         , MAX(DECODE(NUM, 1, EXP_PNT))     AS EXP_PNT

                         , MAX(DECODE(NUM, 1, CPT_PNT))     AS CPT_PNT1
                         , MAX(DECODE(NUM, 2, CPT_PNT))     AS CPT_PNT2
                         , MAX(DECODE(NUM, 3, CPT_PNT))     AS CPT_PNT3
                         , MAX(DECODE(NUM, 4, CPT_PNT))     AS CPT_PNT4
                         , MAX(DECODE(NUM, 5, CPT_PNT))     AS CPT_PNT5

                         , MAX(DECODE(NUM, 1, APP_POINT))   AS APP_POINT1
                         , MAX(DECODE(NUM, 2, APP_POINT))   AS APP_POINT2
                         , MAX(DECODE(NUM, 3, APP_POINT))   AS APP_POINT3
                         , MAX(DECODE(NUM, 4, APP_POINT))   AS APP_POINT4
                         , MAX(DECODE(NUM, 5, APP_POINT))   AS APP_POINT5

                      FROM (SELECT ROW_NUMBER() OVER(PARTITION BY ENO_NO
                                                         ORDER BY EDU_YY DESC
                                                     )         AS NUM
                                 , ENO_NO
                                 , EDU_YY
                                 , JOB_POINT
                                 , CASE
                                   WHEN CPT_PNT >= JOB_POINT
                                   THEN JOB_POINT
                                   ELSE CPT_PNT
                                    END AS APP_POINT
                                 , CPT_PNT
                                 , EXP_PNT

                              FROM (SELECT E.ENO_NO
                                         , E.EDU_YY
                                         , E.JOB_POINT                          -- 인정학점

                                         , NVL(F.CPT_PNT_AA1, 0)
                                           + NVL(F.CPT_PNT_AB1, 0)
                                           + NVL(F.CPT_PNT_AA2, 0)
                                           + NVL(F.CPT_PNT_AB2, 0)
                                           + NVL(G.CPT_PNT,     0)
                                           + NVL(H.CPT_PNT,     0)  AS CPT_PNT  -- 학점합게

                                         , H.CPT_PNT                AS EXP_PNT  --예외학점
                                      FROM (SELECT A.ENO_NO
                                                 , C.EDU_YY
                                                 , (SELECT NVL(MAX(JOB_POINT), 0)
                                                      FROM ASNHR.T_ED_JOBPOINT
                                                     WHERE JOB_CD = B.GBN2_TAG
                                                    ) AS JOB_POINT
                                              FROM ASNHR.T_CM_PERSON A
                                                 , ASNHR.T_CM_COMMON B
                                                 , (SELECT TO_CHAR(SYSDATE, 'YYYY')-LEVEL+1  AS EDU_YY
                                                      FROM DUAL
                                                CONNECT BY LEVEL <= 5
                                                    ) C
                                             WHERE A.JOB_CD = B.COMM_CD
                                               AND B.CD_GBN = 'A2'
                                            ) E
                                           -- 사내교육, 사외교육 점수 가져오기
                                         , (SELECT ENO_NO
                                                 , EDU_YY
                                                 , NVL(SUM(CASE
                                                           WHEN PLACE_CD = '1'
                                                            AND EDU_GBN_CD = 'AA'
                                                           THEN CPT_PNT
                                                            END), 0) AS CPT_PNT_AA1
                                                 , NVL(SUM(CASE
                                                           WHEN PLACE_CD = '1'
                                                            AND EDU_GBN_CD = 'AB'
                                                           THEN CPT_PNT
                                                            END), 0) AS CPT_PNT_AB1
                                                 , NVL(SUM(CASE
                                                           WHEN PLACE_CD = '2'
                                                            AND EDU_GBN_CD = 'AA'
                                                           THEN CPT_PNT
                                                            END), 0) AS CPT_PNT_AA2
                                                 , NVL(SUM(CASE
                                                           WHEN PLACE_CD = '2'
                                                            AND EDU_GBN_CD = 'AB'
                                                           THEN CPT_PNT
                                                            END), 0) AS CPT_PNT_AB2
                                              FROM (SELECT A.ENO_NO
                                                         , SUBSTR(A.STR_YMD, 1, 4) AS EDU_YY
                                                         , A.CPT_PNT            -- 이수점수
                                                         , A.PLACE_CD           -- '1' : 사내, '2' : 사외, '3' : 인터넷
                                                         , A.EDU_GBN_CD         -- 'AA' : 필수, 'AB' : 선택
                                                      FROM ASNHR.T_CM_EDUCATION A
                                                     WHERE A.EDU_TAG = 'Y'      -- '수료'
                                                    )
                                          GROUP BY ENO_NO
                                                 , EDU_YY
                                            ) F
                                           -- 사내강의 학점
                                         , (SELECT C.ENO_NO
                                                 , SUBSTR(A.EDU_STR_YMD, 1, 4) AS EDU_YY
                                                 , SUM(NVL(B.CPT_PNT, 0)) AS CPT_PNT
                                              FROM ASNHR.T_ED_CHASULIST A
                                                 , ASNHR.T_ED_LCTRHIST B
                                                 , ASNHR.T_CM_PERSON C
                                             WHERE A.EDU_CD = B.EDU_CD
                                               AND A.SEQ_NO = B.SEQ_NO
                                               AND A.CET_NO = B.CET_NO
                                               AND A.CET_NO = C.CET_NO
                                          GROUP BY C.ENO_NO
                                                 , SUBSTR(A.EDU_STR_YMD, 1, 4)
                                             ) G
                                           -- 예외학점
                                         , (SELECT ENO_NO, SUBSTR(STR_YMD,1,4) AS STR_YY, CPT_PNT FROM ASNHR.T_ED_EXCEPTER) H
                                     WHERE E.ENO_NO = F.ENO_NO(+)
                                       AND E.EDU_YY = F.EDU_YY(+)
                                       AND E.ENO_NO = G.ENO_NO(+)
                                       AND E.EDU_YY = G.EDU_YY(+)
                                       AND E.ENO_NO = H.ENO_NO(+)
                                       AND E.EDU_YY = H.STR_YY(+)
                                    )
                            )
                  GROUP BY ENO_NO
                    ) A
                 , ASNHR.VI_T_CM_PERSON B
             WHERE A.ENO_NO = B.ENO_NO
               AND B.ENO_NO = NVL(?, B.ENO_NO)
               AND B.DPT_CD = NVL(?, B.DPT_CD)
               AND B.JOB_CD = NVL(?, B.JOB_CD)
          ORDER BY B.DPT_SEQ
                 , B.JOB_SEQ
            ]]>
        </query>
    </sql>


<!--
***********************************************************************
* @USECASE     : EDUG010
* @description : OJT일정
***********************************************************************
* 2017/04/04      이동훈        최초작성.
***********************************************************************
-->

    <!-- OJT대상자등록 데이터 조회 -->
    <sql name="EDUG010_SHR">
        <description>OJT대상자등록 조회</description>
        <query>
            <![CDATA[
            SELECT
			    A.ENO_NO
			    , ASNHR.SF_GET_ENONAME('01',  A.ENO_NO)                          AS ENO_NM       -- 대상자성명
			    , ASNHR.SF_GET_DPTNAME('01', 'A4', B.DPT_CD)                     AS DPT_NM       -- 대상자소속
			    , ASNHR.SF_GET_COMMNAME('01', 'A2', B.JOB_CD)                    AS JOB_NM       -- 대상자직위
			    , A.TRA_DPT_CD
			    , ASNHR.SF_GET_DPTNAME('01', 'A4', A.TRA_DPT_CD)                     AS TRA_DPT_NM       -- OJT소속
			    , A.TRA_ENO_NO												--지도사원사번
			    , ASNHR.SF_GET_ENONAME('01',  A.TRA_ENO_NO)                      AS TRA_ENO_NM       -- 지도사원성명
			    , ASNHR.SF_GET_DPTNAME('01', 'A4', C.DPT_CD)                     AS MDPT_NM       -- 지도사원소속
			    , ASNHR.SF_GET_COMMNAME('01', 'A2', C.JOB_CD)                    AS MJOB_NM       -- 지도사원직위
			    , TO_CHAR(TO_DATE(A.HIR_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS HIR_YMD  	--입사일자
			    , TO_CHAR(TO_DATE(A.STR_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS STR_YMD		--OJT시작일
			    , TO_CHAR(TO_DATE(A.END_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS END_YMD		--OJT종료일
			    , A.TRA_DUTY																-- 담당업무
			    , A.HEAD_EMP_NO																-- 담당팀장
			    , A.EDU_GOAL1
			    , A.EDU_GOAL2
			    , A.EDU_GOAL3
			    , A.EVAL_COMPLETE_YN
			FROM ASNHR.T_CD_OJTMST A, ASNHR.T_CM_PERSON B, ASNHR.T_CM_PERSON C
			WHERE A.ENO_NO=B.ENO_NO
			  AND A.TRA_ENO_NO=C.ENO_NO(+)
              AND B.ENO_NO LIKE '%'||?||'%'
              AND A.ENO_NO LIKE '217%'
              ORDER BY A.ENO_NO
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUG020
* @description : OJT일정
***********************************************************************
* 2017/04/04      이동훈        최초작성.
***********************************************************************
-->


    <!--  -->
    <sql name="EDUG020_SHR">
        <description>OJT 조회</description>
        <query>
            <![CDATA[
            SELECT
			    A.ENO_NO
			    , ASNHR.SF_GET_ENONAME('01',  A.ENO_NO)                          AS ENO_NM       -- 대상자성명
			    , ASNHR.SF_GET_DPTNAME('01', 'A4', B.DPT_CD)                     AS DPT_NM       -- 대상자소속
			    , B.DPT_CD												  AS DPT_CD
			    , ASNHR.SF_GET_COMMNAME('01', 'A2', B.JOB_CD)                    AS JOB_NM       -- 대상자직위
			    , B.JOB_CD												  AS JOB_CD
			    , A.TRA_DPT_CD
			    , ASNHR.SF_GET_DPTNAME('01', 'A4', A.TRA_DPT_CD)                     AS TRA_DPT_NM       -- OJT부서
			    , DECODE(P.TRA_ENO_NO, NULL, A.TRA_ENO_NO, P.TRA_ENO_NO)		AS TRA_ENO_NO	--지도사원사번
			    , ASNHR.SF_GET_ENONAME('01',  DECODE(P.TRA_ENO_NO, NULL, A.TRA_ENO_NO, P.TRA_ENO_NO))                      AS TRA_ENO_NM       -- 지도사원성명
			    , C.DPT_CD												  AS MDPT_CD
			    , ASNHR.SF_GET_DPTNAME('01', 'A4', C.DPT_CD)                     AS MDPT_NM       -- 지도사원소속
			    , C.JOB_CD												  AS MJOB_CD
			    , ASNHR.SF_GET_COMMNAME('01', 'A2', C.JOB_CD)                    AS MJOB_NM       -- 지도사원직위
			    , TO_CHAR(TO_DATE(A.HIR_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS HIR_YMD  	--입사일자
			    , TO_CHAR(TO_DATE(A.STR_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS STR_YMD		--OJT시작일
			    , TO_CHAR(TO_DATE(A.END_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS END_YMD		--OJT종료일
			    , A.TRA_DUTY																-- 담당업무
			    , A.HEAD_EMP_NO																-- 담당팀장
			    , ASNHR.SF_GET_ENONAME('01',  A.HEAD_EMP_NO)                      AS HEAD_EMP_NM       -- 담당팀장성명
			    , A.EDU_GOAL1															--교육목표L1
			    , A.EDU_GOAL2															--교육목표L2
			    , A.EDU_GOAL3															--교육목표L3
			    , A.EVAL_COMPLETE_YN
			    , P.TRA_WEEK												AS PLAN_TRA_WEEK
                , TO_CHAR(TO_DATE(P.STR_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS PLAN_STR_YMD		--OJT시작일
			    , TO_CHAR(TO_DATE(P.END_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS PLAN_END_YMD		--OJT종료일
                , P.TRA_ENO_NO												AS PLAN_TRA_ENO_NO
                , SF_GET_ENONAME('01',  P.TRA_ENO_NO)                          AS PLAN_TRA_ENO_NM
                , P.TRA_SUBITEM												AS PLAN_TRA_SUBITEM
			FROM ASNHR.T_CD_OJTMST A, ASNHR.T_CD_OJTPLAN P, ASNHR.T_CM_PERSON B, ASNHR.T_CM_PERSON C
			WHERE A.ENO_NO=P.ENO_NO(+)
			  AND A.ENO_NO=B.ENO_NO
			  AND A.TRA_ENO_NO=C.ENO_NO(+)
              AND A.ENO_NO LIKE '217%'
            ORDER BY A.ENO_NO, P.STR_YMD

            ]]>
        </query>
    </sql>
    
    
    
    <!--  OJT일지 데이터 조회 -->
    <sql name="EDUG020_SHR_01">
        <description> OJT일지정보 조회</description>
        <query>
            <![CDATA[
            SELECT
			    ENO_NO
			    , TRA_WEEK
			    , TRA_YMD
			    , TRA_SUBJECT
			    , TRA_ENO_NO
			    , TRA_CONTENT
			    , TRA_REMARK
			FROM ASNHR.T_CD_OJTDAYBOOK
			WHERE ENO_NO = ?
			  AND TRA_WEEK = ?
              AND ENO_NO LIKE '217%'			  
            ORDER BY TRA_WEEK, TRA_YMD
            ]]>
        </query>
    </sql>    
    
    
    
    <!--  OJT계획 데이터 조회 -->
    <sql name="EDUG020_SHR_21">
        <description>대상자 사번으로 OJT등록정보 조회</description>
        <query>
            <![CDATA[
            SELECT
			    A.ENO_NO
			    , ASNHR.SF_GET_ENONAME('01',  A.ENO_NO)                          AS ENO_NM       -- 대상자성명
			    , ASNHR.SF_GET_DPTNAME('01', 'A4', B.DPT_CD)                     AS DPT_NM       -- 대상자소속
			    , B.DPT_CD												  		 AS DPT_CD
			    , ASNHR.SF_GET_COMMNAME('01', 'A2', B.JOB_CD)                    AS JOB_NM       -- 대상자직위
			    , B.JOB_CD												  		 AS JOB_CD
			    , A.TRA_DPT_CD
			    , ASNHR.SF_GET_DPTNAME('01', 'A4', A.TRA_DPT_CD)                 AS TRA_DPT_NM       -- OJT부서
			    , A.TRA_ENO_NO												
			    , ASNHR.SF_GET_ENONAME('01',  A.TRA_ENO_NO)                      AS TRA_ENO_NM       -- 지도사원성명
			    , C.DPT_CD												  		 AS MDPT_CD
			    , ASNHR.SF_GET_DPTNAME('01', 'A4', C.DPT_CD)                     AS MDPT_NM       -- 지도사원소속
			    , C.JOB_CD												  		 AS MJOB_CD
			    , ASNHR.SF_GET_COMMNAME('01', 'A2', C.JOB_CD)                    AS MJOB_NM       -- 지도사원직위
			    , TO_CHAR(TO_DATE(A.HIR_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS HIR_YMD  	
			    , TO_CHAR(TO_DATE(A.STR_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS STR_YMD		--OJT시작일
			    , TO_CHAR(TO_DATE(A.END_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS END_YMD		--OJT종료일
			    , A.TRA_DUTY																-- 담당업무
			    , A.HEAD_EMP_NO																-- 담당팀장
			    , SF_GET_ENONAME('01',  A.HEAD_EMP_NO)                      AS HEAD_EMP_NM       -- 담당팀장성명
			    , A.EDU_GOAL1															--교육목표L1
			    , A.EDU_GOAL2															--교육목표L2
			    , A.EDU_GOAL3															--교육목표L3
			    , A.EVAL_COMPLETE_YN
			    , (SELECT MAX(TO_CHAR(UPT_YMD, 'YYYY-MM-DD'))
                      FROM ASNHR.T_CD_OJTPLAN
                     WHERE ENO_NO = A.ENO_NO
                    )                                                       AS WRITE_YMD      -- 작성일자
			FROM ASNHR.T_CD_OJTMST A, ASNHR.T_CM_PERSON B, ASNHR.T_CM_PERSON C
			WHERE A.ENO_NO=B.ENO_NO
			  AND A.TRA_ENO_NO=C.ENO_NO(+)
              AND A.ENO_NO LIKE '217%'			  
			  AND A.ENO_NO = ?
            ]]>
        </query>
    </sql>    
    
    <!--  OJT계획 데이터 조회 -->
    <sql name="EDUG020_SHR_22">
        <description>대상자 사번으로 OJT계획서 조회</description>
        <query>
            <![CDATA[
            SELECT
			    A.ENO_NO				--대상자사번
			    , A.TRA_WEEK			--OJT주차
			    , TO_CHAR(TO_DATE(A.STR_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS STR_YMD		--시작일
			    , TO_CHAR(TO_DATE(A.END_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS END_YMD		--종료일
			    , A.TRA_ENO_NO AS TRA_ENO_NO			-- 교육담당사번
			    , ASNHR.SF_GET_ENONAME('01',  A.TRA_ENO_NO)                      AS TRA_ENO_NM       -- 교육담당성명
			    , A.TRA_SUBITEM															-- 지도항목
			FROM ASNHR.T_CD_OJTPLAN A
			WHERE 1=1
			  AND A.ENO_NO = ?
              AND A.ENO_NO LIKE '217%'			  
			ORDER BY A.STR_YMD
            ]]>
        </query>
    </sql>    
    
    
    
    
<!--
***********************************************************************
* @USECASE     : EDUG030
* @description : OJT
***********************************************************************
* 2017/04/04      이동훈        최초작성.
***********************************************************************
-->    
    
    <sql name="EDUG030_SHR">
        <description>OJT 조회</description>
        <query>
            <![CDATA[
            SELECT
			      A.ENO_NO
			    , ASNHR.SF_GET_ENONAME('01',  A.ENO_NO)                           AS ENO_NM             -- 대상자성명
			    , B.DPT_CD												  		               AS DPT_CD			    
			    , ASNHR.SF_GET_DPTNAME('01', 'A4', B.DPT_CD)                        AS DPT_NM             -- 대상자소속
			    , B.JOB_CD												  		               AS JOB_CD
			    , ASNHR.SF_GET_COMMNAME('01', 'A2', B.JOB_CD)                    AS JOB_NM              -- 대상자직위
			    , A.TRA_ENO_NO                                                              AS TRA_ENO_NO     	--지도사원사번
			    , ASNHR.SF_GET_ENONAME('01',  A.TRA_ENO_NO)                     AS TRA_ENO_NM       -- 지도사원성명			    
			    , C.DPT_CD												  		               AS MDPT_CD
			    , ASNHR.SF_GET_DPTNAME('01', 'A4', C.DPT_CD)                        AS MDPT_NM           -- 지도사원소속
			    , C.JOB_CD												  		               AS MJOB_CD
			    , ASNHR.SF_GET_COMMNAME('01', 'A2', C.JOB_CD)                    AS MJOB_NM            -- 지도사원직위
			    , TO_CHAR(TO_DATE(A.HIR_YMD,'YYYYMMDD'),'YYYY-MM-DD')      AS HIR_YMD  	        --입사일자
			    , P.TRA_WEEK												                    AS PLAN_TRA_WEEK
                , TO_CHAR(TO_DATE(P.STR_YMD,'YYYYMMDD'),'YYYY-MM-DD') 		AS PLAN_STR_YMD		    --OJT시작일
			    , TO_CHAR(TO_DATE(P.END_YMD,'YYYYMMDD'),'YYYY-MM-DD') 		AS PLAN_END_YMD		--OJT종료일
                , P.TRA_SUBITEM												                AS PLAN_TRA_SUBITEM
			FROM ASNHR.T_CD_OJTMST A, ASNHR.T_CD_OJTPLAN P, ASNHR.T_CM_PERSON B, ASNHR.T_CM_PERSON C
			WHERE A.ENO_NO=P.ENO_NO(+)
			  AND A.ENO_NO=B.ENO_NO
			  AND A.TRA_ENO_NO=C.ENO_NO(+)
              AND A.ENO_NO LIKE '217%'
                    [1]
            ORDER BY A.ENO_NO, P.STR_YMD
            ]]>
        </query>
    </sql>
    

    <!--  OJT일지 데이터 조회 -->
    <sql name="EDUG030_SHR_01">
        <description> OJT일지정보 조회</description>
        <query>
            <![CDATA[
            SELECT
			    ENO_NO
			    , ASNHR.SF_GET_ENONAME('01', ENO_NO)   AS ENO_NM
			    , TRA_WEEK
			    , TRA_YMD
			    , TRA_SUBJECT
			    , TRA_ENO_NO
			    , TRA_CONTENT
			    , TRA_REMARK
                , CASE
                   WHEN STATUS = 'S' THEN '저장  '
                   WHEN STATUS = 'R' THEN '상신  '
                   WHEN STATUS = 'Y' THEN '완료  '
                 ELSE '    '   END AS STATUS			    
			FROM ASNHR.T_CD_OJTDAYBOOK
			WHERE ENO_NO = ?
			  AND TRA_WEEK = ?
              AND ENO_NO LIKE '217%'			  
            ORDER BY TRA_WEEK, TRA_YMD
            ]]>
        </query>
    </sql>        
    
    
    <!--  OJT일지 데이터 조회 -->
    <sql name="EDUG030_SHR_31">
        <description> OJT일지정보 조회</description>
        <query>
            <![CDATA[
            SELECT
			    A.ENO_NO
			    , ASNHR.SF_GET_ENONAME('01',  A.ENO_NO)                          AS ENO_NM       -- 대상자성명
			    , ASNHR.SF_GET_DPTNAME('01', 'A4', B.DPT_CD)                     AS DPT_NM       -- 대상자소속
			    , B.DPT_CD												  		 AS DPT_CD
			    , ASNHR.SF_GET_COMMNAME('01', 'A2', B.JOB_CD)                    AS JOB_NM       -- 대상자직위
			    , B.JOB_CD												  		 AS JOB_CD
			    , A.TRA_DPT_CD
			    , ASNHR.SF_GET_DPTNAME('01', 'A4', A.TRA_DPT_CD)                 AS TRA_DPT_NM       -- OJT부서
			    , DECODE(P.TRA_ENO_NO, NULL, A.TRA_ENO_NO, P.TRA_ENO_NO)		 AS TRA_ENO_NO	--지도사원사번
			    , ASNHR.SF_GET_ENONAME('01',  DECODE(P.TRA_ENO_NO, NULL, A.TRA_ENO_NO, P.TRA_ENO_NO))                      AS TRA_ENO_NM       -- 지도사원성명
			    , C.DPT_CD												  			AS MDPT_CD
			    , ASNHR.SF_GET_DPTNAME('01', 'A4', C.DPT_CD)                     	AS MDPT_NM       -- 지도사원소속
			    , C.JOB_CD												  			AS MJOB_CD
			    , ASNHR.SF_GET_COMMNAME('01', 'A2', C.JOB_CD)                    	AS MJOB_NM       -- 지도사원직위
			    , TO_CHAR(TO_DATE(A.HIR_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS HIR_YMD  		--입사일자
			    , TO_CHAR(TO_DATE(A.STR_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS STR_YMD		--OJT시작일
			    , TO_CHAR(TO_DATE(A.END_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS END_YMD		--OJT종료일
			    , A.TRA_DUTY															-- 담당업무
			    , A.HEAD_EMP_NO															-- 담당팀장
			    , ASNHR.SF_GET_ENONAME('01',  A.HEAD_EMP_NO)                AS HEAD_EMP_NM       -- 담당팀장성명
			    , A.EDU_GOAL1															--교육목표L1
			    , A.EDU_GOAL2															--교육목표L2
			    , A.EDU_GOAL3															--교육목표L3
			    , A.EVAL_COMPLETE_YN
			    , P.TRA_WEEK												AS PLAN_TRA_WEEK
                , TO_CHAR(TO_DATE(P.STR_YMD,'YYYYMMDD'),'YYYY-MM-DD') 		AS PLAN_STR_YMD		--OJT시작일
			    , TO_CHAR(TO_DATE(P.END_YMD,'YYYYMMDD'),'YYYY-MM-DD') 		AS PLAN_END_YMD		--OJT종료일
                , P.TRA_ENO_NO												AS PLAN_TRA_ENO_NO
                , ASNHR.SF_GET_ENONAME('01',  P.TRA_ENO_NO)                 AS PLAN_TRA_ENO_NM
                , P.TRA_SUBITEM												AS PLAN_TRA_SUBITEM
			FROM ASNHR.T_CD_OJTMST A, ASNHR.T_CD_OJTPLAN P, ASNHR.T_CM_PERSON B, ASNHR.T_CM_PERSON C
			WHERE A.ENO_NO=P.ENO_NO
			  AND A.ENO_NO=B.ENO_NO
			  AND A.TRA_ENO_NO=C.ENO_NO(+)
              AND A.ENO_NO LIKE '217%'			  
			  AND A.ENO_NO = ?
			  AND P.TRA_WEEK = ?
            ORDER BY A.ENO_NO, P.STR_YMD
            ]]>
        </query>
    </sql>       
    
    <!--  OJT일지 데이터 조회 -->
    <sql name="EDUG030_SHR_32">
        <description> OJT일지정보 조회</description>
        <query>
            <![CDATA[
            SELECT
			    ENO_NO
			    , TRA_WEEK
			    , TO_CHAR(TO_DATE(TRA_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS TRA_YMD
			    , TRA_PLACE
			    , TRA_SUBJECT
			    , TRA_ENO_NO
			    , ASNHR.SF_GET_ENONAME('01',  TRA_ENO_NO) AS TRA_ENO_NM
			    , TRA_CONTENT
			    , TRA_REMARK
			FROM ASNHR.T_CD_OJTDAYBOOK
			WHERE ENO_NO = ?
			  AND TRA_WEEK = ?
			  AND TRA_YMD = ?
              AND ENO_NO LIKE '217%'			  
            ORDER BY TRA_WEEK, TRA_YMD
            ]]>
        </query>
    </sql>      
    
    
    <!--  OJT일지 데이터 조회 -->
    <sql name="EDUG030_SHR_33">
        <description> OJT일지정보 조회</description>
        <query>
            <![CDATA[
            SELECT
			     A.ENO_NO
			    , B.ENO_NM
			    , ASNHR.SF_GET_COMMNAME( '01', 'A2', B.JOB_CD)  AS JOB_NM
			    , A.TRA_WEEK
			    , TO_CHAR(TO_DATE(A.TRA_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS TRA_YMD
			    , A.TRA_PLACE
			    , A.TRA_SUBJECT
			    , A.TRA_ENO_NO
			    , ASNHR.SF_GET_ENONAME('01',  A.TRA_ENO_NO) AS TRA_ENO_NM
			    , ASNHR.SF_GET_COMMNAME( '01', 'A2', C.JOB_CD)  AS TRA_JOB_NM			    
			    , A.TRA_CONTENT
			    , A.TRA_REMARK
			    , A.TRA_MENTO		    
			FROM ASNHR.T_CD_OJTDAYBOOK A, ASNHR.T_CM_PERSON B, ASNHR.T_CM_PERSON C
			WHERE A.ENO_NO = B.ENO_NO
			  AND A.TRA_ENO_NO = C.ENO_NO
			  AND A.ENO_NO = ?
			  AND A.TRA_WEEK = ?
			  AND A.TRA_YMD = ?
              AND A.ENO_NO LIKE '217%'			  
            ORDER BY A.TRA_WEEK, A.TRA_YMD
            ]]>
        </query>
    </sql>     
        
    <!--  OJT일지 데이터 조회 -->
    <sql name="EDUG030_SHR_34">
        <description> OJT일지정보 조회</description>
        <query>
            <![CDATA[
            SELECT
			     A.ENO_NO
			    , B.ENO_NM
			    , ASNHR.SF_GET_COMMNAME( '01', 'A2', B.JOB_CD)  AS JOB_NM
			    , A.TRA_WEEK
			    , TO_CHAR(TO_DATE(A.TRA_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS TRA_YMD
			    , A.TRA_PLACE
			    , A.TRA_SUBJECT
			    , A.TRA_ENO_NO
			    , ASNHR.SF_GET_ENONAME('01',  A.TRA_ENO_NO) AS TRA_ENO_NM
			    , ASNHR.SF_GET_COMMNAME( '01', 'A2', C.JOB_CD)  AS TRA_JOB_NM			    
			    , A.TRA_CONTENT
			    , A.TRA_REMARK
			    , A.TRA_MENTO		    
			FROM ASNHR.T_CD_OJTDAYBOOK A, ASNHR.T_CM_PERSON B, ASNHR.T_CM_PERSON C
			WHERE A.ENO_NO = B.ENO_NO
			  AND A.TRA_ENO_NO = C.ENO_NO
			  AND A.ENO_NO = ?
			  AND A.TRA_YMD = ?
              AND A.ENO_NO LIKE '217%'			  
            ORDER BY A.TRA_WEEK, A.TRA_YMD
            ]]>
        </query>
    </sql>             
        
    <!--  OJT일지 데이터 조회 -->
    <sql name="EDUG030_SHR_35">
        <description> OJT일지정보 조회</description>
        <query>
            <![CDATA[
            SELECT
			    ENO_NO
			    , TRA_WEEK
			    , TO_CHAR(TO_DATE(TRA_YMD,'YYYYMMDD'),'YYYY-MM-DD') AS TRA_YMD
			    , TRA_PLACE
			    , TRA_SUBJECT
			    , TRA_ENO_NO
			    , ASNHR.SF_GET_ENONAME('01',  TRA_ENO_NO) AS TRA_ENO_NM
			    , TRA_CONTENT
			    , TRA_REMARK
			    , TRA_MENTO			    
			FROM ASNHR.T_CD_OJTDAYBOOK
			WHERE ENO_NO = ?
			  AND TRA_YMD = ?
              AND ENO_NO LIKE '217%'			  
            ORDER BY TRA_WEEK, TRA_YMD
            ]]>
        </query>
    </sql>             
        
    <!-- OJT일지 데이터 생성 -->
    <sql name="EDUG030_INS">
        <description>OJT일지등록 생성</description>
        <query>
            <![CDATA[
            INSERT INTO ASNHR.T_CD_OJTDAYBOOK (
			   ENO_NO, TRA_WEEK, TRA_YMD,
			   TRA_PLACE, TRA_SUBJECT, TRA_ENO_NO, 
			   TRA_CONTENT, TRA_REMARK,
				IPT_MAN, IPT_YMD, UPT_MAN, UPT_YMD)
			VALUES ( ?, ?, ?,
			    ?, ?, ?, 
			    ?, ?,
			    ?, SYSDATE, ?, SYSDATE )
            ]]>
        </query>
    </sql>

    <!-- OJT일지 상신처리 -->
    <sql name="EDUG030_SUB">
        <description>OJT일지 상신</description>
        <query>
            <![CDATA[
			UPDATE ASNHR.T_CD_OJTDAYBOOK
			SET    STATUS        = 'R'
			WHERE  ENO_NO     = ?
			AND    TRA_WEEK    = ?
			AND    TRA_YMD     = ?
            ]]>
        </query>
    </sql>  

    <!-- 결재지정 정보를 저장 한다. -->
    <sql name="EDUG030_APP">
        <description>결재선 정보 저장</description>
        <query>
            <![CDATA[
             INSERT  INTO ASNHR.T_DI_APPROVAL
		                    (REQ_NO, SEQ_NO, GUN_GBN, GUN_DPT, 
		                     PENO_NO, ENO_NO, JOB_CD,  
		                     IPT_MAN, IPT_YMD, UPT_MAN, UPT_YMD, GUN_YMD)
             VALUES (      ?,       ?,       ?,      ?,      
				              ?,      ?,       ?,       
				              ?,       SYSDATE,       ?,    SYSDATE,  ?)
            ]]>
        </query>
    </sql>

    <!-- OJT일지 승인처리 -->
    <sql name="EDUG030_ACC">
        <description>OJT일지 승인</description>
        <query>
            <![CDATA[
			UPDATE ASNHR.T_CD_OJTDAYBOOK
			SET    STATUS        = 'Y'
			WHERE  ENO_NO     = ?
			AND    TRA_YMD     = ?
            ]]>
        </query>
    </sql>  

    <!-- OJT일지 승인처리 -->
    <sql name="EDUG030_ACC2">
        <description>OJT일지 승인</description>
        <query>
            <![CDATA[
			UPDATE ASNHR.T_DI_APPROVAL
			SET   APP_YN        = 'Y',
			       APP_TIME = TO_CHAR(SYSDATE,'HH24:MI'),
                   UPT_MAN = ?,
                   UPT_YMD = SYSDATE			        
			WHERE  REQ_NO     = ?
			AND    GUN_GBN     = 'L'
            ]]>
        </query>
    </sql>  
    


    <!-- OJT일지 데이터 수정 -->
    <sql name="EDUG030_UPT">
        <description>OJT일지등록 수정</description>
        <query>
            <![CDATA[
			UPDATE ASNHR.T_CD_OJTDAYBOOK
			SET    TRA_PLACE   = ?,
			       TRA_SUBJECT = ?,
			       TRA_ENO_NO  = ?,
			       TRA_CONTENT = ?,
			       TRA_REMARK  = ?,
			       IPT_MAN     = ?,
			       IPT_YMD     = SYSDATE,			       
			       UPT_MAN     = ?,
			       UPT_YMD     = SYSDATE
			WHERE  ENO_NO      = ?
			AND    TRA_WEEK    = ?
			AND    TRA_YMD     = ?
            ]]>
        </query>
    </sql>    
    
      <!-- OJT일지 멘토의견 추가-->
    <sql name="EDUG030_UPT2">
        <description>OJT일지등록 수정</description>
        <query>
            <![CDATA[
			UPDATE ASNHR.T_CD_OJTDAYBOOK
			SET    
			       TRA_MENTO  = ?,		       
			       UPT_MAN     = ?,
			       UPT_YMD     = SYSDATE
			WHERE  ENO_NO      = ?
			AND    TRA_WEEK    = ?
			AND    TRA_YMD     = ?
            ]]>
        </query>
    </sql>      
    
    
<!--
***********************************************************************
* @USECASE     : EDUH010
* @description : 교육일정
***********************************************************************
* 2007/03/05      박인이        최초작성.
***********************************************************************
-->
    <!-- 교육일정 데이터 조회 -->
    <sql name="EDUH010_SHR_00">
        <description>교육일정 조회</description>
        <query>
            <![CDATA[
            SELECT DISTINCT EDU_YMD,
                   WEEK_DAY,
                   EDU_NM,
                   CHASU_TAG
            FROM ( SELECT TO_CHAR(TO_DATE(B.REG_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')                            AS EDU_YMD,
                          DECODE(TO_CHAR(TO_DATE(B.REG_YMD, 'YYYYMMDD'), 'D'),
                                 '1', '일',
                                 '2', '월',
                                 '3', '화',
                                 '4', '수',
                                 '5', '목',
                                 '6', '금',
                                 '7', '토')||'요일'                                                          AS WEEK_DAY,
                          A.EDU_NM,
                          DECODE(A.CHASU_TAG, NULL, '', SUBSTR(A.CHASU_TAG, 1, 4)||'-'||SUBSTR(A.CHASU_TAG, 5, 2))
                                                                                                             AS CHASU_TAG
                   FROM ( SELECT EDU_CD, EDU_NM, CHASU_TAG, EDU_STR_YMD, EDU_END_YMD
                          FROM   ASNHR.T_ED_CHASULIST
                          WHERE  EDU_END_YMD >= TO_DATE(?||'01', 'YYYYMMDD')
                          AND    EDU_STR_YMD <= LAST_DAY(?||'01')
                        ) A,
                        ( SELECT REG_YMD, HOL_YN
                          FROM   T_DI_HOLIDAY
                          WHERE  REG_YMD >= ?||'01'
                          AND    REG_YMD <= TO_CHAR(LAST_DAY(?||'01'), 'YYYYMMDD')
                        ) B
                   WHERE REG_YMD >= EDU_STR_YMD(+)
                   AND   REG_YMD <= EDU_END_YMD(+)
                 )
            ORDER BY EDU_YMD, EDU_NM, CHASU_TAG
            ]]>
        </query>
    </sql>


    <!-- 교육일정 데이터 조회 -->
    <sql name="EDUH010_SHR_HOL">
        <description>교육일정 조회</description>
        <query>
            <![CDATA[
             SELECT MAX(DECODE(DD, '01', HOL_YN)) AS DD_01
                   ,MAX(DECODE(DD, '02', HOL_YN)) AS DD_02
                   ,MAX(DECODE(DD, '03', HOL_YN)) AS DD_03
                   ,MAX(DECODE(DD, '04', HOL_YN)) AS DD_04
                   ,MAX(DECODE(DD, '05', HOL_YN)) AS DD_05
                   ,MAX(DECODE(DD, '06', HOL_YN)) AS DD_06
                   ,MAX(DECODE(DD, '07', HOL_YN)) AS DD_07
                   ,MAX(DECODE(DD, '08', HOL_YN)) AS DD_08
                   ,MAX(DECODE(DD, '09', HOL_YN)) AS DD_09
                   ,MAX(DECODE(DD, '10', HOL_YN)) AS DD_10
                   ,MAX(DECODE(DD, '11', HOL_YN)) AS DD_11
                   ,MAX(DECODE(DD, '12', HOL_YN)) AS DD_12
                   ,MAX(DECODE(DD, '13', HOL_YN)) AS DD_13
                   ,MAX(DECODE(DD, '14', HOL_YN)) AS DD_14
                   ,MAX(DECODE(DD, '15', HOL_YN)) AS DD_15
                   ,MAX(DECODE(DD, '16', HOL_YN)) AS DD_16
                   ,MAX(DECODE(DD, '17', HOL_YN)) AS DD_17
                   ,MAX(DECODE(DD, '18', HOL_YN)) AS DD_18
                   ,MAX(DECODE(DD, '19', HOL_YN)) AS DD_19
                   ,MAX(DECODE(DD, '20', HOL_YN)) AS DD_20
                   ,MAX(DECODE(DD, '21', HOL_YN)) AS DD_21
                   ,MAX(DECODE(DD, '22', HOL_YN)) AS DD_22
                   ,MAX(DECODE(DD, '23', HOL_YN)) AS DD_23
                   ,MAX(DECODE(DD, '24', HOL_YN)) AS DD_24
                   ,MAX(DECODE(DD, '25', HOL_YN)) AS DD_25
                   ,MAX(DECODE(DD, '26', HOL_YN)) AS DD_26
                   ,MAX(DECODE(DD, '27', HOL_YN)) AS DD_27
                   ,MAX(DECODE(DD, '28', HOL_YN)) AS DD_28
                   ,MAX(DECODE(DD, '29', HOL_YN)) AS DD_29
                   ,MAX(DECODE(DD, '30', HOL_YN)) AS DD_30
                   ,MAX(DECODE(DD, '31', HOL_YN)) AS DD_31
               FROM (SELECT SUBSTR(REG_YMD,7,2) AS DD
                           ,HOL_YN
                       FROM T_DI_HOLIDAY
                      WHERE REG_YMD >= ?||'01'
                        AND REG_YMD <= TO_CHAR(LAST_DAY(?||'01'), 'YYYYMMDD'))
            ]]>
        </query>
    </sql>


    <!-- 교육일정 데이터 조회 -->
    <sql name="EDUH010_SHR">
        <description>교육일정 조회</description>
        <query>
            <![CDATA[
            SELECT A.EDU_NM
                 , A.SEQ_NO
                 , A.EDU_STR_YN
                 , A.EDU_END_YN
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)),  1, 'T', 'F'))       AS DD_01
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)),  2, 'T', 'F'))       AS DD_02
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)),  3, 'T', 'F'))       AS DD_03
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)),  4, 'T', 'F'))       AS DD_04
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)),  5, 'T', 'F'))       AS DD_05
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)),  6, 'T', 'F'))       AS DD_06
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)),  7, 'T', 'F'))       AS DD_07
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)),  8, 'T', 'F'))       AS DD_08
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)),  9, 'T', 'F'))       AS DD_09
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 10, 'T', 'F'))       AS DD_10
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 11, 'T', 'F'))       AS DD_11
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 12, 'T', 'F'))       AS DD_12
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 13, 'T', 'F'))       AS DD_13
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 14, 'T', 'F'))       AS DD_14
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 15, 'T', 'F'))       AS DD_15
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 16, 'T', 'F'))       AS DD_16
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 17, 'T', 'F'))       AS DD_17
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 18, 'T', 'F'))       AS DD_18
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 19, 'T', 'F'))       AS DD_19
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 20, 'T', 'F'))       AS DD_20
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 21, 'T', 'F'))       AS DD_21
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 22, 'T', 'F'))       AS DD_22
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 23, 'T', 'F'))       AS DD_23
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 24, 'T', 'F'))       AS DD_24
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 25, 'T', 'F'))       AS DD_25
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 26, 'T', 'F'))       AS DD_26
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 27, 'T', 'F'))       AS DD_27
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 28, 'T', 'F'))       AS DD_28
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 29, 'T', 'F'))       AS DD_29
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 30, 'T', 'F'))       AS DD_30
                 , MAX(DECODE(NO1 + (NO - TO_NUMBER(NO1)), 31, 'T', 'F'))       AS DD_31
                 , TO_CHAR(LAST_DAY(?||'01'), 'DD')                             AS LAST_DAY
              FROM (SELECT EDU_CD
                         , EDU_NM
                         , SEQ_NO
                         , EDU_STR_YMD
                         , EDU_END_YMD
                         , TO_CHAR(TO_DATE(EDU_STR_YMD), 'DD') NO1
                         , TO_CHAR(TO_DATE(EDU_END_YMD), 'DD') NO2
                         , CASE
                           WHEN EDU_STR_YMD < TO_DATE(?||'01', 'YYYYMMDD')
                           THEN 'Y'
                           ELSE 'N'
                            END AS EDU_STR_YN
                         , CASE
                           WHEN EDU_END_YMD > LAST_DAY(?||'01')
                           THEN 'Y'
                           ELSE 'N'
                            END AS EDU_END_YN
                      FROM ASNHR.T_ED_CHASULIST
                     WHERE EDU_END_YMD >= TO_DATE(?||'01', 'YYYYMMDD')
                       AND EDU_STR_YMD <= LAST_DAY(?||'01')
                    ) A
                 , (SELECT REG_YMD
                         , ROW_NUMBER() OVER(ORDER BY REG_YMD) NO
                      FROM T_DI_HOLIDAY
                     WHERE REG_YMD >= ?||'01'
                       AND REG_YMD <= TO_CHAR(LAST_DAY(TO_DATE(?||'01','YYYYMMDD')), 'YYYYMMDD')
                    ) B
             WHERE REG_YMD >= EDU_STR_YMD
               AND REG_YMD <= EDU_END_YMD
          GROUP BY 	  A.EDU_NM
                 	, A.SEQ_NO
	                , A.EDU_STR_YN
                 	, A.EDU_END_YN
          ORDER BY  EDU_NM, SEQ_NO
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUH020
* @description : 교육알림
***********************************************************************
* 2007/03/05      박인이        최초작성.
***********************************************************************
-->
    <!-- 교육알림 데이터 조회 -->
    <sql name="EDUH020_SHR_01">
        <description>교육알림 금주일정 조회</description>
        <query>
            <![CDATA[
            SELECT DISTINCT EDU_YMD
                 , WEEK_DAY
                 , EDU_NM
                 , SEQ_NO
                 , HOL_GBN
                 , COMM_NO
              FROM (SELECT TO_CHAR(TO_DATE(B.REG_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')      AS EDU_YMD
                         , DECODE( TO_CHAR(TO_DATE(B.REG_YMD, 'YYYYMMDD'), 'D')
                                 , '1', '일'
                                 , '2', '월'
                                 , '3', '화'
                                 , '4', '수'
                                 , '5', '목'
                                 , '6', '금'
                                 , '7', '토')||'요일'                                   AS WEEK_DAY
                         , EDU_NM
                         , SEQ_NO
                         , HOL_GBN
                         , COMM_NO
                      FROM (SELECT EDU_CD
                      			 , EDU_NM
                                 , COMM_NO
                                 , SEQ_NO
                                 , EDU_STR_YMD
                                 , EDU_END_YMD
                              FROM ASNHR.T_ED_CHASULIST
                             WHERE EDU_END_YMD >= TO_CHAR(NEXT_DAY(SYSDATE, '월') - 7, 'YYYYMMDD')
                               AND EDU_STR_YMD <= TO_CHAR(NEXT_DAY(SYSDATE, '일'), 'YYYYMMDD')
                            ) A
                         , (SELECT REG_YMD
                                 , HOL_GBN
                              FROM T_DI_HOLIDAY
                             WHERE REG_YMD >= TO_CHAR(NEXT_DAY(SYSDATE, '월') - 7, 'YYYYMMDD')
                               AND REG_YMD <= TO_CHAR(NEXT_DAY(SYSDATE, '일'), 'YYYYMMDD')
                            ) B
                     WHERE REG_YMD >= EDU_STR_YMD(+)
                       AND REG_YMD <= EDU_END_YMD(+)
                    )
          ORDER BY EDU_YMD
                 , COMM_NO
                 , EDU_NM
                 , SEQ_NO
            ]]>
        </query>
    </sql>

    <!-- 교육알림 데이터 조회 -->
    <sql name="EDUH020_SHR_02">
        <description>교육알림 차주일정 조회</description>
        <query>
            <![CDATA[
            SELECT DISTINCT EDU_YMD
                 , WEEK_DAY
                 , EDU_NM
                 , EDU_TIT
                 , SEQ_NO
                 , HOL_GBN
                 , COMM_NO
              FROM (SELECT TO_CHAR(TO_DATE(B.REG_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')      AS EDU_YMD
                         , DECODE( TO_CHAR(TO_DATE(B.REG_YMD, 'YYYYMMDD'), 'D')
                                 , '1', '일'
                                 , '2', '월'
                                 , '3', '화'
                                 , '4', '수'
                                 , '5', '목'
                                 , '6', '금'
                                 , '7', '토')||'요일'                                   AS WEEK_DAY
                         , EDU_NM
                         , SEQ_NO
                         , HOL_GBN
                         , EDU_TIT
                         , COMM_NO
                      FROM (SELECT EDU_CD
                                 , EDU_NM
                                 , SEQ_NO
                                 , COMM_NO
                                 , EDU_STR_YMD
                                 , EDU_END_YMD
                                 , EDU_TIT
                              FROM ASNHR.T_ED_CHASULIST
                             WHERE EDU_END_YMD >= TO_CHAR(NEXT_DAY(SYSDATE, '월'), 'YYYYMMDD')
                               AND EDU_STR_YMD <= TO_CHAR(NEXT_DAY(SYSDATE, '일') + 7, 'YYYYMMDD')
                            ) A
                         , (SELECT REG_YMD
                                 , HOL_GBN
                              FROM T_DI_HOLIDAY
                             WHERE REG_YMD >= TO_CHAR(NEXT_DAY(SYSDATE, '월'), 'YYYYMMDD')
                               AND REG_YMD <= TO_CHAR(NEXT_DAY(SYSDATE, '일') + 7, 'YYYYMMDD')
                            ) B
                     WHERE REG_YMD >= EDU_STR_YMD(+)
                       AND REG_YMD <= EDU_END_YMD(+)
                    )
          ORDER BY EDU_YMD
                 , COMM_NO
                 , EDU_NM
                 , SEQ_NO
            ]]>
        </query>
    </sql>


<!--
***********************************************************************
* @USECASE     : EDUH030
* @description : 교육과정관리
***********************************************************************
* 2007/02/20      박인이        최초작성.
***********************************************************************
-->
    <!-- 교육과정관리 데이터 조회 -->
    <sql name="EDUH030_SHR">
        <description>교육과정관리 조회</description>
        <query>
            <![CDATA[
            SELECT A.EDU_CD                                                               -- 과정코드
            	 , A.EDU_NM
                 , TO_CHAR(TO_DATE(STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')  AS STR_YMD        --등록일자
                 , '차수관리'                                               AS FUNC       -- 기능
                 , (SELECT COUNT(*)
                      FROM ASNHR.T_ED_CHASULIST
                     WHERE EDU_CD               = A.EDU_CD
                      -- AND SUBSTR(SEQ_NO, 1, 4) = SUBSTR(TO_CHAR(TO_DATE(A.STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD'),1,4)
                       AND COMM_NO = A.COMM_NO
                   ) AS TOT_CNT
                 , (SELECT COUNT(*)
                      FROM ASNHR.T_ED_CHASULIST
                     WHERE EDU_CD               = A.EDU_CD
                      -- AND SUBSTR(SEQ_NO, 1, 4) = SUBSTR(TO_CHAR(TO_DATE(A.STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD'),1,4)
                       AND TO_CHAR(SYSDATE, 'YYYYMMDD') BETWEEN EDU_STR_YMD
                                                            AND EDU_END_YMD
                       --AND COMM_NO = A.COMM_NO
                   ) AS ING_CNT
                 --, COMM_NO
              FROM ASNHR.T_ED_COURSELIST A
             WHERE A.EDU_CD  LIKE '%'||?||'%'
               [1]
               [2]
               [3]
          ORDER BY A.STR_YMD DESC, EDU_CD
              ]]>
        </query>
    </sql>

    <!-- 교육과정관리 데이터 삭제 -->
    <sql name="EDUH030_DEL">
        <description>교육과정관리 삭제</description>
        <query>
            <![CDATA[
            DELETE FROM ASNHR.T_ED_COURSELIST
            WHERE  EDU_CD  = ?
            ]]>
        </query>
    </sql>

    <!-- 교육과정관리 데이터 삭제2 -->
    <sql name="EDUH030_DEL2">
        <description>차수관리 삭제</description>
        <query>
            <![CDATA[
              DELETE FROM ASNHR.T_ED_CHASULIST
              WHERE  EDU_CD  = ?
            ]]>
        </query>
    </sql>



    <!-- 교육차수관리 데이터 삭제 -->
    <sql name="EDUH030_DEL_02">
        <description>교육차수관리 삭제</description>
        <query>
            <![CDATA[

            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUH031
* @description : 교육과정정보관리 등록/수정
***********************************************************************
* 2007/02/20      박인이        최초작성.
***********************************************************************
-->
    <!-- 교육과정정보관리 데이터 조회 -->
    <sql name="EDUH031_SHR">
        <description>교육과정정보관리 조회</description>
        <query>
            <![CDATA[
            SELECT EDU_CD                                                                   -- 과정코드
                 , EDU_NM     -- 과정명
                 , TO_CHAR(TO_DATE(STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')        AS STR_YMD    -- 등록일자
                 , TO_CHAR(TO_DATE(END_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')        AS END_YMD    -- 폐기일자
                 , ENO_NO                                                                   -- 담당자사번
                 , ASNHR.SF_GET_ENOname('01', ENO_NO)                               AS ENO_NM     -- 담당자
                 , EDU_GBN_CD                                                               -- 교육구분
                 , MNGER_CD                                                                 -- 교육주관
                 , FIELD_CD                                                                 -- 교육분야
                 , SHAPE_CD                                                                 -- 교육형태
                 , GOAL_TAG                                                                 -- 교육목표
                 , CONTENT_TXT                                                              -- 교육내용
                 , EFFECT_TAG                                                               -- 기대효과
                 , OBJ_TAG                                                                  -- 교육대상
                 , CPT_TAG                                                                  -- 수료기준
                 , USE_YN                                                                  -- 기준번호
                 , COMM_NO                                                                  -- 기준번호
              FROM ASNHR.T_ED_COURSELIST
             WHERE EDU_CD = ?
            ]]>
        </query>
    </sql>


    <!-- 교육과정정보관리 데이터 생성 -->
    <sql name="EDUH031_INS">
        <description>교육과정정보관리 생성</description>
        <query>
            <![CDATA[
            INSERT
              INTO ASNHR.T_ED_COURSELIST
                 ( EDU_CD
                 , EDU_NM
                 , EDU_YY
                 , STR_YMD
                 , END_YMD
                 , ENO_NO
                 , EDU_GBN_CD
                 , MNGER_CD
                 , FIELD_CD
                 , SHAPE_CD
                 , GOAL_TAG
                 , CONTENT_TXT
                 , EFFECT_TAG
                 , OBJ_TAG
                 , CPT_TAG
                 , USE_YN
                 , IPT_MAN
                 , IPT_YMD
                 , UPT_MAN
                 , UPT_YMD )
          VALUES ( 'EDU'||TO_CHAR(SYSDATE, 'YYYY')||(SELECT LPAD(NVL(MAX(SUBSTR(EDU_CD,8,3)),0)+1, 3,'0') FROM ASNHR.T_ED_COURSELIST
  					WHERE EDU_CD LIKE 'EDU'||TO_CHAR(SYSDATE, 'YYYY')||'%' )
                 , ?
                 , TO_CHAR(SYSDATE, 'YYYY')
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , SYSDATE
                 , ?
                 , SYSDATE )
            ]]>
        </query>
    </sql>

    <!-- 교육과정정보관리 데이터 수정 -->
    <sql name="EDUH031_UPT">
        <description>교육과정정보관리 수정</description>
        <query>
            <![CDATA[
            UPDATE ASNHR.T_ED_COURSELIST
               SET STR_YMD      = ?
                 , END_YMD      = ?
                 , ENO_NO       = ?
                 , EDU_GBN_CD   = ?
                 , MNGER_CD     = ?
                 , FIELD_CD     = ?
                 , SHAPE_CD     = ?
                 , GOAL_TAG     = ?
                 , CONTENT_TXT  = ?
                 , EFFECT_TAG   = ?
                 , OBJ_TAG      = ?
                 , CPT_TAG      = ?
                 , EDU_NM      = ?
                 , USE_YN      = ?
                 , UPT_MAN      = ?
                 , UPT_YMD      = SYSDATE
             WHERE EDU_CD       = ?
            ]]>
        </query>
    </sql>

    <!-- 교육과정정보관리 데이터 수정 -->
    <sql name="EDUH031_UPT2">
        <description>교육과정정보관리 수정</description>
        <query>
            <![CDATA[
            UPDATE ASNHR.T_ED_CHASULIST
               SET
                   EDU_GBN_CD   = ?
                 , MNGER_CD     = ?
                 , FIELD_CD     = ?
                 , SHAPE_CD     = ?
                 , GOAL_TAG     = ?
                 , CONTENT_TXT  = ?
                 , EFFECT_TAG   = ?
                 , OBJ_TAG      = ?
                 , CPT_TAG      = ?
                 , EDU_NM      = ?
                 , UPT_MAN      = ?
                 , UPT_YMD      = SYSDATE
             WHERE EDU_CD       = ?
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUH032
* @description : 교육차수관리
***********************************************************************
* 2007/02/21      박인이        최초작성.
***********************************************************************
-->
    <!-- 교육차수관리 목록 조회 -->
    <sql name="EDUH110_SHR">
        <description>교육차수관리 조회</description>
        <query>
            <![CDATA[
           SELECT B.EDU_CD                                                                           -- 과정코드
                , B.EDU_NM     -- 과정명
                , SEQ_NO                                                                             -- SEQ번호
                , TO_CHAR(TO_DATE(A.ENT_STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')            AS ENT_STR_YMD
                , TO_CHAR(TO_DATE(A.ENT_END_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')            AS ENT_END_YMD
                , TO_CHAR(TO_DATE(A.ENT_STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')
                  ||' ~ '
                  ||TO_CHAR(TO_DATE(A.ENT_END_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')          AS ENT_TERM   -- 신청기간
                , TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')            AS EDU_STR_YMD
                , TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')            AS EDU_END_YMD
                , TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')
                  ||' ~ '
                  ||TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')          AS EDU_TERM   -- 학습기간
                , A.MNGER_CD                                                                         -- 주관코드
                , ASNHR.SF_GET_COMMname('01', 'Q7', A.MNGER_CD )                             AS MNGER_CD_NM-- 주관구분
                , A.SHAPE_CD                                                                         -- 형태코드
                , ASNHR.SF_GET_COMMname('01', 'Q8', A.SHAPE_CD)                              AS SHAPE_NM   -- 형태
                , ASNHR.SF_GET_COMMname('01', 'Q6', A.EDU_GBN_CD )                           AS EDU_GBN_NM -- 교육구분
                , (SELECT COUNT(*)
                     FROM ASNHR.T_CM_EDUCATION
                    WHERE EDU_CD  = A.EDU_CD
                      AND SEQ_NO  = A.SEQ_NO
             --         AND COMM_NO = A.COMM_NO
                      AND DECISION_CD <> 'D'
                   )   AS REQ_CNT              -- 개인이 신청한 신청건수
                , (SELECT COUNT(*)
                     FROM ASNHR.T_CM_EDUCATION
                    WHERE EDU_CD = A.EDU_CD
                      AND SEQ_NO = A.SEQ_NO
                      AND DECISION_CD = 'D'
                   )   AS PAS_CNT    -- 수료건수
                , B.ENO_NO                                                                         -- 사번
                , ASNHR.SF_GET_ENOname('01', B.ENO_NO)                                       AS ENO_NM   -- 담당자
             FROM ASNHR.T_ED_CHASULIST A
                , ASNHR.T_ED_COURSELIST B
             WHERE A.EDU_CD     = B.EDU_CD
               AND B.USE_YN = 'Y'
               AND NVL(A.MNGER_CD,' ')   LIKE '%'||?||'%'
               AND NVL(A.FIELD_CD,' ')   LIKE '%'||?||'%'
               AND NVL(A.SHAPE_CD,' ')   LIKE '%'||?||'%'
               AND NVL(B.EDU_CD,' ')     LIKE '%'||?||'%'
               AND SEQ_NO LIKE ?
               [1]
          ORDER BY B.EDU_NM
                 , A.SEQ_NO DESC
              ]]>
        </query>
    </sql>

    <!-- 교육차수관리 데이터 조회 -->
    <sql name="EDUH032_SHR">
        <description>교육차수관리 조회</description>
        <query>
            <![CDATA[
            SELECT A.EDU_CD                                                                     -- 과정코드
                 , ASNHR.SF_GET_COURSEname(A.EDU_CD)									AS EDU_NM       -- 과정명
                 , A.SEQ_NO                                                                     -- SEQ번호
                 , A.INS_YN                                                                     -- 고용보험
                 , ASNHR.SF_GET_COMMname('01', 'QA', A.INS_YN)                        AS INS_NM       -- 고용보험
                 , A.PLACE_TAG                                                                  -- 교육장소
                 , TO_CHAR(TO_DATE(A.ENT_STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')    AS ENT_STR_YMD  -- 신청시작일자
                 , TO_CHAR(TO_DATE(A.ENT_END_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')    AS ENT_END_YMD  -- 신청종료일자
                 , TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')    AS EDU_STR_YMD  -- 학습시작일자
                 , TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')    AS EDU_END_YMD  -- 학습종료일자
                 , A.CET_NO                                                                     -- 강사사번
                 , (SELECT ENO_NM
                      FROM ASNHR.T_ED_LCTRLIST
                     WHERE CET_NO = A.CET_NO
                    )                                                           AS SPK_ENO_NM   -- 강사명
                 , (SELECT COUNT(*)
                      FROM ASNHR.T_ED_OBJTLIST
                     WHERE EDU_CD = A.EDU_CD
                       AND SEQ_NO = A.SEQ_NO
                       AND COMM_NO = A.COMM_NO
                    )   AS OBJ_CNT
                 , (SELECT COUNT(*)
                      FROM ASNHR.T_CM_EDUCATION
                     WHERE EDU_CD = A.EDU_CD
                       AND SEQ_NO = A.SEQ_NO
                       AND COMM_NO = A.COMM_NO
                    )   AS EDU_CNT
                 , A.EDU_GBN_CD                                                               -- 교육구분
                 , A.MNGER_CD                                                                 -- 교육주관
                 , A.FIELD_CD                                                                 -- 교육분야
                 , A.SHAPE_CD                                                                 -- 교육형태
                 , A.GOAL_TAG                                                                 -- 교육목표
                 , A.CONTENT_TXT                                                              -- 교육내용
                 , A.EFFECT_TAG                                                               -- 기대효과
                 , A.OBJ_TAG                                                                  -- 교육대상
                 , A.CPT_TAG                                                                  -- 수료기준
                 , A.INT_NAM                                                                  -- 교육기관
                 , A.FIX_NO                                                                   -- 교육정원
                 , A.DAY_NO                                                                   -- 교육일수
                 , A.TIME_NO                                                                  -- 교육시간
                 , A.COST_AMT                                                                 -- 교육비용
                 , A.COST_CD                                                                  -- 비용부담
                 , A.RTN_AMT                                                                  -- 환급금액
                 , A.PLACE_CD                                                                 -- 교육장소
                 , A.CPT_PNT                                                                  -- 이수점수
                 , A.SITE_TAG                                                                 -- 참고사이트
              FROM ASNHR.T_ED_CHASULIST A
              WHERE A.EDU_CD             = ?
               AND NVL(A.SEQ_NO,' ') LIKE '%'||?||'%'
          ORDER BY A.SEQ_NO DESC
            ]]>
        </query>
    </sql>

   <!-- 해당교육에 최고 교육차수 가져오기 -->
   <sql name="EDUH032_SHR_CHASU">
        <description>해당교육에 최고 교육차수 가져오기</description>
        <query>
            <![CDATA[
            SELECT NVL(MAX(SEQ_NO), 1) AS MAX_CHASU
              FROM (SELECT SEQ_NO
                      FROM ASNHR.T_ED_CHASULIST
                     WHERE EDU_CD = ?
                     UNION
                    SELECT SEQ_NO
                      FROM ASNHR.T_CM_EDUCATION
                     WHERE EDU_CD = ?
                    )
            ]]>
        </query>
    </sql>


    <!-- 마스터 데이터 가져오기 -->
    <sql name="EDUH032_SHR_NEW">
        <description>해당교육 기본정보 가져오기</description>
        <query>
            <![CDATA[
             SELECT EDU_NM
                  , EDU_GBN_CD
                  , MNGER_CD
                  , FIELD_CD
                  , SHAPE_CD
                  , GOAL_TAG
                  , CONTENT_TXT
                  , EFFECT_TAG
                  , OBJ_TAG
                  , CPT_TAG
                  , COMM_NO
            FROM ASNHR.T_ED_COURSELIST
            WHERE EDU_CD = ?
            ]]>
        </query>
    </sql>

    <!-- 교육차수관리 데이터 생성 -->
    <sql name="EDUH032_INS">
        <description>교육차수관리 생성</description>
        <query>
            <![CDATA[
            INSERT
              INTO ASNHR.T_ED_CHASULIST
                 ( EDU_CD
                 , SEQ_NO
                 , EDU_NM
                 , CET_NO
                 , INS_YN
                 , PLACE_TAG
                 , ENT_STR_YMD
                 , ENT_END_YMD
                 , EDU_STR_YMD
                 , EDU_END_YMD
                 , EDU_OPT_CD

                 , EDU_GBN_CD
                 , MNGER_CD
                 , FIELD_CD
                 , SHAPE_CD
                 , GOAL_TAG

                 , CONTENT_TXT
                 , EFFECT_TAG
                 , OBJ_TAG
                 , CPT_TAG

                 , INT_NAM
                 , FIX_NO
                 , DAY_NO
                 , TIME_NO
                 , COST_AMT
                 , COST_CD
                 , RTN_AMT
                 , PLACE_CD
                 , CPT_PNT
                 , SITE_TAG

                 , IPT_MAN
                 , IPT_YMD
                 , UPT_MAN
                 , UPT_YMD )
          VALUES ( ?
                 , (SELECT NVL(MAX(SEQ_NO),0)+1
					 FROM ASNHR.T_ED_CHASULIST
					 WHERE EDU_CD = ? )
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , '0'

                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?
                 , ?

                 , ?
                 , SYSDATE
                 , ?
                 , SYSDATE )
            ]]>
        </query>
    </sql>

    <!-- 교육차수관리 데이터 수정 -->
    <sql name="EDUH032_UPT">
        <description>교육차수관리 수정</description>
        <query>
            <![CDATA[
            UPDATE ASNHR.T_ED_CHASULIST
               SET EDU_NM          = ?
                 , CET_NO           = ?
                 , INS_YN           = ?
                 , PLACE_TAG        = ?
                 , ENT_STR_YMD      = ?
                 , ENT_END_YMD      = ?
                 , EDU_STR_YMD      = ?
                 , EDU_END_YMD      = ?

                 , EDU_GBN_CD       = ?
                 , MNGER_CD         = ?
                 , FIELD_CD         = ?
                 , SHAPE_CD         = ?
                 , GOAL_TAG         = ?

                 , CONTENT_TXT       = ?
                 , EFFECT_TAG        = ?
                 , OBJ_TAG           = ?
                 , CPT_TAG           = ?

                 , INT_NAM          = ?
                 , FIX_NO           = ?
                 , DAY_NO           = ?
                 , TIME_NO          = ?
                 , COST_AMT         = ?
                 , COST_CD          = ?
                 , RTN_AMT          = ?
                 , PLACE_CD         = ?
                 , CPT_PNT          = ?
                 , SITE_TAG         = ?

                 , UPT_MAN          = ?
                 , UPT_YMD          = SYSDATE
             WHERE EDU_CD           = ?
               AND SEQ_NO           = ?
            ]]>
        </query>
    </sql>

    <!-- 교육차수관리 데이터 삭제 -->
    <sql name="EDUH032_DEL">
        <description>교육차수관리 삭제</description>
        <query>
            <![CDATA[
            DELETE FROM ASNHR.T_ED_CHASULIST
            WHERE  EDU_CD     = ?
            AND    SEQ_NO     = ?
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUH040
* @description : 훈련실시신고서
***********************************************************************
* 2007/02/23      박인이        최초작성.
***********************************************************************
-->
    <!-- 훈련실시신고서 데이터 조회 -->
    <sql name="EDUH040_SHR">
        <description>훈련실시신고서 조회</description>
        <query>
            <![CDATA[
            SELECT TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS EDU_STR_YMD -- 시작일자
                 , TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS EDU_END_YMD -- 종료일자
                 , A.EDU_CD                                                                   -- 과정코드
                 , A.SEQ_NO
                 , A.EDU_NM      -- 과정명
                 , A.FIX_NO                                                                   -- 인원
                 , 'F'                                                         AS CHK_YN       -- 출력선택
                 , (SELECT COUNT(*) CNT
                      FROM ASNHR.T_ED_OBJTLIST
                     WHERE EDU_CD = A.EDU_CD
                       AND SEQ_NO = A.SEQ_NO
                    )   AS APP_NO
              FROM (SELECT EDU_CD
                         , EDU_NM
                         , SEQ_NO
                         , EDU_STR_YMD
                         , EDU_END_YMD
                         , FIX_NO
                      FROM ASNHR.T_ED_CHASULIST
                     WHERE NVL(EDU_CD,' ') LIKE '%'||?||'%'
                      [1]
                    ) A
                 , ASNHR.T_ED_COURSELIST B
             WHERE A.EDU_CD = B.EDU_CD
          ORDER BY EDU_STR_YMD, EDU_NM
            ]]>
        </query>
    </sql>

    <!-- 훈련실시신고서 대상자 정보를 인쇄를 위해 저장해 놓음 -->
    <sql name="EDUH040_SAV">
        <description>훈련실시신고서 조회</description>
        <query>
            <![CDATA[
            BEGIN
                --임시 테이블의 대상자 정보를 모두 삭제 한다.
                DELETE
                  FROM T_ID_CEFBOOK_TEMP
                 WHERE SES_NO = ?;


                --임시 테이블에 대상자 정보를 등록한다.
                INSERT
                  INTO T_ID_CEFBOOK_TEMP
                     ( SES_NO
                     , REQ_NO
                     , ENO_NO )
                SELECT ?
                     , ?
                     , ENO_NO
                  FROM ASNHR.T_ED_OBJTLIST
                 WHERE [1];
            END;
            ]]>
        </query>
    </sql>

    <!-- 훈련실시신고서 인쇄 입니다. -->
    <sql name="EDUH040_PRINT">
        <description>훈련실시신고서 인쇄</description>
        <query>
            <![CDATA[
            SELECT 	B.ENO_NM
					, B.ENO_NO
					, B.DPT_NM
					, B.CET_NO
					, '95-025079-0-110-1201' AS GO_NUM
					, EDGR_NM
					, MAJ_NM
					, B.OCC_NM,  B.JOB_NM
					, '40' AS WORK_TIME
					,TO_CHAR(HIRG_YMD,'YYYY/MM/DD') AS HIRG_YMD
					,TO_CHAR(HIRG_YMD,'YYYY/MM/DD') AS HIRG_YMD2
 					FROM T_ID_CEFBOOK_TEMP A, ASNHR.VI_T_CM_PERSON B
					WHERE A.SES_NO= ?
					      AND A.ENO_NO=B.ENO_NO
					ORDER BY B.JOB_SEQ, B.HOB_SEQ DESC, B.HIR_YMD, B.ENO_NO
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUH050
* @description : 담당과정운영
***********************************************************************
* 2007/02/22      박인이        최초작성.
***********************************************************************
-->
    <!-- 담당과정운영 데이터 조회 -->
    <sql name="EDUH050_SHR">
        <description>담당과정운영 조회</description>
        <query>
            <![CDATA[
            SELECT B.EDU_CD                                                                           -- 과정코드
                 , B.EDU_NM     -- 과정명
                 , SEQ_NO                                                                             -- SEQ번호
                 , TO_CHAR(TO_DATE(A.ENT_STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')            AS ENT_STR_YMD
                 , TO_CHAR(TO_DATE(A.ENT_END_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')            AS ENT_END_YMD
                 , TO_CHAR(TO_DATE(A.ENT_STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')
                   ||' ~ '
                   ||TO_CHAR(TO_DATE(A.ENT_END_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')          AS ENT_TERM   -- 신청기간
                 , TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')            AS EDU_STR_YMD
                 , TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')            AS EDU_END_YMD
                 , TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')
                   ||' ~ '
                   ||TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')          AS EDU_TERM   -- 학습기간
                 , A.MNGER_CD                                                                         -- 주관코드
                 , ASNHR.SF_GET_COMMname('01', 'Q7', A.MNGER_CD )                             AS MNGER_CD_NM-- 주관구분
                 , A.SHAPE_CD                                                                         -- 형태코드
                 , ASNHR.SF_GET_COMMname('01', 'Q8', A.SHAPE_CD)                              AS SHAPE_NM   -- 형태
                 , ASNHR.SF_GET_COMMname('01', 'Q6', A.EDU_GBN_CD )                           AS EDU_GBN_NM -- 교육구분
                 , (SELECT COUNT(*)
                      FROM ASNHR.T_CM_EDUCATION
                     WHERE EDU_CD  = A.EDU_CD
                       AND SEQ_NO  = A.SEQ_NO
                       AND DECISION_CD <>  'D'
                    )   AS REQ_CNT              -- 개인이 신청한 신청건수

                 , (SELECT COUNT(*)
                      FROM ASNHR.T_CM_EDUCATION
                     WHERE EDU_CD  = A.EDU_CD
                       AND SEQ_NO  = A.SEQ_NO
                       AND DECISION_CD = 'A'
                    )   AS OBJ_CNT              -- 관리자가 신청한 신청건수

                 , (SELECT COUNT(*)
                      FROM ASNHR.T_CM_EDUCATION
                     WHERE EDU_CD = A.EDU_CD
                       AND SEQ_NO = A.SEQ_NO
                       AND DECISION_CD = 'D'
                    )   AS PAS_CNT    -- 수료건수

                 , B.ENO_NO                                                                         -- 사번
                 , ASNHR.SF_GET_ENOname('01', B.ENO_NO)                                       AS ENO_NM   -- 담당자
                 , '학습자관리'                                                          AS OBJ_MAN  -- 학습자관리
                 , CASE
                   WHEN ENT_STR_YMD <= TO_CHAR(SYSDATE, 'YYYYMMDD')
                    AND EDU_END_YMD >= TO_CHAR(SYSDATE, 'YYYYMMDD')
                   THEN '일괄등록'
                   ELSE ''
                    END                                                                 AS BAT_INS  -- 대상자일괄등록
                 , CASE
                   WHEN EDU_END_YMD <  TO_CHAR(SYSDATE, 'YYYYMMDD')
                   THEN '실적등록'
                   ELSE ''
                    END                                                                 AS RES_INS  -- 강의실적
              FROM ASNHR.T_ED_CHASULIST A
                 , ASNHR.T_ED_COURSELIST B
             WHERE A.EDU_CD     = B.EDU_CD
               AND NVL(A.MNGER_CD,' ')   LIKE '%'||?||'%'
               AND NVL(A.FIELD_CD,' ')   LIKE '%'||?||'%'
               AND NVL(A.SHAPE_CD,' ')   LIKE '%'||?||'%'
               AND NVL(B.EDU_CD,' ')     LIKE '%'||?||'%'
               AND SEQ_NO LIKE ?
               [1]
          ORDER BY B.EDU_NM
                 , A.SEQ_NO
            ]]>
        </query>
    </sql>


<!--
***********************************************************************
* @USECASE     : EDUH051
* @description : 담당과정운영 - 학습자관리
***********************************************************************
* 2007/02/22      박인이        최초작성.
***********************************************************************
-->
    <!-- 담당과정운영 - 학습자관리 데이터 조회 -->
    <sql name="EDUH051_SHR">
        <description>담당과정운영 - 학습자관리 조회 (신청(주관이 전사인 경우 대상), 수료) </description>
        <query>
            <![CDATA[
           SELECT A.ENO_NO
                , A.name
                , ASNHR.SF_GET_DPTname('01','A4',A.DPT_CD)    AS DPT_NM
                , ASNHR.SF_GET_COMMname('01','A2',A.JOB_CD) AS JOB_NM
                , TO_CHAR(B.IPT_YMD, 'YYYY-MM-DD HH24:MI:SS') AS IPT_YMD
                , B.DECISION_CD
                , ASNHR.SF_GET_COMMname('01', 'Q4', B.DECISION_CD)  AS DECISION_NM
                , A.CET_NO  --주민번호
                , B.EDU_CD  --과정코드
                , ASNHR.SF_GET_COURSEname(B.EDU_CD)       AS EDU_NM --과정명
                , DECODE(B.EDU_TAG,NULL,'미입력',B.EDU_TAG)   AS EDU_TAG --수료여부
             FROM ASNHR.T_CM_EMPLIST A
                , (SELECT ENO_NO
                        , EDU_CD
                        , SEQ_NO
                        , IPT_YMD
                        , NVL(DECISION_CD, 'A') AS DECISION_CD
                        , EDU_TAG
                     FROM ASNHR.T_CM_EDUCATION
                    WHERE EDU_CD = ?
                      AND SEQ_NO = ?
                   ) B
             WHERE A.ENO_NO         = B.ENO_NO
               AND NVL(A.ENO_NO,' ')         LIKE '%'||?||'%'
               AND NVL(A.DPT_CD,' ')         LIKE '%'||?||'%'
               AND NVL(B.DECISION_CD,' ')    LIKE '%'||?||'%'
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUH052
* @description : 담당과정운영 - 일괄등록
***********************************************************************
* 2007/02/27      박인이        최초작성.
***********************************************************************
-->
    <!-- 담당과정운영 - 일괄등록 데이터 건수 조회 -->
    <sql name="EDUH052_SHR">
        <description>담당과정운영 - 일괄등록 데이터 조회</description>
        <query>
            <![CDATA[
   SELECT A.ENO_NO
        , A.name
       -- , A.HEAD_NM
       -- , A.DPT_NM
       -- , A.JOB_NM
        , ASNHR.SF_GET_DPTname(GUBUN, 'B2', HEAD_CD) AS HEAD_NM
        , ASNHR.SF_GET_DPTname('01', 'A4', A.DPT_CD) AS DPT_NM
        , ASNHR.SF_GET_COMMname('01','A2',A.JOB_CD) AS JOB_NM
        , C.EDU_CD
        , C.SEQ_NO          --실적등록이 완료 되었는지 여부 검증
        , NVL2( C.ENO_NO, 'F', 'F') AS IS_PROC -- 무조건 삭제 가능하게 변경(마리나:2008-02-01)
        --, NVL2( C.ENO_NO, '', 'F') AS IS_PROC
        , NVL2( C.ENO_NO, '', 'F') AS IS_PROC_CHK --삭제시 체크하기 위한 용도(혹시 모르니 물어본다)
     FROM ASNHR.T_CM_EMPLIST A
        , ASNHR.T_CM_EDUCATION C
    WHERE A.ENO_NO = C.ENO_NO
      AND C.EDU_CD = ?
      AND C.SEQ_NO = ?

            ]]>
        </query>
    </sql>

    <!-- 사번 조회 -->
    <sql name="EDUH052_EMP">
        <description>사번 조회</description>
        <query>
            <![CDATA[
            SELECT A.ENO_NO
                 , A.ENO_NM
                 , A.HEAD_NM
                 , A.DPT_NM
                 , A.JOB_NM
                 , ? AS EDU_CD
                 , ? AS SEQ_NO
                 , DECODE((SELECT COUNT(*)
                             FROM ASNHR.T_CM_EDUCATION
                            WHERE EDU_CD = ?
                              AND SEQ_NO = ?
                              AND ENO_NO = A.ENO_NO
                          ), '0', 'N', 'Y') AS IS_REQ
              FROM ASNHR.VI_T_CM_PERSON A
             WHERE A.ENO_NO = ?
            ]]>
        </query>
    </sql>

    <!-- 사내강좌신청서 데이터 생성 -->
    <sql name="EDUH052_INS">
        <description>사내강좌신청서 생성</description>
        <query>
            <![CDATA[
            INSERT
              INTO ASNHR.T_CM_EDUCATION
                 ( EDU_CD
                 , SEQ_NO
                 , DECISION_CD
                 , ENO_NO
                 , OCC_CD
                 , DPT_CD
                 , JOB_CD
                 , IPT_MAN
                 , IPT_YMD
                 , UPT_MAN
                 , UPT_YMD
                 , EDU_NM
             	 , STR_YMD
             	 , END_YMD
             	 , EDU_GBN_CD
             	 , PLACE_CD
             	 , CPT_PNT
             	 , INT_NAM )
            SELECT ?
                 , ?
                 , 'A'
                 , ENO_NO
                 , OCC_CD
                 , DPT_CD
                 , JOB_CD
                 , ?
                 , SYSDATE
                 , ?
                 , SYSDATE
                 , B.EDU_NM
             	 , B.EDU_STR_YMD
             	 , B.EDU_END_YMD
             	 , B.EDU_GBN_CD
             	 , B.PLACE_CD
             	 , B.CPT_PNT
             	 , B.INT_NAM
              FROM ASNHR.T_CM_PERSON,T_ED_CHASULIST B
             WHERE ENO_NO = ?
               AND EDU_CD = ?
               AND SEQ_NO = ?
            ]]>
        </query>
    </sql>

    <!-- 사내강좌신청서 데이터 삭제 -->
    <sql name="EDUH052_DEL">
        <description>사내강좌신청서 삭제</description>
        <query>
            <![CDATA[
            DELETE
              FROM ASNHR.T_ED_OBJTLIST
             WHERE EDU_CD   = ?
               AND SEQ_NO   = ?
               AND ENO_NO   = ?
            ]]>
        </query>
    </sql>

    <!-- 실적삭제 -->
    <sql name="EDUH052_DEL2">
        <description>실적삭제</description>
        <query>
            <![CDATA[
            DELETE
              FROM ASNHR.T_CM_EDUCATION
             WHERE EDU_CD   = ?
               AND SEQ_NO   = ?
               AND ENO_NO   = ?
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUH053
* @description : 담당과정운영 - 실적관리
***********************************************************************
* 2007/03/07      박인이        최초작성.
***********************************************************************
-->
    <!-- 담당과정운영 - 실적관리 데이터 조회 -->
    <sql name="EDUH053_SHR_01">
        <description>담당과정운영 - 실적관리 (과정정보) 조회</description>
        <query>
            <![CDATA[
            SELECT A.EDU_CD,                                                                       -- 과정코드
                   B.EDU_NM,																       -- 과정
                   A.SEQ_NO,                                                                       -- SEQ번호
                   SF_GET_COMMname('01', 'Q9', A.PLACE_CD)                       AS PLACE_NM,      -- 교육구분
                   A.EDU_TIT,                                                                      -- 세부과정
                   TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')   AS EDU_STR_YMD,   -- 교육시작일자
                   TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')   AS EDU_END_YMD,   -- 교육종료일자
                   A.INT_NAM,                                                                      -- 교육기관
                   A.COST_AMT,                                                                     -- 소요비용
                   A.FIX_NO,                                                                       -- 인원
                   SF_GET_COMMname('01', 'QA', A.INS_YN)                         AS INS_NM,        -- 환급여부
                   A.COST_AMT - A.RTN_AMT                                        AS SUM_AMT,       -- 실비용
                   B.CONTENT_TXT,                                                                  -- 내용
                   A.COMM_NO                                                                       -- 공통코드번호
            FROM   ASNHR.T_ED_CHASULIST A,
                   ASNHR.T_ED_COURSELIST B
            WHERE  A.EDU_CD = ?
            AND    A.SEQ_NO = ?
            AND    A.EDU_CD = B.EDU_CD

            ]]>
        </query>
    </sql>

    <!-- 담당과정운영 - 실적관리 (사원 리스트) 데이터 조회 -->
    <sql name="EDUH053_SHR_02">
        <description>담당과정운영 - 실적관리 조회</description>
        <query>
            <![CDATA[
       SELECT C.ENO_NO
            , C.name AS ENO_NM
            , ASNHR.SF_GET_DPTname('01', 'A4', C.DPT_CD) AS DPT_NM
            , ASNHR.SF_GET_COMMname('01','A2',C.JOB_CD) AS JOB_NM
            , B.EDU_CD                     -- 과정코드
            , B.SEQ_NO                     -- SEQ_NO
            , C.CET_NO                     -- 주민번호
            , B.APP_VAL                    -- 평가점수
            , B.EDU_TAG                    -- 수료여부
            , DECODE(EDU_TAG, NULL, 'F', 'N', 'F', 'T') AS CONFIRM      --수료확인
            , B.REASON_TAG                 -- 미수료사유
            , B.COMM_NO
            , NVL2(B.ENO_NO, 'Y', 'N') AS IS_INS
         FROM ASNHR.T_CM_EDUCATION B
            , ASNHR.T_CM_EMPLIST C
        WHERE B.ENO_NO     = C.ENO_NO
          AND B.EDU_CD     = ?
          AND B.SEQ_NO     = ?
          AND NVL(C.ENO_NO,' ')     LIKE '%'||?||'%'
          AND NVL(C.DPT_CD,' ')     LIKE '%'||?||'%'
          AND NVL(C.JOB_CD,' ')     LIKE '%'||?||'%'
            ]]>
        </query>
    </sql>

    <!-- 교육사항 등록 -->
    <sql name="EDUH053_SAV">
        <description>실적 등록</description>
        <query>
            <![CDATA[
             MERGE
             INTO ASNHR.T_CM_EDUCATION A
            USING (SELECT A.ENO_NO
                        , A.OCC_CD
                        , A.DPT_CD
                        , A.JOB_CD
                        , B.EDU_CD
                        , B.SEQ_NO
                        , B.PLACE_CD
                        , B.EDU_GBN_CD
                        , B.INT_NAM
                        , B.EDU_STR_YMD
                        , B.EDU_END_YMD
                        , B.COST_AMT
                        , B.CPT_PNT
                        , B.EDU_NM
                        , ?                             AS APP_VAL
                        , ?                             AS EDU_TAG
                        , DECODE(?, 'Y', 'D', 'N', 'G') AS DECISION_CD
                        , ?                             AS REASON_TAG
                        , ?                             AS COMM_NO
                        , ?                             AS SAV_MAN
                     FROM ASNHR.VI_T_CM_PERSON A
                        , ASNHR.T_ED_CHASULIST B
               INNER JOIN ASNHR.T_ED_COURSELIST C
                       ON B.EDU_CD    = C.EDU_CD
               --       AND SUBSTR(B.SEQ_NO, 1, 4) = SUBSTR(C.STR_YMD,1,4)
               --       AND B.COMM_NO = C.COMM_NO
                    WHERE A.ENO_NO    = ?
                      AND B.EDU_CD    = ?
                      AND B.SEQ_NO    = ?
               --       AND B.COMM_NO
                   ) B
               ON (A.ENO_NO     = B.ENO_NO
              AND  A.EDU_CD     = B.EDU_CD
              AND  A.SEQ_NO     = B.SEQ_NO)
             WHEN MATCHED THEN
           UPDATE
              SET PLACE_CD      = B.PLACE_CD
                , EDU_GBN_CD    = B.EDU_GBN_CD
                , INT_NAM       = B.INT_NAM
                , STR_YMD       = B.EDU_STR_YMD
                , END_YMD       = B.EDU_END_YMD
                , EDU_AMT       = B.COST_AMT
                , CPT_PNT       = B.CPT_PNT
                , EDU_NM        = B.EDU_NM
                , APP_VAL       = B.APP_VAL
                , EDU_TAG       = B.EDU_TAG
                , DECISION_CD   = B.DECISION_CD
                , REASON_TAG    = B.REASON_TAG
          --      , COMM_NO       = B.COMM_NO
                , UPT_MAN       = B.SAV_MAN
                , UPT_YMD       = SYSDATE
             WHEN NOT MATCHED THEN
           INSERT
                ( ENO_NO
                , OCC_CD
                , DPT_CD
                , JOB_CD
                , EDU_CD          -- 과정코드 EDU_CD
                , SEQ_NO          -- 순번
                , PLACE_CD        -- 교육장소    '1' : 사내, '2' : 사외, '3' : 인터넷
                , EDU_GBN_CD      -- 교육구분    'AA' : 필수, 'AB' : 선택
                , INT_NAM         -- 교육기관
                , STR_YMD         -- 교육시작일자
                , END_YMD         -- 교육종료일자
                , EDU_AMT         -- 교육비용 COST_AMT
                , CPT_PNT         -- 이수점수 CPT_PNT
                , EDU_NM
                , APP_VAL
                , EDU_TAG
                , DECISION_CD
                , REASON_TAG
          --      , COMM_NO
                , IPT_MAN
                , IPT_YMD
                , UPT_MAN
                , UPT_YMD)
         VALUES ( B.ENO_NO
                , B.OCC_CD
                , B.DPT_CD
                , B.JOB_CD
                , B.EDU_CD
                , B.SEQ_NO
                , B.PLACE_CD
                , B.EDU_GBN_CD
                , B.INT_NAM
                , B.EDU_STR_YMD
                , B.EDU_END_YMD
                , B.COST_AMT
                , B.CPT_PNT
                , B.EDU_NM
                , B.APP_VAL
                , B.EDU_TAG
                , B.DECISION_CD
                , B.REASON_TAG
         --       , B.COMM_NO
                , B.SAV_MAN
                , SYSDATE
                , B.SAV_MAN
                , SYSDATE )
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUH060
* @description : 사내강사관리
***********************************************************************
* 2007/02/28      박인이        최초작성.
***********************************************************************
-->
    <!-- 사내강사관리 데이터 조회 -->
    <sql name="EDUH060_SHR">
        <description>사내강사관리 조회</description>
        <query>
            <![CDATA[
            SELECT CET_NO,                                                                       -- 주민번호
                   LCT_CD,                                                                       -- 강사구분코드
                   SF_GET_COMMname('01', 'Q9', LCT_CD)                            AS LCT_NM,     -- 강사구분
                   LCT_Q5_GBN,                                                                   -- 강사분야코드
                   SF_GET_LCTQ5name(LCT_Q5_GBN)                                   AS LCT_Q5_NM,  -- 강사분야
                   ENO_NM,                                                                       -- 강사명
                  (SELECT SF_GET_DPTname('01', 'A4', DPT_CD) FROM ASNHR.T_CM_PERSON
                   WHERE  GUBUN = '01' AND ENO_NO = A.ENO_NO)                     AS DPT_NM,     -- 소속
                   IPT_MAN,                                                                      -- 등록자사번
                   SF_GET_ENOname('01', IPT_MAN)                                  AS IPT_NM,     -- 등록자
                   TO_CHAR(IPT_YMD, 'YYYY-MM-DD')                                 AS IPT_YMD,    -- 등록일자
                   '실적등록'                                                     AS FUNC,       -- 기능
                   (SELECT COUNT(*) FROM ASNHR.T_ED_LCTRHIST WHERE CET_NO = A.CET_NO)   AS CNT         -- 실적건수
            FROM   ASNHR.T_ED_LCTRLIST A
            WHERE  NVL(LCT_CD,' ')     LIKE '%'||?||'%'
            AND    NVL(LCT_Q5_GBN,' ') LIKE '%'||?||'%'
            AND    NVL(ENO_NM,' ')     LIKE '%'||?||'%'
            ]]>
        </query>
    </sql>

    <!-- 사내강사관리 데이터 삭제 -->
    <sql name="EDUH060_DEL">
        <description>사내강사관리 삭제</description>
        <query>
            <![CDATA[
            DELETE FROM ASNHR.T_ED_LCTRLIST
            WHERE  CET_NO = ?
            ]]>
        </query>
    </sql>

    <!-- 강사실적등록 데이터 삭제 -->
    <sql name="EDUH060_DEL_02">
        <description>해당강사의 강사실적등록 삭제</description>
        <query>
            <![CDATA[
            DELETE FROM ASNHR.T_ED_LCTRHIST
            WHERE  CET_NO = ?
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUH061
* @description : 사내강사관리 등록/수정
***********************************************************************
* 2007/02/28      박인이        최초작성.
***********************************************************************
-->
    <!-- 사내강사관리 데이터 조회 -->
    <sql name="EDUH061_SHR">
        <description>사내강사관리 조회</description>
        <query>
            <![CDATA[
            SELECT LCT_CD,                                                                -- 강사구분코드
                   LCT_Q5_GBN,                                                            -- 강의분야코드
                   ENO_NM,                                                                -- 강사명
                   ENO_NO,                                                                -- 사번 (강사가 임직원인 경우)
                  (SELECT SF_GET_DPTname('01', 'A4', DPT_CD) FROM ASNHR.T_CM_PERSON WHERE GUBUN = '01' AND ENO_NO = A.ENO_NO)
                                                                           AS DPT_NM,     -- 소속
                  (SELECT SF_GET_DPTname('01', 'A2', JOB_CD) FROM ASNHR.T_CM_PERSON WHERE GUBUN = '01' AND ENO_NO = A.ENO_NO)
                                                                           AS JOB_NM,     -- 직위
                   CET_NO,                                                                -- 주민번호
                  (SELECT TO_CHAR(HIR_YMD, 'YYYY-MM-DD') FROM ASNHR.T_CM_PERSON WHERE GUBUN = '01' AND ENO_NO = A.ENO_NO)
                                                                           AS HIR_YMD,    -- 입사일
                   LCT_TXT,                                                               -- 주요강의분야
                   SCH_TXT,                                                               -- 학력/전공분야
                   LIC_TXT,                                                               -- 자격/수상경력
                   ETC_TXT,                                                               -- 저서/기타
                   ADDR_TXT,                                                              -- 주소
                   PHN_NO,                                                                -- 전화번호
                   EM_PHN_NO,                                                             -- 휴대폰
                   E_MAIL1,                                                               -- E-MAIL 1
                   E_MAIL2,                                                               -- E-MAIL 2
                   BANK_TAG,                                                              -- 입금계좌
                   CAR_TAG,                                                               -- 차량정보
                   IPT_MAN,                                                               -- 등록자사번
                   SF_GET_ENOname('01', IPT_MAN)                           AS IPT_NM      -- 등록자
            FROM   ASNHR.T_ED_LCTRLIST A
            WHERE  CET_NO = ?
            ]]>
        </query>
    </sql>

    <!-- 사내강사관리 데이터 생성 -->
    <sql name="EDUH061_INS">
        <description>사내강사관리 생성</description>
        <query>
            <![CDATA[
            INSERT INTO ASNHR.T_ED_LCTRLIST
                  (CET_NO,    ENO_NO,     ENO_NM,    LCT_CD,    LCT_Q5_GBN,
                   LCT_TXT,   SCH_TXT,    LIC_TXT,   ETC_TXT,   ADDR_TXT,
                   PHN_NO,    EM_PHN_NO,  E_MAIL1,   E_MAIL2,   BANK_TAG,
                   CAR_TAG,   IPT_MAN,    IPT_YMD,   UPT_MAN,   UPT_YMD
                  )
            VALUES
                  (?,         ?,          ?,         ?,         ?,
                   ?,         ?,          ?,         ?,         ?,
                   ?,         ?,          ?,         ?,         ?,
                   ?,         ?,         SYSDATE,     ?,         SYSDATE
                  )
            ]]>
        </query>
    </sql>

    <!-- 사내강사관리 데이터 수정 -->
    <sql name="EDUH061_UPT">
        <description>사내강사관리 수정</description>
        <query>
            <![CDATA[
            UPDATE ASNHR.T_ED_LCTRLIST
            SET    ENO_NO      = ?,
                   ENO_NM      = ?,
                   LCT_CD      = ?,
                   LCT_Q5_GBN  = ?,
                   LCT_TXT     = ?,
                   SCH_TXT     = ?,
                   LIC_TXT     = ?,
                   ETC_TXT     = ?,
                   ADDR_TXT    = ?,
                   PHN_NO      = ?,
                   EM_PHN_NO   = ?,
                   E_MAIL1     = ?,
                   E_MAIL2     = ?,
                   BANK_TAG    = ?,
                   CAR_TAG     = ?,
                   UPT_MAN     = ?,
                   UPT_YMD     = SYSDATE
            WHERE  CET_NO      = ?
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUH062
* @description : 강의실적등록
***********************************************************************
* 2007/03/XX      박인이        최초작성.
***********************************************************************
-->
    <!-- 강의실적등록 데이터 조회 -->
    <sql name="EDUH062_SHR">
        <description>강의실적등록 조회</description>
        <query>
            <![CDATA[
            SELECT C.PLACE_CD                                                   AS LCT_CD       -- 강사구분코드
                 , ASNHR.SF_GET_COMMname('01', 'Q9', C.PLACE_CD)                      AS LCT_NM       -- 강사구분
                 , C.FIELD_CD                                                   AS LCT_Q5_GBN   -- 강의분야코드
                 , ASNHR.SF_GET_COMMname('01', 'Q5', C.FIELD_CD)                      AS LCT_Q5_NM    -- 강의분야
                 , C.EDU_CD                                                                     -- 교육과정코드
                 , C.EDU_NM       -- 교육과정
                 , C.SEQ_NO                                                                     -- SEQ번호
                 , C.CET_NO                                                                     -- 주민번호
                 , (SELECT ENO_NM
                      FROM ASNHR.T_ED_LCTRLIST
                     WHERE CET_NO = C.CET_NO
                    )                                                           AS ENO_NM       -- 강사명
                 , NVL(D.LCT_TIME, C.TIME_NO)                                   AS LCT_TIME     -- 강의시간
                 , D.LCT_AMT                                                                    -- 강사료
                 , TO_CHAR(TO_DATE(C.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')  AS LCT_STR_YMD  -- 강의시작일자
                 , TO_CHAR(TO_DATE(C.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')  AS LCT_END_YMD  -- 강의종료일자
                 , TO_CHAR(TO_DATE(C.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')
                    || ' ~ '
                    || TO_CHAR(TO_DATE(C.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')
                                                                                AS LCT_TERM     -- 강의일정
                 , D.CPT_PNT                                                                    -- 이수점수
                 , D.REMARK                                                                     -- 비고
              FROM (SELECT A.EDU_CD
                         , A.SEQ_NO
                         , A.EDU_NM
                         , A.TIME_NO
                         , A.CET_NO
                         , A.FIELD_CD
                         , A.PLACE_CD
                         , A.EDU_STR_YMD
                         , A.EDU_END_YMD
                      FROM ASNHR.T_ED_CHASULIST A
                         , ASNHR.T_ED_COURSELIST B
                     WHERE A.EDU_CD = B.EDU_CD
                         AND A.COMM_NO = B.COMM_NO
                       --AND SUBSTR(A.SEQ_NO, 1, 4) = B.EDU_YY
                       AND A.CET_NO = ?
                    ) C
                 , ASNHR.T_ED_LCTRHIST D
             WHERE C.EDU_CD = D.EDU_CD(+)
               AND C.SEQ_NO = D.SEQ_NO(+)
            ]]>
        </query>
    </sql>

    <!-- 강의실적등록 데이터 생성 -->
    <sql name="EDUH062_SAV">
        <description>강의실적등록 생성</description>
        <query>
            <![CDATA[
            MERGE
             INTO ASNHR.T_ED_LCTRHIST A
            USING (SELECT ?     AS EDU_CD
                        , ?     AS SEQ_NO
                        , ?     AS CET_NO
                        , ?     AS LCT_TIME
                        , ?     AS LCT_TAG
                        , ?     AS LCT_AMT
                        , ?     AS CPT_PNT
                        , ?     AS REMARK
                        , ?     AS IPT_MAN
                     FROM DUAL
                   ) B
               ON (A.EDU_CD = B.EDU_CD
              AND  A.SEQ_NO = B.SEQ_NO)
             WHEN MATCHED THEN
            UPDATE
               SET LCT_TAG = B.LCT_TAG
                 , LCT_AMT = B.LCT_AMT
                 , CPT_PNT = B.CPT_PNT
                 , REMARK  = B.REMARK
                 , UPT_MAN = B.IPT_MAN
                 , UPT_YMD = SYSDATE
             WHEN NOT MATCHED THEN
           INSERT
                ( EDU_CD
                , SEQ_NO
                , CET_NO
                , LCT_TIME
                , LCT_TAG
                , LCT_AMT
                , CPT_PNT
                , REMARK
                , IPT_MAN
                , IPT_YMD
                , UPT_MAN
                , UPT_YMD )
         VALUES ( B.EDU_CD
                , B.SEQ_NO
                , B.CET_NO
                , B.LCT_TIME
                , B.LCT_TAG
                , B.LCT_AMT
                , B.CPT_PNT
                , B.REMARK
                , B.IPT_MAN
                , SYSDATE
                , B.IPT_MAN
                , SYSDATE )
            ]]>
        </query>
    </sql>

    <!-- 강의실적등록 데이터 삭제 -->
    <sql name="EDUH062_DEL">
        <description>강의실적등록 삭제</description>
        <query>
            <![CDATA[
            DELETE FROM ASNHR.T_ED_LCTRHIST
             WHERE EDU_CD  = ?
               AND SEQ_NO  = ?
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUH070
* @description : 학습자지원
***********************************************************************
* 2007/03/12      박인이        최초작성.
***********************************************************************
-->
    <!-- 학습자지원 데이터 조회 -->
    <sql name="EDUH070_SHR">
        <description>학습자지원 조회</description>
        <query>
            <![CDATA[
            SELECT ENO_NO,
                   SF_GET_ENOname(GUBUN, ENO_NO)          AS ENO_NM,
                   SF_GET_DPTname(GUBUN, 'B2', HEAD_CD)   AS HEAD_NM,
                   SF_GET_DPTname(GUBUN, 'A4', DPT_CD)    AS DPT_NM,
                   SF_GET_COMMname(GUBUN,'A2', JOB_CD)    AS JOB_NM,
                   '학습현황'                             AS FUNC
            FROM   ASNHR.T_CM_PERSON
            WHERE  GUBUN  = '01'
            AND    NVL(ENO_NO,' ') LIKE '%'||?||'%'
            AND  ( RET_YMD IS NULL
            OR     RET_YMD >= SYSDATE )
            AND  DPT_CD = NVL(?,DPT_CD)
            AND  JOB_CD = NVL(?,JOB_CD)
            ORDER BY SF_GET_DPTSEQ(GUBUN, 'B2', HEAD_CD),
                     SF_GET_DPTSEQ(GUBUN, 'A4', DPT_CD),
                     SF_GET_COMMSEQ(GUBUN,'A2', JOB_CD)
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUH080
* @description : 예외자관리
***********************************************************************
* 2007/03/06      박인이        최초작성.
***********************************************************************
-->
    <!-- 예외자관리 데이터 조회 -->
    <sql name="EDUH080_SHR">
        <description>예외자관리 조회</description>
        <query>
            <![CDATA[
            SELECT TO_CHAR(TO_DATE(EXCEPTER.STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')  AS STR_YMD
                  ,TO_CHAR(TO_DATE(EXCEPTER.END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')  AS END_YMD
                  ,PERSON.ENO_NO                                    -- 사번
                  ,PERSON.ENO_NM                                    -- 성명
                  ,PERSON.DPT_NM                                    -- 부서명
                  ,PERSON.JOB_NM                                    -- 직위명
                  ,EXC_CD                                           -- 예외구분
                  ,SF_GET_COMMname('01', 'QD', EXC_CD) AS EXC_NM    -- 예외구분명
                  ,CPT_PNT                                          -- 이수점수
                  ,EXCEPTER.REMARK
              FROM ASNHR.T_ED_EXCEPTER EXCEPTER
   LEFT OUTER JOIN ASNHR.VI_T_CM_PERSON2 PERSON
                ON EXCEPTER.ENO_NO = PERSON.ENO_NO
             WHERE STR_YMD BETWEEN ? AND ?
               AND NVL(EXCEPTER.ENO_NO,' ') LIKE '%'||?||'%'
               AND NVL(EXCEPTER.EXC_CD,' ') LIKE '%'||?||'%'
          ORDER BY PERSON.DPT_SEQ, PERSON.JOB_SEQ, PERSON.HOB_SEQ DESC, PERSON.HIRG_YMD, PERSON.ENO_NO, STR_YMD
            ]]>
        </query>
    </sql>

    <!-- 예외자관리 데이터 삭제 -->
    <sql name="EDUH080_DEL">
        <description>예외자관리 삭제</description>
        <query>
            <![CDATA[
            DELETE FROM ASNHR.T_ED_EXCEPTER
            WHERE  STR_YMD = ?
            AND    ENO_NO  = ?
            ]]>
        </query>
    </sql>


<!--
***********************************************************************
* @USECASE     : EDUH081
* @description : 예외자관리_신규등록
***********************************************************************
* 2007/03/06      박인이        최초작성.
***********************************************************************
-->
    <!-- 예외자관리_신규등록 데이터 조회 -->
    <sql name="EDUH081_SHR">
        <description>예외자관리_신규등록 조회</description>
        <query>
            <![CDATA[
            SELECT TO_CHAR(TO_DATE(STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')  AS STR_YMD,-- 시작일
                   TO_CHAR(TO_DATE(END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')  AS END_YMD,-- 종료일
                   ENO_NO,                                        -- 사번
                   SF_GET_ENOname('01', ENO_NO)     AS ENO_NM,    -- 성명
                   EXC_CD,                                        -- 예외구분
                   REMARK,                                        -- 비고
                   CPT_PNT                                        -- 이수점수
            FROM   ASNHR.T_ED_EXCEPTER
            WHERE  STR_YMD = ?
            AND    ENO_NO = ?
            ]]>
        </query>
    </sql>


    <!-- 예외자관리_신규등록 데이터 생성 -->
    <sql name="EDUH081_INS">
        <description>예외자관리_신규등록 생성</description>
        <query>
            <![CDATA[
            INSERT INTO ASNHR.T_ED_EXCEPTER
                  (STR_YMD, END_YMD, ENO_NO, EXC_CD, REMARK, CPT_PNT, IPT_MAN, IPT_YMD, UPT_MAN, UPT_YMD
                  )
            VALUES
                  (?,       ?,       ?,      ?,      ?,      ?,       ?,       SYSDATE, ?,       SYSDATE
                  )
            ]]>
        </query>
    </sql>

    <!-- 예외자관리_신규등록 데이터 수정 -->
    <sql name="EDUH081_UPT">
        <description>예외자관리_신규등록 수정</description>
        <query>
            <![CDATA[
            UPDATE ASNHR.T_ED_EXCEPTER
            SET    END_YMD = ?,
                   EXC_CD  = ?,
                   REMARK  = ?,
                   CPT_PNT = ?,
                   UPT_MAN = ?,
                   UPT_YMD = SYSDATE
            WHERE  STR_YMD = ?
            AND    ENO_NO  = ?
            ]]>
        </query>
    </sql>


<!--
***********************************************************************
* @USECASE     : EDUH090
* @description : 고용보험관리
***********************************************************************
* 2007/03/08      박인이        최초작성.
***********************************************************************
-->
    <!-- 고용보험관리 데이터 조회 -->
    <sql name="EDUH090_SHR">
        <description>고용보험관리 조회</description>
        <query>
            <![CDATA[
            SELECT D.EDU_CD
                 , ASNHR.SF_GET_COURSEname(D.EDU_CD)          AS EDU_NM
                 , D.SEQ_NO
                 , TO_CHAR(TO_DATE(C.EDU_STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')
                    || ' ~ '
                    || TO_CHAR(TO_DATE(C.EDU_END_YMD, 'YYYYMMDD'), 'YYYY-MM-DD') AS EDU_TERM
                 , (SELECT COUNT(*)
                      FROM ASNHR.T_CM_EDUCATION
                     WHERE EDU_CD = D.EDU_CD
                       AND SEQ_NO = D.SEQ_NO
                       AND DECISION_CD = 'D'
                    )   AS PAS_CNT
                 , RTN_EXPT_AMT
                 , RTN_RQST_AMT
                 , INS_E_AMT
                 , ASNHR.SF_GET_ENOname('01', C.ENO_NO)                 AS ENO_NM
                 , '수료명부'                                     AS FUNC
              FROM (SELECT A.EDU_CD
                         , A.SEQ_NO
                         , A.EDU_STR_YMD
                         , A.EDU_END_YMD
                         , B.ENO_NO
                      FROM ASNHR.T_ED_CHASULIST A
                         , ASNHR.T_ED_COURSELIST B
                     WHERE NVL(A.FIELD_CD,' ')       LIKE '%'||?||'%'
                       AND NVL(A.SHAPE_CD,' ')       LIKE '%'||?||'%'
                       AND NVL(A.EDU_STR_YMD,' ')    LIKE '%'||?||'%'
                       [1]
                       AND NVL(A.EDU_CD,' ')         LIKE '%'||?||'%'
                       AND NVL(B.ENO_NO,' ')         LIKE '%'||?||'%'
                       AND A.EDU_CD         = B.EDU_CD
                       AND SUBSTR(A.SEQ_NO,1,4) = B.EDU_YY
                       AND A.INS_YN         = 'Y'           --고용보험 적용
                    ) C
                 , ASNHR.T_ED_INSURANCE D
             WHERE C.EDU_CD = D.EDU_CD
               AND C.SEQ_NO = D.SEQ_NO
            ]]>
        </query>
    </sql>

    <!-- 고용보험관리 데이터 삭제 -->
    <sql name="EDUH090_DEL">
        <description>고용보험관리 삭제</description>
        <query>
            <![CDATA[
            DELETE FROM ASNHR.T_ED_INSURANCE
            WHERE  EDU_CD = ?
            AND    SEQ_NO = ?
            ]]>
        </query>
    </sql>


<!--
***********************************************************************
* @USECASE     : EDUH091
* @description : 고용보험관리_신규등록
***********************************************************************
* 2007/03/08      박인이        최초작성.
***********************************************************************
-->
    <!-- 고용보험관리_신규등록 하기전 해당 자료가 고용보험 적용자료가 아닌지 여부 체크 -->
    <sql name="EDUH091_SHR_CHK">
        <description>고용보험관리_신규등록 생성</description>
        <query>
            <![CDATA[
            SELECT NVL(INS_YN, 'N') AS INS_YN
              FROM ASNHR.T_ED_CHASULIST
             WHERE EDU_CD   = ?
               AND SEQ_NO   = ?
            ]]>
        </query>
    </sql>


    <!-- 고용보험관리_신규등록 데이터 조회 -->
    <sql name="EDUH091_SHR_01">
        <description>고용보험관리_신규등록 조회</description>
        <query>
            <![CDATA[
            SELECT D.EDU_CD,                                                        -- 과정코드
                   D.SEQ_NO,                                                        -- SEQ번호
                   C.EDU_NM,                                                        -- 과정
                   C.CHASU_TAG,                                                     -- 차수
                   C.ENO_NO,                                                        -- 사번
                   C.ENO_NM,                                                        -- 성명
                   C.EDU_GBN_CD,                                                    -- 교육구분
                   C.MNGER_CD,                                                      -- 교육주관
                   C.FIELD_CD,                                                      -- 교육분야
                   C.SHAPE_CD,                                                      -- 교육형태
                   C.PLACE_TAG,                                                     -- 교육장소
                   C.EDU_STR_YMD,                                                   -- 교육시작일자
                   C.EDU_END_YMD,                                                   -- 교육종료일자
                   C.TIME_NO,                                                       -- 교육시간
                   C.FIX_NO,                                                        -- 교육정원
                   C.REQ_NO,                                                        -- 교육신청인원
                   C.OBJ_NO,                                                        -- 교육대상인원
                   C.PAS_NO,                                                        -- 교육수료인원
                   D.ESATIS_TAG,                                                    -- 과정만족도
                   D.LSATIS_TAG,                                                    -- 강사만족도
                   D.EDU_TAG,                                                       -- 교육량
                   D.BUDGET_AMT,                                                    -- 교육예산
                   D.EXPENSE_AMT,                                                   -- 교육비용
                   C.INS_YN,                                                        -- 고용보험환급여부
                   D.RTN_EXPT_AMT,                                                  -- 환급예상액
                   D.INS_E_AMT,                                                     -- 환급실행금액
                   D.EDUCODE_TAG,                                                   -- 훈련코드
                   D.INS_TIME,                                                      -- 환급시간
                   D.P_EDU_AMT,                                                     -- 인당훈련비
                   D.TBL_UNIT_AMT,                                                  -- 조견표단가
                   D.APRV_BL_AMT,                                                   -- 인정숙식비
                   D.P_AID_AMT,                                                     -- 인당지원금
                   D.RTN_RQST_AMT,                                                  -- 환급요청액
                   TO_CHAR(D.RTN_RQST_YMD, 'YYYY-MM-DD')          AS RTN_RQST_YMD,  -- 환급요청일
                   TO_CHAR(D.RTN_EXEC_YMD, 'YYYY-MM-DD')          AS RTN_EXEC_YMD,  -- 환급실행일
                   D.BLCTRI_AMT,                                                    -- 사내강사료(예산)
                   D.BLCTRO_AMT,                                                    -- 사외강사료(예산)
                   D.BBOOK_AMT,                                                     -- 교재대(예산)
                   D.BSTAT_AMT,                                                     -- 문구대(예산)
                   D.BDRINK_AMT,                                                    -- 음료대(예산)
                   D.BDVLP_AMT,                                                     -- 개발/도업비(예산)
                   D.BPLAC_AMT,                                                     -- 강의장임차(예산)
                   D.BBUS_AMT,                                                      -- 버스임차(예산)
                   D.BLODG_AMT,                                                     -- 숙박비(예산)
                   D.BMEAL_AMT,                                                     -- 식비(예산)
                   D.BCOMT_AMT,                                                     -- 위탁교육비(예산)
                   D.BETC_AMT,                                                      -- 기타(예산)
                   D.ELCTRI_AMT,                                                    -- 사내강사료(집행)
                   D.ELCTRO_AMT,                                                    -- 사외강사료(집행)
                   D.EBOOK_AMT,                                                     -- 교재대(집행)
                   D.ESTAT_AMT,                                                     -- 문구대(집행)
                   D.EDRINK_AMT,                                                    -- 음료대(집행)
                   D.EDVLP_AMT,                                                     -- 개발/도업비(집행)
                   D.EPLAC_AMT,                                                     -- 강의장임차(집행)
                   D.EBUS_AMT,                                                      -- 버스임차(집행)
                   D.ELODG_AMT,                                                     -- 숙박비(집행)
                   D.EMEAL_AMT,                                                     -- 식비(집행)
                   D.ECOMT_AMT,                                                     -- 위탁교육비(집행)
                   D.EETC_AMT                                                       -- 기타(집행)
            FROM ( SELECT A.EDU_CD,
                          A.SEQ_NO,
                          SF_GET_COURSEname(A.EDU_CD)                       AS EDU_NM,
                          A.SEQ_NO                                                    AS CHASU_TAG,
                          B.ENO_NO,
                          SF_GET_ENOname('01', B.ENO_NO)                              AS ENO_NM,
                          A.EDU_GBN_CD,
                          A.MNGER_CD,
                          A.FIELD_CD,
                          A.SHAPE_CD,
                          A.PLACE_TAG,
                          TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS EDU_STR_YMD,
                          TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS EDU_END_YMD,
                          A.TIME_NO,
                          A.FIX_NO,
                         (SELECT COUNT(*) FROM ASNHR.T_CM_EDUCATION WHERE EDU_CD = A.EDU_CD AND SEQ_NO = A.SEQ_NO)
                                                                                      AS REQ_NO,
                         (SELECT COUNT(*) FROM ASNHR.T_ED_OBJTLIST WHERE EDU_CD = A.EDU_CD AND SEQ_NO = A.SEQ_NO)
                                                                                      AS OBJ_NO,
                         (SELECT COUNT(*) FROM ASNHR.T_CM_EDUCATION WHERE EDU_CD = A.EDU_CD AND SEQ_NO = A.SEQ_NO AND DECISION_CD = 'D')
                                                                                      AS PAS_NO,
                          A.INS_YN,
                          A.RTN_AMT
                   FROM   ASNHR.T_ED_CHASULIST A,
                          ASNHR.T_ED_COURSELIST B
                   WHERE  A.EDU_CD  = ?
                   AND    A.SEQ_NO  = ?
                   AND    A.EDU_CD  = B.EDU_CD
                 ) C,
                   ASNHR.T_ED_INSURANCE D
            WHERE  C.EDU_CD = D.EDU_CD
            AND    C.SEQ_NO = D.SEQ_NO
            ]]>
        </query>
    </sql>

    <!-- 과정명/차수에 해당하는 교육과정정보 데이터 조회 -->
    <sql name="EDUH091_SHR_02">
        <description>과정명/차수에 해당하는 교육과정정보 조회</description>
        <query>
            <![CDATA[
            SELECT A.EDU_CD,                                                                    -- 과정코드
                   A.SEQ_NO,                                                                    -- SEQ번호
                   SF_GET_COURSEname(A.EDU_CD)                       AS EDU_NM,       -- 과정명
                   A.SEQ_NO AS CHASU_TAG,                                                       -- 차수명
                   B.ENO_NO,                                                                    -- 사번
                   SF_GET_ENOname('01', B.ENO_NO)                              AS ENO_NM,       -- 성명
                   A.EDU_GBN_CD,                                                                -- 교육구분
                   A.MNGER_CD,                                                                  -- 교육주관
                   A.FIELD_CD,                                                                  -- 교육분야
                   A.SHAPE_CD,                                                                  -- 교육형태
                   A.PLACE_TAG,                                                                 -- 교육장소
                   TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS EDU_STR_YMD,  -- 교육시작일자
                   TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS EDU_END_YMD,  -- 교육종료일자
                   A.TIME_NO,                                                                   -- 교육시간
                   A.FIX_NO,                                                                    -- 교육정원
                  (SELECT COUNT(*) FROM ASNHR.T_CM_EDUCATION WHERE EDU_CD = A.EDU_CD AND SEQ_NO = A.SEQ_NO)
                                                                               AS REQ_NO,       -- 교육신청인원
                  (SELECT COUNT(*) FROM ASNHR.T_ED_OBJTLIST WHERE EDU_CD = A.EDU_CD AND SEQ_NO = A.SEQ_NO)
                                                                               AS OBJ_NO,       -- 교육대상인원
                  (SELECT COUNT(*) FROM ASNHR.T_CM_EDUCATION WHERE EDU_CD = A.EDU_CD AND SEQ_NO = A.SEQ_NO AND DECISION_CD = 'D')
                                                                               AS PAS_NO,       -- 교육수료인원
                   A.INS_YN,                                                                    -- 고용보험
                   A.RTN_AMT,                                                                   -- 환급예상액
                  (SELECT COUNT(*) FROM ASNHR.T_ED_INSURANCE WHERE EDU_CD = A.EDU_CD AND SEQ_NO = A.SEQ_NO)
                                                                               AS CNT           -- 과정명/차수에 대한 고용보험정보 존재여부
            FROM   ASNHR.T_ED_CHASULIST A,
                   ASNHR.T_ED_COURSELIST B
            WHERE  A.EDU_CD    = ?
            AND    A.SEQ_NO = ?
            AND    A.EDU_CD    = B.EDU_CD
            AND SUBSTR(A.SEQ_NO,1,4) = B.EDU_YY
            ]]>
        </query>
    </sql>


    <!-- 고용보험관리_신규등록 데이터 생성 -->
    <sql name="EDUH091_INS">
        <description>고용보험관리_신규등록 생성</description>
        <query>
            <![CDATA[
            INSERT INTO ASNHR.T_ED_INSURANCE
                 ( EDU_CD,       SEQ_NO,       ESATIS_TAG, LSATIS_TAG,   EDU_TAG,     BUDGET_AMT, EXPENSE_AMT,  INS_E_AMT,
                   EDUCODE_TAG,  INS_TIME,     P_EDU_AMT,  TBL_UNIT_AMT, APRV_BL_AMT, P_AID_AMT,  RTN_EXPT_AMT, RTN_RQST_AMT,
                   RTN_RQST_YMD, RTN_EXEC_YMD, BLCTRI_AMT, BLCTRO_AMT,   BBOOK_AMT,   BSTAT_AMT,  BDRINK_AMT,   BDVLP_AMT,
                   BPLAC_AMT,    BBUS_AMT,     BLODG_AMT,  BMEAL_AMT,    BCOMT_AMT,   BETC_AMT,   ELCTRI_AMT,   ELCTRO_AMT,
                   EBOOK_AMT,    ESTAT_AMT,    EDRINK_AMT, EDVLP_AMT,    EPLAC_AMT,   EBUS_AMT,   ELODG_AMT,    EMEAL_AMT,
                   ECOMT_AMT,    EETC_AMT,     IPT_MAN,    IPT_YMD,      UPT_MAN,     UPT_YMD
                 )
            VALUES
                 ( ?,            ?,            ?,          ?,            ?,           ?,          ?,           ?,
                   ?,            ?,            ?,          ?,            ?,           ?,          ?,           ?,
                   ?,            ?,            ?,          ?,            ?,           ?,          ?,           ?,
                   ?,            ?,            ?,          ?,            ?,           ?,          ?,           ?,
                   ?,            ?,            ?,          ?,            ?,           ?,          ?,           ?,
                   ?,            ?,            ?,          SYSDATE,      ?,           SYSDATE
                 )
            ]]>
        </query>
    </sql>

    <!-- 고용보험관리_신규등록 데이터 수정 -->
    <sql name="EDUH091_UPT">
        <description>고용보험관리_신규등록 수정</description>
        <query>
            <![CDATA[
            UPDATE ASNHR.T_ED_INSURANCE
            SET    ESATIS_TAG   = ?,
                   LSATIS_TAG   = ?,
                   EDU_TAG      = ?,
                   BUDGET_AMT   = ?,
                   EXPENSE_AMT  = ?,
                   INS_E_AMT    = ?,
                   EDUCODE_TAG  = ?,
                   INS_TIME     = ?,
                   P_EDU_AMT    = ?,
                   TBL_UNIT_AMT = ?,
                   APRV_BL_AMT  = ?,
                   P_AID_AMT    = ?,
                   RTN_EXPT_AMT = ?,
                   RTN_RQST_AMT = ?,
                   RTN_RQST_YMD = ?,
                   RTN_EXEC_YMD = ?,
                   BLCTRI_AMT   = ?,
                   BLCTRO_AMT   = ?,
                   BBOOK_AMT    = ?,
                   BSTAT_AMT    = ?,
                   BDRINK_AMT   = ?,
                   BDVLP_AMT    = ?,
                   BPLAC_AMT    = ?,
                   BBUS_AMT     = ?,
                   BLODG_AMT    = ?,
                   BMEAL_AMT    = ?,
                   BCOMT_AMT    = ?,
                   BETC_AMT     = ?,
                   ELCTRI_AMT   = ?,
                   ELCTRO_AMT   = ?,
                   EBOOK_AMT    = ?,
                   ESTAT_AMT    = ?,
                   EDRINK_AMT   = ?,
                   EDVLP_AMT    = ?,
                   EPLAC_AMT    = ?,
                   EBUS_AMT     = ?,
                   ELODG_AMT    = ?,
                   EMEAL_AMT    = ?,
                   ECOMT_AMT    = ?,
                   EETC_AMT     = ?,
                   UPT_MAN      = ?,
                   UPT_YMD      = SYSDATE
            WHERE  EDU_CD       = ?
            AND    SEQ_NO       = ?
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUH092
* @description : 고용보험관리_수료명부
***********************************************************************
* 2007/03/08      박인이        최초작성.
***********************************************************************
-->
    <!-- 고용보험관리 데이터 조회 -->
    <sql name="EDUH092_SHR">
        <description>고용보험관리_수료명부 조회</description>
        <query>
            <![CDATA[
            SELECT ENO_NO,
                   STR_YMD,
                   SF_GET_ENOname('01', ENO_NO)         AS ENO_NM,
                   SF_GET_DPTname('01', 'A4', DPT_CD)   AS DPT_NM,
                   SF_GET_COMMname('01', 'A2', JOB_CD)  AS JOB_NM
            FROM   ASNHR.T_CM_EDUCATION
            WHERE  EDU_CD      = ?
            AND    SEQ_NO      = ?
            AND    EDU_TAG     = 'Y'
            AND    DECISION_CD = 'D'
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUI010
* @description :  교육사항
***********************************************************************
* 2007/03/28      방석호        최초작성.
* 2007/05/09      김학수        수정.
* 2007/05/30      이승욱        EDUI020과 통합작업
***********************************************************************
-->
    <!-- 교육사항 -->
    <sql name="EDUI010_SHR">
        <description>교육사항</description>
        <query>
            <![CDATA[
          SELECT ENO_NO
               , DPT_CD
               , JOB_CD
               , ASNHR.SF_GET_ENOname(  '01', ENO_NO)             AS ENO_NM
               , DECODE(SF_GET_DPTname('01', 'A4', DPT_CD), DPT_CD, DECODE(SF_GET_DPTname('01', 'A6', DPT_CD), DPT_CD, ASNHR.SF_GET_DPTname('01', 'B2', DPT_CD), ASNHR.SF_GET_DPTname('01', 'A6', DPT_CD)) , ASNHR.SF_GET_DPTname('01', 'A4', DPT_CD))    AS DPT_NM      -- 소속명
               , ASNHR.SF_GET_COMMname( '01', 'A2', JOB_CD)       AS JOB_NM

               , TO_CHAR(TO_DATE(STR_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')
                  || ' ~ '
                  || TO_CHAR(TO_DATE(END_YMD, 'YYYYMMDD'), 'YYYY-MM-DD')
                                                              AS EDU_TERM     -- 교육기간

               , PLACE_CD
               , EDU_CD
               , DECISION_CD
               , ASNHR.SF_GET_COMMname( '01', 'Q9', PLACE_CD)     AS PLACE_NM     -- 교육구분
               , EDU_NM       -- 과정명
               , ASNHR.SF_GET_COMMname( '01', 'Q4', DECISION_CD)  AS DECISION_NM  -- 수강상태
               , INT_NAM                                                    -- 시행처
               , CPT_PNT                                                    -- 인정점수
               , EDU_AMT                                                   -- 교육비
               , APP_VAL                                                    -- 평가점수
               , REMARK                                                     -- 비고
               FROM ASNHR.T_CM_EDUCATION A
               WHERE NVL(A.EDU_CD,' ') LIKE '%'||?||'%'
               AND NVL(A.OCC_CD,' ') LIKE '%'||?||'%'
               AND NVL(A.DPT_CD,' ') LIKE '%'||?||'%'
               AND NVL(A.JOB_CD,' ') LIKE '%'||?||'%'
               AND NVL(A.FIELD_CD,' ') LIKE '%'||?||'%'
               [1]
          ORDER BY SF_GET_DPTSEQ(   '01', 'A4', A.DPT_CD)
                 , ASNHR.SF_GET_COMMSEQ(  '01', 'A2', A.JOB_CD)
                 , A.EDU_CD
                 , A.ENO_NO
                 , A.STR_YMD DESC
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUI020
* @description :  교육사항 - 교육비 지급현황
***********************************************************************
* 2007/05/09      김학수        최초작성.
***********************************************************************
-->
    <!-- 교육비 지급현황 -->
    <sql name="EDUI020_SHR">
        <description>교육비 지급 현황 조회</description>
        <query>
            <![CDATA[
			SELECT [1]								   SORT1		--부서
				 , [2]								   SORT2		--직위
				 , AA.ENO_NM								   ENO_NM		--성명
				 , ASNHR.SF_GET_COURSEname(BB.EDU_CD)      EDU_NM		--과정명
				 , AA.EDU_STR_YMD||' ~ '||AA.EDU_END_YMD	   YMD_VAL		--교육기간
	             , EDU_AMT                                     EDU_AMT      --교육비
				 , AA.REMARK								   REMARK		--비고
			FROM (SELECT B.DPT_NM
			           , B.JOB_NM
			           , B.ENO_NM
			           , A.SBJ_CD
			           , A.EDU_TAG
			           , A.INT_NAM
			           , A.CPT_NO
			           , A.APP_VAL
			           , A.REMARK
			           , A.EDU_AMT
			           , B.DPT_SEQ
			           , B.JOB_SEQ
					   , TO_CHAR(TO_DATE(C.EDU_STR_YMD,'YYYY/MM/DD'),'YYYY/MM/DD')	   EDU_STR_YMD
					   , TO_CHAR(TO_DATE(C.EDU_END_YMD,'YYYY/MM/DD'),'YYYY/MM/DD')	   EDU_END_YMD
					FROM ASNHR.T_CM_EDUCATION A, ASNHR.VI_T_CM_PERSON B , ASNHR.T_ED_CHASULIST C
				   WHERE A.ENO_NO = B.ENO_NO
					 AND STR_YMD >= ?
					 AND STR_YMD <= ?
					 AND A.SBJ_CD = C.EDU_CD
					 AND A.SEQ_NO = C.SEQ_NO

					 AND NVL(A.OCC_CD,' ') LIKE '%'||?||'%'
					 AND NVL(B.DPT_CD,' ') LIKE '%'||?||'%'
					 AND NVL(B.JOB_CD,' ') LIKE '%'||?||'%'
					 AND NVL(A.SBJ_CD,' ') LIKE '%'||?||'%'

				 ) AA, ASNHR.T_ED_COURSELIST BB
			WHERE AA.SBJ_CD = BB.EDU_CD
            ORDER BY AA.JOB_SEQ
			       , AA.DPT_SEQ
				   , ENO_NO
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUI030
* @description :  교육 대상자 현황
***********************************************************************
* 2007/05/10      김학수        최초작성.
***********************************************************************
-->
    <!-- 교육 대상자 현황 조회-->
    <sql name="EDUI030_SHR">
        <description>교육 대상자 현황</description>
        <query>
            <![CDATA[
            SELECT A.ENO_NO
                 , A.DPT_CD
                 , A.JOB_CD
                 , A.EDU_CD
                 , ASNHR.SF_GET_ENOname(  '01', A.ENO_NO)             AS ENO_NM
                 , ASNHR.SF_GET_DPTname(  '01', 'A4', A.DPT_CD)       AS DPT_NM
                 , ASNHR.SF_GET_COMMname( '01', 'A2', A.JOB_CD)       AS JOB_NM
                 , ASNHR.SF_GET_COURSEname(A.EDU_CD)       AS EDU_NM       -- 과정명
                 , TO_CHAR(D.HIRG_YMD, 'YYYY/MM/DD')            AS HIRG_YMD
                 , TO_CHAR(D.JPR_YMD , 'YYYY/MM/DD')            AS JPR_YMD

                 , CASE
                   WHEN SUBSTR(D.JPR_YMD,5,2) IN ('01', '02')
                    AND D.JOB_CD IN ('40', '4A', '4B', '50', '5A', '5B')
                   THEN TO_CHAR(TRUNC(MONTHS_BETWEEN(TO_DATE(?, 'YYYYMMDD'), TO_DATE(TO_CHAR(D.JPR_YMD,'YYYYMMDD'), 'YYYYMMDD')+2)/12) + 1,'FM90')
                   ELSE TO_CHAR(TRUNC(MONTHS_BETWEEN(TO_DATE(?, 'YYYYMMDD'), TO_DATE(TO_CHAR(D.JPR_YMD,'YYYYMMDD'), 'YYYYMMDD')  )/12) + 1,'FM90')
                    END AS CHASU     --년차수

                 , CASE
                   WHEN D.JOB_CD IN ('40', '4A', '4B', '50', '5A', '5B')
                    AND D.HIR_CD = '27'
                   THEN '경력'
                    END AS HIR_DESC
                 , HIR_CD
              FROM (SELECT D.EDU_CD
                         , D.SEQ_NO
                         , E.ENO_NO
                         , E.OCC_CD
                         , E.DPT_CD
                         , E.JOB_CD
                         , D.COMM_NO
                         , D.ENT_STR_YMD
                         , D.ENT_END_YMD
                         , D.EDU_STR_YMD
                         , D.EDU_END_YMD
                         , E.DECISION_CD
                         , E.CPT_PNT
                         , E.APP_VAL
                         , E.EDU_AMT
                         , E.REMARK
                      FROM ASNHR.T_ED_CHASULIST D
                         , ASNHR.T_CM_EDUCATION E
                     WHERE D.EDU_CD = E.EDU_CD(+)
                       AND D.SEQ_NO = E.SEQ_NO(+)
                    ) A
                 , ASNHR.T_ED_COURSELIST B
                 , ASNHR.T_ED_CHASULIST C
                 , ASNHR.VI_T_CM_PERSON D
             WHERE  A.EDU_CD                = B.EDU_CD
               AND A.SEQ_NO                 = C.SEQ_NO
               AND A.EDU_CD                 = C.EDU_CD
               AND A.ENO_NO                 = D.ENO_NO
               AND NVL(A.EDU_CD,' ')                 LIKE '%'||?||'%'
               AND NVL(A.OCC_CD,' ')                 LIKE '%'||?||'%'
               AND NVL(A.DPT_CD,' ')                 LIKE '%'||?||'%'
               AND NVL(A.JOB_CD,' ')                 LIKE '%'||?||'%'
          ORDER BY SF_GET_DPTSEQ(   '01', 'A4', A.DPT_CD)
                 , ASNHR.SF_GET_COMMSEQ(  '01', 'A2', A.JOB_CD)
                 , A.EDU_CD
                 , A.ENO_NO
                 , B.STR_YMD DESC
            ]]>
        </query>
    </sql>

<!--
***********************************************************************
* @USECASE     : EDUJ010
* @description : 교육관리 관련 코드관리
***********************************************************************
* 2007/02/20     박인이
***********************************************************************
-->
    <!-- 코드,코드명에 따른 데이터 조회 -->
    <sql name="EDUJ010_SHR">
        <description>교육관리관련코드 검색</description>
        <query>
            <![CDATA[
            SELECT COMM_CD,
                   COMM_NM
            FROM   ASNHR.T_CM_COMMON
            WHERE  GUBUN = ?
            AND    CD_GBN = '**'
            AND    ( COMM_CD = 'Q1'
            OR       COMM_CD = 'Q2'
            OR       COMM_CD = 'Q3'
            OR       COMM_CD = 'Q4'
            OR       COMM_CD = 'Q5'
            OR       COMM_CD = 'Q6'
            OR       COMM_CD = 'Q7'
            OR       COMM_CD = 'Q8'
            OR       COMM_CD = 'Q9'
            OR       COMM_CD = 'QA'
            OR       COMM_CD = 'QB' )
            AND    ( NVL(COMM_CD,' ') LIKE '%'||?||'%'
            OR       NVL(COMM_NM,' ') LIKE '%'||?||'%' )
            ]]>
        </query>
    </sql>

    <!-- 코드에 따른 교육관리관련 코드관리 상세 데이터 조회 -->
    <sql name="EDUJ010_SHR_01">
        <description>교육관리관련코드 상세 검색</description>
        <query>
            <![CDATA[
            SELECT CD_GBN,
                   COMM_CD,
                   COMM_NM,                                             --공통코드 명칭
                   COMM_NM2,                                            --공통코드 명칭2
                   SORT_NO,                                             --DISPLAY SORTING 순서
                   EXT_01,                                              --기타 항목1
                   EXT_02,                                              --기타 항목2
                   EXT_03,                                              --기타 항목3
                   EXT_04,                                              --기타 항목4
                   OTH_DEC,                                             --기타 비고사항
                   TO_CHAR(END_YMD, 'YYYY-MM-DD') AS END_YMD            --코드 사용기간(종료,폐기일)
            FROM   ASNHR.T_CM_COMMON
            WHERE  GUBUN  = ?
            AND    CD_GBN = ?
            ]]>
        </query>
    </sql>

    <!-- 교육관리관련코드 신규 저장 -->
    <sql name="EDUJ010_INS">
        <description>교육관리관련코드 상세 등록</description>
        <query>
            <![CDATA[
            INSERT INTO ASNHR.T_CM_COMMON
                 ( GUBUN,  CD_GBN,  COMM_CD, COMM_NM, COMM_NM2, SORT_NO, EXT_01,  EXT_02, EXT_03,
                   EXT_04, OTH_DEC, STR_YMD, END_YMD, IPT_MAN,  IPT_YMD, UPT_MAN, UPT_YMD
                 )
            VALUES
                 ( ?,      ?,       ?,       ?,       ?,        ?,       ?,       ?,      ?,
                   ?,      ?,       SYSDATE, ?,       ?,        SYSDATE, ?,       SYSDATE
                 )
            ]]>
        </query>
    </sql>

    <!-- 교육관리관련코드 수정 -->
    <sql name="EDUJ010_UPT">
        <description>교육관리관련코드 상세 수정</description>
        <query>
            <![CDATA[
            UPDATE ASNHR.T_CM_COMMON
            SET    COMM_NM  = ?,                      --공통코드 명칭
                   COMM_NM2 = ?,                      --공통코드 명칭2
                   SORT_NO  = ?,                      --DISPLAY SORTING 순서
                   EXT_01   = ?,                      --기타 항목1
                   EXT_02   = ?,                      --기타 항목2
                   EXT_03   = ?,                      --기타 항목3
                   EXT_04   = ?,                      --기타 항목4
                   OTH_DEC  = ?,                      --기타 비고사항
                   END_YMD  = ?,                      --코드 사용기간(종료,폐기일)
                   UPT_MAN  = ?,                      --최종 수정자
                   UPT_YMD  = SYSDATE                 --최종 수정일시
            WHERE  GUBUN    = ?                       --회계 단위
            AND    CD_GBN   = ?                       --공통 코드 구분
            AND    COMM_CD  = ?                       --공통 코드
            ]]>
        </query>
    </sql>

    <!-- 교육관리관련코드 삭제 -->
    <sql name="EDUJ010_DEL">
        <description>교육관리관련코드 상세 삭제</description>
        <query>
            <![CDATA[
            DELETE ASNHR.T_CM_COMMON
            WHERE  GUBUN   = ?
            AND    CD_GBN  = ?
            AND    COMM_CD = ?
            ]]>
        </query>
    </sql>

<!-- 현재 미사용 메뉴(2008.07.17)  -->
<!--
***********************************************************************
* @USECASE     : EDUH100
* @description : 실적현황관리
***********************************************************************
* 2007/05/02     김학수
***********************************************************************
-->

    <!-- 과정운영 데이터 조회 -->
    <sql name="EDUH100_SHR">
        <description>담당과정운영 조회</description>
        <query>
            <![CDATA[
            SELECT B.EDU_CD,                                                                                           -- 과정코드
                   SF_GET_COURSEname(B.EDU_CD)                                                AS EDU_NM,     -- 과정명
                   SEQ_NO,                                                                                             -- SEQ번호
                   SUBSTR(A.CHASU_TAG, 1, 4)||'-'||SUBSTR(A.CHASU_TAG, 5, 2)                            AS CHASU_TAG,
                   TO_CHAR(TO_DATE(A.ENT_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')                          AS ENT_STR_YMD,
                   TO_CHAR(TO_DATE(A.ENT_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')                          AS ENT_END_YMD,
                   TO_CHAR(TO_DATE(A.ENT_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')||' ~ '||TO_CHAR(TO_DATE(A.ENT_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')
                                                                                                        AS ENT_TERM,   -- 신청기간
                   TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')                          AS EDU_STR_YMD,
                   TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')                          AS EDU_END_YMD,
                   TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')||' ~ '||TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')
                                                                                                        AS EDU_TERM,   -- 학습기간
                   A.MNGER_CD,                                                                                         -- 주관코드
                   A.SHAPE_CD,                                                                                         -- 형태코드
                   SF_GET_COMMname('01', 'Q8', A.SHAPE_CD)                                              AS SHAPE_NM,   -- 형태
                   (SELECT COUNT(*) FROM ASNHR.T_CM_EDUCATION WHERE SBJ_CD = A.EDU_CD AND SEQ_NO = A.SEQ_NO)  AS REQ_CNT,    -- 신청건수
                   CASE WHEN A.MNGER_CD = 'AA' THEN
                             '전사'
                        WHEN A.MNGER_CD = 'AB' THEN
                             TO_CHAR((SELECT COUNT(*) FROM ASNHR.T_ED_OBJTLIST WHERE EDU_CD = A.EDU_CD AND SEQ_NO = A.SEQ_NO))
                        END                                                                             AS OBJ_CNT,    -- 대상건수
                   (SELECT COUNT(*) FROM ASNHR.T_CM_EDUCATION WHERE SBJ_CD = A.EDU_CD AND SEQ_NO = A.SEQ_NO AND DECISION_CD = 'D')
                                                                                                        AS PAS_CNT,    -- 수료건수
                   B.ENO_NO,                                                                                           -- 사번
                   SF_GET_ENOname('01', B.ENO_NO)                                                       AS ENO_NM      -- 담당자
            FROM   ASNHR.T_ED_CHASULIST A,
                   ASNHR.T_ED_COURSELIST B
            WHERE  A.EDU_CD = B.EDU_CD
            AND    NVL(A.EDU_CD,' ') LIKE '%'||?||'%'
            AND    A.EDU_STR_YMD BETWEEN ? AND ?
            AND    A.PLACE_CD IN (?,?,?)
            ]]>
        </query>
    </sql>

    <!-- 실적관리 데이터 조회 -->
    <sql name="EDUH100_SHR_01">
        <description>실적관리 (과정정보) 조회</description>
        <query>
            <![CDATA[
            SELECT A.EDU_CD,                                                                       -- 과정코드
                   SF_GET_COURSEname(A.EDU_CD)                         AS EDU_NM,        -- 과정
                   A.SEQ_NO,                                                                       -- SEQ번호
                   SUBSTR(A.CHASU_TAG, 1, 4)||'-'||SUBSTR(A.CHASU_TAG, 5, 2)     AS CHASU_TAG,     -- 차수
                   SF_GET_COMMname('01', 'Q9', A.PLACE_CD)                       AS PLACE_NM,      -- 교육구분
                   TO_CHAR(TO_DATE(A.EDU_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')   AS EDU_STR_YMD,   -- 교육시작일자
                   TO_CHAR(TO_DATE(A.EDU_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')   AS EDU_END_YMD,   -- 교육종료일자
                   A.INT_NAM,                                                                      -- 교육기관
                   A.COST_AMT,                                                                     -- 소요비용
                   A.FIX_NO,                                                                       -- 인원
                   SF_GET_COMMname('01', 'QA', A.INS_YN)                         AS INS_NM,        -- 환급여부
                   A.COST_AMT - A.RTN_AMT                                        AS SUM_AMT,       -- 실비용
                   B.CONTENT_TXT                                                                   -- 내용
            FROM   ASNHR.T_ED_CHASULIST A,
                   ASNHR.T_ED_COURSELIST B
            WHERE  A.EDU_CD = ?
            AND    A.SEQ_NO = ?
            AND    A.EDU_CD = B.EDU_CD
            ]]>
        </query>
    </sql>

    <!-- 실적관리 (사원 리스트) 데이터 조회 -->
    <sql name="EDUH100_SHR_02">
        <description>실적관리 조회</description>
        <query>
            <![CDATA[
            SELECT SBJ_CD                                                        AS EDU_CD,        -- 과정코드
                   SEQ_NO,                                                                         -- SEQ_NO
                   ENO_NO,                                                                         -- 사번
                   STR_YMD,                                                                        -- 시작일
                   SF_GET_ENOname('01', ENO_NO)                                  AS ENO_NM,        -- 성명
                   SF_GET_DPTname('01', 'A4', DPT_CD)                            AS DPT_NM,        -- 소속
                   SF_GET_COMMname('01', 'A2', JOB_CD)                           AS JOB_NM,        -- 직위
                  (SELECT CET_NO FROM ASNHR.T_CM_PERSON WHERE ENO_NO = A.ENO_NO)       AS CET_NO,        -- 주민번호
                   APP_VAL,                                                                        -- 평가점수
                   CASE WHEN EDU_TAG = 'N' AND (TRIM(REASON_TAG) IS NULL OR  TRIM(REASON_TAG) = '') THEN ''
                        ELSE EDU_TAG
                   END                                                           AS EDU_TAG,       -- 수료여부
                   REASON_TAG                                                                      -- 미수료사유
            FROM   ASNHR.T_CM_EDUCATION A
            WHERE  SBJ_CD = ?
            AND    SEQ_NO = ?
            ]]>
        </query>
    </sql>

    <!-- 부서별 연간교육신청자 데이터 조회 -->
    <sql name="EDUK020_SHR">
        <description>부서별 연간교육신청자 데이터 조회</description>
        <query>
            <![CDATA[
            SELECT
				PIS_YY
				, DPT_CD
				, ORD_NO
				, ENO_NO
				, ASNHR.SF_GET_ENOname('01', ENO_NO)                                  AS ENO_NM
				, JOB_CD
                , ASNHR.SF_GET_COMMname('01', 'A2', JOB_CD)                           AS JOB_NM        -- 직위
				, EDU_CD
				, EDU_NM
				, INT_NAM
				, TO_CHAR(TO_DATE(STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')   AS STR_YMD   -- 교육시작일자
                , TO_CHAR(TO_DATE(END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')   AS END_YMD   -- 교육종료일자
				, TIME_NO
				, COST_AMT
				, DUTY_REL
				, ASNHR.SF_GET_COMMname('01', 'QR', DUTY_REL)                           AS DUTY_REL_NM        -- 직무관련성
				, DUTY_TXT																		--담당직무
				, EFFECT_TAG
				, INS_YN
				, ASNHR.SF_GET_COMMname('01', 'QA', INS_YN)                         AS INS_NM        -- 환급여부
				, SHAPE_CD
				, ASNHR.SF_GET_COMMname('01', 'Q8', SHAPE_CD)                                              AS SHAPE_NM   -- 형태
				, GOAL_TAG																--교육목표(업무목표)
			FROM ASNHR.T_ED_YEARPLAN
			WHERE PIS_YY = ?
			  AND DPT_CD = NVL(?,DPT_CD)
			ORDER BY ENO_NM
            ]]>
        </query>
    </sql>

    <!-- 부서별 연간교육신청자 데이터 조회 -->
    <sql name="EDUK021_SHR">
        <description>부서별 연간교육신청자 데이터 조회</description>
        <query>
            <![CDATA[
            SELECT
				PIS_YY
				, DPT_CD
				, ORD_NO
				, ENO_NO
				, ASNHR.SF_GET_ENOname('01', ENO_NO)                                  AS ENO_NM
				, JOB_CD
                , ASNHR.SF_GET_COMMname('01', 'A2', JOB_CD)                           AS JOB_NM        -- 직위
				, EDU_CD
				, EDU_NM
				, INT_NAM
				, TO_CHAR(TO_DATE(STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')   AS STR_YMD   -- 교육시작일자
                , TO_CHAR(TO_DATE(END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')   AS END_YMD   -- 교육종료일자
				, TIME_NO
				, COST_AMT
				, DUTY_REL
				, ASNHR.SF_GET_COMMname('01', 'QR', DUTY_REL)                           AS DUTY_REL_NM        -- 직무관련성
				, DUTY_TXT																		--담당직무
				, EFFECT_TAG
				, INS_YN
				, ASNHR.SF_GET_COMMname('01', 'QA', INS_YN)                         AS INS_NM        -- 환급여부
				, SHAPE_CD
				, ASNHR.SF_GET_COMMname('01', 'Q8', SHAPE_CD)                                              AS SHAPE_NM   -- 형태
				, GOAL_TAG																--교육목표(업무목표)
			FROM ASNHR.T_ED_YEARPLAN
			WHERE PIS_YY = ?
			  AND DPT_CD = NVL(?,DPT_CD)
			  AND ENO_NO = ?
            ]]>
        </query>
    </sql>
    <!-- 연간교육신청 목록 조회 -->
    <sql name="EDUK030_SHR">
        <description>교육신청 결재처리 조회</description>
        <query>
            <![CDATA[
			SELECT  A.GUN_YMD -- 근태일
			       ,A.GUN_DPT -- 근태부서
				   ,SF_GET_DPTname('01','A4',A.GUN_DPT)    AS DPT_NM -- 근태부서
				   ,A.PENO_NO -- 상신자
				   ,SF_GET_ENOname('01',A.PENO_NO)   AS PENO_NM
				   ,A.ENO_NO -- 결재자
				   ,SF_GET_ENOname('01',A.ENO_NO)   AS ENO_NM
				   ,A.GUN_GBN  -- 결재구분
				   ,'교육신청' GUN_GBN_NM -- 결재구분명
				   ,DECODE(A.APP_YN, NULL, 'A', A.APP_YN) AS APP_YN
				   ,DECODE(A.APP_YN,'Y','승인','N','부결','미결') APP_YN_NM -- 결재여부
				   ,A.APP_TIME
				   ,A.REQ_NO	-- 결재품의문서번호
				   ,A.SEQ_NO  -- 결재선
				   ,NVL(B.GUN_DPT, B.DPT_CD) AS DPT_CD
				   , ASNHR.SF_GET_DPTname('01','A4',T.DPT_CD) AS PDPT_NM
				   ,A.REMARK
				   , ASNHR.SF_GET_COMMname('01','A2',T.JOB_CD) AS PJOB_NM
                   , TO_CHAR(A.IPT_YMD,'YYYY-MM-DD HH24:MI') ORD_DATE-- 상신일
                   , ASNHR.SF_GET_ENOname('01', A.ENO_NO) AS APP_ENO_NM-- 현결재완료자
   				   , ASNHR.SF_GET_COMMname('01', 'A2', B.JOB_CD) AS APP_JOB_NM-- 현결재완료자직위
                   , DECODE(A.APP_YN, NULL, '', TO_CHAR(A.UPT_YMD,'YYYY-MM-DD HH24:MI')) APP_DATE -- 결재일시간
                   , A.REMARK AS APP_CMT-- 결재의견
                   , DECODE(A.APP_YN,'Y','승인','N','부결','미결') AS APP_STATUS-- 결재상태
                   ,TO_CHAR(TO_DATE(T.STR_YMD,'YYYYMMDD'),'YYYY/MM/DD') ||'~'||TO_CHAR(TO_DATE(T.END_YMD,'YYYYMMDD'),'YYYY/MM/DD') AS EDU_YMD
                   ,T.EDU_NM
                   ,T.INT_NAM       --시행처
                   ,T.EDU_AMT       --교육비
                   ,'F' AS CKBOX
			FROM ASNHR.T_CM_EDUCATION T, T_DI_APPROVAL A, ASNHR.VI_T_CM_PERSON B
			WHERE T.REQ_NO = A.REQ_NO
			  AND A.ENO_NO = B.ENO_NO
			AND   A.GUN_GBN  ='M'
			AND   A.ENO_NO   = ?   -- 결재자사번,상신자사번
			AND EXISTS (SELECT 'X' FROM ASNHR.T_ED_YEARPLAN WHERE TO_CHAR(SYSDATE,'YYYYMMDD') BETWEEN APP_STR_YMD AND APP_END_YMD)	--연간교육계획결재와 분리
			[1]
			 ORDER BY A.IPT_YMD DESC, T.ENO_NO
            ]]>
        </query>
    </sql>
    <!-- 부서별 연간교육신청자 데이터 조회 -->
    <sql name="EDUK040_SHR">
        <description>연간교육계획 기간설정정보 조회</description>
        <query>
            <![CDATA[
            SELECT
				PIS_YY
				, TO_CHAR(TO_DATE(REG_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')   AS REG_STR_YMD   -- 신청시작일자
                , TO_CHAR(TO_DATE(REG_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')   AS REG_END_YMD   -- 신청종료일자
				, TO_CHAR(TO_DATE(APP_STR_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')   AS APP_STR_YMD   -- 결재시작일자
                , TO_CHAR(TO_DATE(APP_END_YMD, 'YYYY-MM-DD'), 'YYYY-MM-DD')   AS APP_END_YMD   -- 결재종료일자
			FROM ASNHR.T_ED_YEARPLAN
			WHERE PIS_YY = NVL(?,PIS_YY)
            ]]>
        </query>
    </sql>
    <!-- 부서별 연간교육신청자 데이터 조회 -->
    <sql name="EDUK040_INS">
        <description>연간교육계획 기간설정정보 조회</description>
        <query>
            <![CDATA[
            INSERT INTO ASNHR.T_ED_YEARPLAN
            	(PIS_YY, REG_STR_YMD, REG_END_YMD, APP_STR_YMD, APP_END_YMD, IPT_MAN, IPT_YMD, UPT_MAN, UPT_YMD)
			VALUES
				(?, ?, ?, ?, ?, ?, SYSDATE, ?, SYSDATE)
            ]]>
        </query>
    </sql>
    <!-- 부서별 연간교육신청자 데이터 조회 -->
    <sql name="EDUK040_UPT">
        <description>연간교육계획 기간설정정보 조회</description>
        <query>
            <![CDATA[
            UPDATE ASNHR.T_ED_YEARPLAN
            SET REG_STR_YMD = ?,
            	REG_END_YMD = ?,
            	APP_STR_YMD = ?,
            	APP_END_YMD = ?,
            	UPT_MAN = ?,
            	UPT_YMD = SYSDATE
			WHERE PIS_YY = ?
            ]]>
        </query>
    </sql>
    <!-- 부서별 연간교육신청자 데이터 조회 -->
    <sql name="EDUK040_DEL">
        <description>연간교육계획 기간설정정보 조회</description>
        <query>
            <![CDATA[
            DELETE FROM ASNHR.T_ED_YEARPLAN
			WHERE PIS_YY = ?
            ]]>
        </query>
    </sql>
    <!-- 결재처리 -->
    <sql name="EDUK030_UPT">
        <description>결재정보 수정</description>
        <query>
            <![CDATA[
            UPDATE T_DI_APPROVAL
            SET    APP_YN = ?,
                   APP_TIME = TO_CHAR(SYSDATE,'HH24:MI'),
                   REMARK   = ?,
                   UPT_MAN = ?,
                   UPT_YMD = SYSDATE
            WHERE  SEQ_NO  = ?
            AND    REQ_NO  = ?
            AND    GUN_GBN = ?
            ]]>
        </query>
    </sql>
    <!-- 결재한개수 세기 -->
    <sql name="EDUK030_CNT">
        <description>결재정보개수세기</description>
        <query>
            <![CDATA[
			SELECT DECODE(T.TOTAL,0,'-',DECODE(Y.APP/T.TOTAL,1,'C',DECODE(N.RST/T.TOTAL,1,'E','-'))) APP_YN FROM
                (SELECT COUNT(*) APP
	                FROM T_DI_APPROVAL
	                WHERE  REQ_NO  = ?
	                AND    GUN_GBN = ?
	                AND APP_YN = 'Y') Y,
                (SELECT COUNT(*) RST
	                FROM T_DI_APPROVAL
	                WHERE  REQ_NO  = ?
	                AND    GUN_GBN = ?
	                AND APP_YN = 'N') N,
                (SELECT COUNT(*) TOTAL
	                FROM T_DI_APPROVAL
	                WHERE  REQ_NO  = ?
	                AND    GUN_GBN = ?) T
            ]]>
        </query>
    </sql>
    <!-- 결재상태 정보 수정 -->
    <sql name="EDUK030_UPT_01">
        <description>결재상태 정보 수정</description>
        <query>
            <![CDATA[
             UPDATE  ASNHR.T_CM_EDUCATION
             SET     DECISION_CD = ?,
                     UPT_MAN = ?,
                     UPT_YMD = SYSDATE
             WHERE   REQ_NO  = ?
            ]]>
        </query>
    </sql>


</sqls>